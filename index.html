<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GTM Scenario Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .font-inter {
        font-family: "Inter", sans-serif;
      }
      .icon-16 {
        width: 16px;
        height: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .icon-20 {
        width: 20px;
        height: 20px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .icon-sort {
        font-size: 16px;
        line-height: 16px;
      }
      .icon-caret {
        font-size: 16px;
        line-height: 16px;
      }
      .table-row.is-selected {
        background-color: #d8e7fb;
      }
      .table-checkbox {
        appearance: none;
        width: 16px;
        height: 16px;
        border: 1.5px solid #2d2d2d;
        border-radius: 3px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #fff;
      }
      .table-checkbox:checked {
        border-color: #004895;
        background-color: #004895;
      }
      .table-checkbox:checked::after {
        content: "";
        width: 8px;
        height: 5px;
        border-left: 2px solid #fff;
        border-bottom: 2px solid #fff;
        transform: rotate(-45deg);
        display: block;
      }
      .table-checkbox:indeterminate {
        border-color: #004895;
        background-color: #004895;
      }
      .table-checkbox:indeterminate::after {
        content: "";
        width: 8px;
        height: 2px;
        background: #fff;
        border-radius: 2px;
        display: block;
        transform: translateY(1px);
      }
      [data-define-panel="Time Estimates"] .facility-input {
        color: #2d2d2d !important;
      }
      .radio-input {
        appearance: none;
        width: 16px;
        height: 16px;
        border: 1.5px solid #2d2d2d;
        border-radius: 9999px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #fff;
      }
      .radio-input:checked {
        border-color: #004895;
        background: #004895;
      }
      .radio-input:checked::after {
        content: "";
        width: 6px;
        height: 6px;
        border-radius: 9999px;
        background: #fff;
        display: block;
      }
      .filter-checkbox {
        appearance: none;
        width: 12px;
        height: 12px;
        border: 1.5px solid #2d2d2d;
        border-radius: 2px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #fff;
      }
      .filter-checkbox:checked {
        border-color: #004895;
        background-color: #004895;
      }
      .filter-checkbox:checked::after {
        content: "";
        width: 6px;
        height: 4px;
        border-left: 2px solid #fff;
        border-bottom: 2px solid #fff;
        transform: rotate(-45deg);
        display: block;
      }
      .filter-checkbox:indeterminate {
        border-color: #004895;
        background-color: #004895;
      }
      .filter-checkbox:indeterminate::after {
        content: "";
        width: 6px;
        height: 2px;
        background: #fff;
        border-radius: 2px;
        display: block;
      }
      .filter-chip-active {
        background: #d8e7fb;
        border-color: #004895;
        color: #004895;
      }
      .table-text,
      .table-text * {
        font-size: 14px;
      }
      .table-header,
      .table-header * {
        font-size: 12px;
      }
      .facility-input {
        width: 100%;
        height: 32px;
        border: 1px solid #c0c0c0;
        border-radius: 4px;
        padding: 0 8px;
        font-size: 14px;
        color: #2d2d2d;
        background: #fff;
      }
      .facility-input:focus,
      .facility-input:active {
        outline: none;
        border-color: #0662c4;
      }
      .facility-input:disabled {
        background: #dadada;
        color: #b1b1b1;
      }
      .facility-input::-webkit-outer-spin-button,
      .facility-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .facility-input[type="number"] {
        -moz-appearance: textfield;
      }
      .define-parameters-tab {
        width: 100%;
      }
      .labor-table .facility-input + div,
      .labor-table .facility-input + div .material-icons {
        color: #4b4b4b;
      }
      .facility-input:disabled + div,
      .facility-input:disabled + div .material-icons {
        color: #b1b1b1;
      }
      [data-define-panel="Facilities"] .facility-input + div,
      [data-define-panel="Facilities"] .facility-input + div .material-icons {
        color: #4b4b4b;
      }
      [data-define-panel="Facilities"] .facility-input:disabled + div,
      [data-define-panel="Facilities"] .facility-input:disabled + div .material-icons {
        color: #b1b1b1;
      }
      .filter-menu {
        width: 240px;
        border: 1px solid #d8e7fb;
        border-radius: 4px;
        box-shadow: 0 4px 24px rgba(58, 58, 58, 0.08);
      }
      .waterfall-chart {
        border-radius: 8px;
        background: #fff;
        padding: 12px 8px 10px 8px;
        width: 100%;
      }
      .waterfall-body {
        display: flex;
        gap: 10px;
        align-items: stretch;
        width: 100%;
      }
      .waterfall-y {
        width: 56px;
        height: 280px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        font-size: 11px;
        color: #7a7a7a;
        padding-right: 6px;
        border-right: 1px solid #e6e6e6;
      }
      .waterfall-plot {
        position: relative;
        display: grid;
        grid-template-columns: repeat(9, minmax(0, 1fr));
        gap: 10px;
        height: 280px;
        width: 100%;
        flex: 1;
        min-width: 0;
        background-image: repeating-linear-gradient(
          to top,
          #e6e6e6 0,
          #e6e6e6 1px,
          transparent 1px,
          transparent 56px
        );
        border-left: 1px solid #e6e6e6;
        border-bottom: 1px solid #e6e6e6;
      }
      .waterfall-col {
        position: relative;
        height: 100%;
      }
      .waterfall-col::after {
        content: "";
        position: absolute;
        left: 50%;
        width: calc(100% + 10px);
        border-top: 1px dashed #cfcfcf;
        bottom: var(--connector, -9999px);
        z-index: 1;
      }
      .waterfall-col:last-child::after {
        display: none;
      }
      .waterfall-bar {
        position: absolute;
        left: 12%;
        width: 76%;
        bottom: var(--bar-bottom);
        height: var(--bar-height);
        border-radius: 2px;
        display: block;
        overflow: visible;
        box-sizing: border-box;
        z-index: 2;
      }
      .waterfall-bar.is-start {
        background: #4a4a4a;
      }
      .waterfall-bar.is-positive {
        background: #0a7d24;
      }
      .waterfall-bar.is-negative {
        background: #b23a1a;
      }
      .waterfall-bar.is-total {
        background: #d9d9d9;
      }
      .waterfall-value {
        position: absolute;
        top: 3px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 10px;
        font-weight: 700;
        color: #fff;
        line-height: 1;
        white-space: nowrap;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      }
      .waterfall-bar.is-total .waterfall-value {
        color: #4b4b4b;
      }
      .waterfall-x {
        margin-left: 66px;
        margin-top: 8px;
        display: grid;
        grid-template-columns: repeat(9, minmax(0, 1fr));
        gap: 10px;
        font-size: 11px;
        color: #7a7a7a;
        text-align: center;
      }
    </style>
  </head>
  <body class="bg-[#f5f9ff] text-[#2d2d2d]">
    <div class="min-h-screen">
      <header
        class="bg-white border-b border-[#d8e7fb] shadow-[4px_0px_24px_0px_rgba(0,94,192,0.08)]"
      >
        <div class="mx-auto flex h-16 items-center justify-between px-16">
          <div class="flex items-center gap-10">
            <div class="flex items-center gap-3">
              <div class="h-10 w-28">
                <img
                  alt="PepsiCo Logo"
                  class="h-10 w-28 object-contain"
                  src="_Logo area.png"
                />
              </div>
              <div class="h-6 w-px bg-[#dadada]"></div>
              <div class="text-[16px] leading-[22px] text-[#2d2d2d]">
                GTM Scenario Tool
              </div>
            </div>
            <nav class="flex h-16 items-center gap-2">
              <button
                id="nav-workspace"
                class="flex h-16 items-center border-b border-transparent hover:border-[#0662C4]"
                type="button"
              >
                <div class="flex items-center gap-2 px-2 py-1">
                  <span
                    class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-[#004895]"
                  >
                    dashboard
                  </span>
                  <span class="text-[16px] font-bold text-[#004895]">
                    Workspace
                  </span>
                </div>
              </button>
              <button
                id="nav-scenario"
                class="flex h-16 items-center border-b border-transparent hover:border-[#0662C4]"
                type="button"
              >
                <div class="flex items-center gap-2 px-2 py-1">
                  <span
                    class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-[#4b4b4b]"
                  >
                    add
                  </span>
                  <span class="text-[16px] text-[#4b4b4b]">Scenario</span>
                </div>
              </button>
            </nav>
          </div>
          <div class="flex items-center">
            <div class="flex items-center gap-6 pr-6">
              <div class="relative flex h-16 w-14 items-center justify-center">
                <span
                  class="material-icons inline-flex h-6 w-6 items-center justify-center text-[24px] leading-none text-[#2d2d2d]"
                >
                  notifications_none
                </span>
                <div
                  class="absolute left-[26px] top-[17px] flex min-w-[18px] items-center justify-center rounded-full bg-[#c12c01] px-1"
                >
                  <span class="text-[12px] font-bold leading-[20px] text-white">
                    10
                  </span>
                </div>
              </div>
              <div class="flex items-center gap-1">
                <div
                  class="flex h-10 w-10 items-center justify-center rounded-full bg-[#dadada] text-[14px] font-bold text-[#4b4b4b]"
                  aria-label="Signed in as GG"
                >
                  GG
                </div>
                <span
                  class="material-icons inline-flex h-6 w-6 items-center justify-center text-[24px] leading-none text-[#2d2d2d]"
                >
                  arrow_drop_down
                </span>
              </div>
            </div>
            <div class="flex h-16 w-14 items-center justify-center bg-[#004895]">
              <span
                class="material-icons inline-flex h-6 w-6 items-center justify-center text-[24px] leading-none text-white"
              >
                apps
              </span>
            </div>
          </div>
        </div>
      </header>

      <main class="px-12 pb-24 pt-6">
        <section id="workspace-view" class="mx-auto max-w-[1344px]">
          <div
            class="rounded-lg bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
          >
            <div class="border-b-2 border-[#d8e7fb]">
              <div
                class="flex items-start border-b-2 border-[#d8e7fb] bg-white px-2 pt-2"
              >
                <button
                  id="tab-all"
                  class="flex min-h-[32px] items-center border-b-2 border-[#004895] px-2 py-1 text-[14px] font-bold text-[#4b4b4b]"
                >
                  All
                </button>
                <button
                  id="tab-my"
                  class="flex min-h-[32px] items-center border-b border-[#d8e7fb] px-2 py-1 text-[14px] text-[#4b4b4b]"
                >
                  My workspace
                </button>
              </div>

              <div class="flex flex-col gap-[2px] bg-[#d8e7fb]">
                <div
                  class="flex flex-wrap items-center justify-end gap-x-[200px] gap-y-3 bg-white px-2 py-5"
                >
                  <div class="flex flex-1 items-center gap-2">
                    <div class="relative">
                      <button
                        id="portfolio-chip"
                        class="filter-chip-active flex h-8 items-center gap-1 rounded-full border bg-white px-4 text-[14px]"
                        type="button"
                      >
                        Portfolio
                        <span class="icon-16">
                          <span class="material-icons icon-caret">arrow_drop_down</span>
                        </span>
                        <span
                          id="portfolio-count"
                          class="ml-1 hidden flex h-6 items-center justify-center gap-1 rounded bg-[#106e98] px-2 text-[12px] leading-[20px] text-white"
                        >
                          <span
                            id="portfolio-count-value"
                            class="leading-[20px]"
                          >
                            0
                          </span>
                          <span
                            id="portfolio-clear"
                            class="material-icons inline-flex h-5 w-5 items-center justify-center text-[12px] leading-[20px]"
                          >
                            close
                          </span>
                        </span>
                      </button>
                      <div
                        id="portfolio-menu"
                        class="filter-menu absolute left-0 top-[36px] hidden bg-white p-2 text-[14px] text-[#4b4b4b]"
                      >
                        <div class="flex items-center gap-2 rounded border border-[#c0c0c0] px-2 py-1">
                          <input
                            id="portfolio-search"
                            class="w-full text-[14px] outline-none"
                            placeholder="Search..."
                            type="text"
                          />
                          <span
                            class="material-icons text-[16px] text-[#4b4b4b]"
                          >
                            search
                          </span>
                        </div>
                        <div
                          id="portfolio-options"
                          class="mt-2 max-h-[180px] overflow-auto"
                        ></div>
                        <div class="mt-2 flex items-center justify-end gap-4 border-t border-[#d8e7fb] pt-2 text-[12px] font-bold text-[#004895]">
                          <button id="portfolio-cancel" type="button">Cancel</button>
                          <button
                            id="portfolio-apply"
                            class="rounded-full bg-[#004895] px-3 py-1 text-white"
                            type="button"
                          >
                            Apply
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="relative">
                      <button
                        id="status-chip"
                        class="filter-chip-active flex h-8 items-center gap-1 rounded-full border bg-white px-4 text-[14px]"
                        type="button"
                      >
                        Status
                        <span class="icon-16">
                          <span class="material-icons icon-caret">arrow_drop_down</span>
                        </span>
                        <span
                          id="status-count"
                          class="ml-1 hidden flex h-6 items-center justify-center gap-1 rounded bg-[#106e98] px-2 text-[12px] leading-[20px] text-white"
                        >
                          <span
                            id="status-count-value"
                            class="leading-[20px]"
                          >
                            0
                          </span>
                          <span
                            id="status-clear"
                            class="material-icons inline-flex h-5 w-5 items-center justify-center text-[12px] leading-[20px]"
                          >
                            close
                          </span>
                        </span>
                      </button>
                      <div
                        id="status-menu"
                        class="filter-menu absolute left-0 top-[36px] hidden bg-white p-2 text-[14px] text-[#4b4b4b]"
                      >
                        <div class="flex items-center gap-2 rounded border border-[#c0c0c0] px-2 py-1">
                          <input
                            id="status-search"
                            class="w-full text-[14px] outline-none"
                            placeholder="Search..."
                            type="text"
                          />
                          <span
                            class="material-icons text-[16px] text-[#4b4b4b]"
                          >
                            search
                          </span>
                        </div>
                        <div
                          id="status-options"
                          class="mt-2 max-h-[180px] overflow-auto"
                        ></div>
                        <div class="mt-2 flex items-center justify-end gap-4 border-t border-[#d8e7fb] pt-2 text-[12px] font-bold text-[#004895]">
                          <button id="status-cancel" type="button">Cancel</button>
                          <button
                            id="status-apply"
                            class="rounded-full bg-[#004895] px-3 py-1 text-white"
                            type="button"
                          >
                            Apply
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="h-6 w-px bg-[#d8e7fb]"></div>
                    <button class="h-8 px-2 text-[14px] font-bold text-[#004895]">
                      Reset all
                    </button>
                  </div>
                  <div class="flex items-center gap-3">
                    <div class="relative">
                      <div
                        class="flex h-8 w-8 items-center justify-center rounded border border-[#d8e7fb] bg-white"
                      >
                        <span
                          class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#004895]"
                        >
                          search
                        </span>
                      </div>
                      <div
                        class="pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 translate-y-[-35px] rounded bg-[#262626] px-2 py-1 text-[12px] text-[#efefef] opacity-0 shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                      >
                        Search
                      </div>
                    </div>
                    <div class="h-6 w-px bg-[#d8e7fb]"></div>
                    <button
                      id="new-scenario"
                      class="flex h-8 items-center gap-2 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
                    >
                      <span
                        class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none"
                      >
                        add
                      </span>
                      New Scenario
                    </button>
                    <button
                      id="compare-button"
                      type="button"
                      class="flex h-8 items-center gap-2 rounded-full border border-[#dadada] px-4 text-[14px] font-bold text-[#b1b1b1] cursor-pointer"
                    >
                      <span
                        class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-current"
                      >
                        compare_arrows
                      </span>
                      Compare
                    </button>
                  </div>
                </div>

                <div
                  id="bulk-bar"
                  class="flex items-center justify-between bg-[#f5f9ff] px-2 py-3"
                >
                  <p class="text-[14px] font-bold text-[#004895]">
                    <span id="selected-count">1</span> of
                    <span id="total-count">10</span> rows selected
                  </p>
                  <div class="flex items-center gap-3">
                    <div class="flex items-center gap-1 text-[12px] font-bold text-[#004895]">
                      <span
                        class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none"
                      >
                        delete
                      </span>
                      Delete
                    </div>
                    <div class="flex items-center gap-1 text-[12px] font-bold text-[#004895]">
                      <span
                        class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none"
                      >
                        edit
                      </span>
                      Duplicate &amp; Edit
                    </div>
                  </div>
                </div>
                <!-- Removed: Time Estimates + Channel List (workspace tab) -->
                
              </div>
            </div>

            <div class="border-b-2 border-[#d8e7fb]">
              <div
                class="grid min-h-[48px] grid-cols-[32px_120px_1fr_120px_140px_120px_1fr_120px] items-center border-b-2 border-[#d8e7fb] bg-white"
              >
                <div class="flex items-center justify-center">
                  <input
                    id="select-all"
                    type="checkbox"
                    class="table-checkbox"
                  />
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  Scenario ID
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  Description
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  Portfolio
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  Owner
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  Status
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  Date Modified
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
                <div class="flex items-center gap-2 px-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                  PTS Impact
                  <span class="icon-16">
                    <span class="material-icons icon-sort">unfold_more</span>
                  </span>
                </div>
              </div>

              <div
                id="table-body"
                class="divide-y-2 divide-[#d8e7fb]"
              ></div>
            </div>

            <div class="flex items-center justify-between px-2 py-4">
              <div class="flex items-center gap-2">
                <span class="text-[14px]">Rows per page</span>
                <div class="flex w-[60px] items-center">
                  <div
                    class="flex h-8 w-full items-center justify-between rounded border border-[#c0c0c0] bg-white px-2 text-[14px]"
                  >
                    10
                  <span class="icon-16">
                    <span class="material-icons icon-caret">arrow_drop_down</span>
                  </span>
                  </div>
                </div>
              </div>
              <div class="flex items-center gap-6">
                <div class="flex items-center gap-2">
                  <button
                    id="workspace-first-page"
                    class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-[#004895]"
                    type="button"
                    aria-label="First page"
                  >
                    first_page
                  </button>
                  <button
                    id="workspace-prev-page"
                    class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-[#004895]"
                    type="button"
                    aria-label="Previous page"
                  >
                    chevron_left
                  </button>
                </div>
                <div class="flex items-center gap-2 text-[14px]">
                  <span>Page</span>
                  <div
                    id="workspace-page-current"
                    class="flex h-8 w-[43px] items-center justify-center rounded border border-[#c0c0c0] bg-white"
                  >
                    1
                  </div>
                  <span>
                    of <span id="workspace-page-total" class="font-inter font-bold">1</span>
                  </span>
                </div>
                <div class="flex items-center gap-2">
                  <button
                    id="workspace-next-page"
                    class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-[#004895]"
                    type="button"
                    aria-label="Next page"
                  >
                    chevron_right
                  </button>
                  <button
                    id="workspace-last-page"
                    class="material-icons inline-flex h-5 w-5 items-center justify-center text-[20px] leading-none text-[#004895]"
                    type="button"
                    aria-label="Last page"
                  >
                    last_page
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section
          id="scenario-view"
          class="mx-auto hidden max-w-[1344px] flex-col gap-6"
        >
          <div class="flex flex-col gap-4 pb-6">
            <p class="text-[18px] leading-[24px] text-[#4b4b4b]">
              SCENARIO CREATION
            </p>
            <div class="flex items-start justify-between px-12">
              <div class="flex flex-1 flex-col">
                <div class="flex w-full items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#0662C4]"
                  >
                    radio_button_checked
                  </span>
                  <div class="flex-1">
                    <div class="h-[2px] w-full bg-[#4b4b4b] text-[#0562C4]"></div>
                  </div>
                </div>
                <p class="pt-1 text-[14px] font-bold text-[#004895]">
                  Define Scope
                </p>
              </div>
              <div class="flex flex-1 flex-col">
                <div class="flex w-full items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#4b4b4b]"
                  >
                    circle
                  </span>
                  <div class="flex-1">
                    <div class="h-[2px] w-full bg-[#0662C4]"></div>
                  </div>
                </div>
                <p class="pt-1 text-[14px] text-[#4b4b4b]">View Baseline</p>
              </div>
              <div class="flex flex-col">
                <div class="flex items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#4b4b4b]"
                  >
                    circle
                  </span>
                </div>
                <p class="pt-1 text-[14px] text-[#4b4b4b]">
                  Define Parameters
                </p>
              </div>
            </div>
          </div>

          <div
            class="mt-6 flex gap-6 rounded-lg bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
          >
            <div class="flex w-[360px] flex-col gap-6">
              <div class="flex w-fit items-center gap-2 rounded-lg border border-[#d8e7fb] bg-[#f5f9ff] p-1">
                <button
                  class="define-scope-tab flex h-8 items-center gap-1 rounded-lg px-3 text-[14px] text-[#2d2d2d]"
                  data-scope-tab="select"
                  type="button"
                >
                  <span
                    class="material-icons text-[20px] text-[#2d2d2d]"
                  >
                    pin_drop
                  </span>
                  Select Locations
                </button>
                <button
                  class="define-scope-tab flex h-8 items-center gap-1 rounded-lg border border-[#004895] bg-white px-3 text-[14px] font-bold text-[#004895]"
                  data-scope-tab="upload"
                  type="button"
                >
                  <span class="material-icons text-[20px] text-[#004895]">
                    cloud_upload
                  </span>
                  Upload Store List
                </button>
              </div>

              <div class="flex gap-5">
                <div class="flex flex-1 flex-col gap-2">
                <div
                  class="flex items-center justify-between text-[12px] font-medium"
                >
                  <div class="flex items-center gap-2">
                    <span>Start Date</span>
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                  </div>
                  <span class="text-[#4b4b4b]">*Required</span>
                </div>
                  <div class="relative">
                    <div
                      id="start-date-field"
                      class="flex h-8 items-center justify-between rounded border border-[#c0c0c0] bg-white px-2 text-[14px]"
                      role="button"
                      tabindex="0"
                    >
                      <span id="start-date-value"></span>
                      <span class="material-icons text-[16px] text-[#4b4b4b]">
                        keyboard_arrow_down
                      </span>
                    </div>
                    <div
                      id="start-date-menu"
                      class="absolute left-0 right-0 top-[36px] z-30 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                    ></div>
                  </div>
                  <div class="flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                    Lorem Ipsum
                  </div>
                </div>
                <div class="flex flex-1 flex-col gap-2">
                <div
                  class="flex items-center justify-between text-[12px] font-medium"
                >
                  <div class="flex items-center gap-2">
                    <span>End Date</span>
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                  </div>
                  <span class="text-[#4b4b4b]">*Required</span>
                </div>
                  <div class="relative">
                    <div
                      id="end-date-field"
                      class="flex h-8 items-center justify-between rounded border border-[#c0c0c0] bg-white px-2 text-[14px]"
                      role="button"
                      tabindex="0"
                    >
                      <span id="end-date-value"></span>
                      <span class="material-icons text-[16px] text-[#4b4b4b]">
                        keyboard_arrow_down
                      </span>
                    </div>
                    <div
                      id="end-date-menu"
                      class="absolute left-0 right-0 top-[36px] z-30 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                    ></div>
                  </div>
                  <div class="flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                    Lorem Ipsum
                  </div>
                </div>
              </div>

              <div class="flex w-[300px] flex-col gap-2">
                <div class="flex items-center justify-between text-[12px]">
                  <div class="flex items-center gap-2 font-medium">
                    <span>Select Portfolio</span>
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                  </div>
                  <span class="text-[#4b4b4b]">*Required</span>
                </div>
                <div class="relative">
                  <div
                    id="portfolio-select-field"
                    class="flex h-8 items-center justify-between rounded border border-[#c0c0c0] bg-white px-2 text-[14px]"
                    role="button"
                    tabindex="0"
                  >
                    <span id="portfolio-select-value"></span>
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      keyboard_arrow_down
                    </span>
                  </div>
                  <div
                    id="portfolio-select-menu"
                    class="absolute left-0 right-0 top-[36px] z-20 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                  ></div>
                </div>
              </div>
              <div class="flex w-[300px] flex-col gap-2 hidden" data-scope-panel="select">
                <div class="flex items-center justify-between text-[12px]">
                  <div class="flex items-center gap-2 font-medium">
                    <span>Select State(s)</span>
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                  </div>
                  <span class="text-[#4b4b4b]">*Required</span>
                </div>
                <div class="relative">
                  <div
                    id="state-select-field"
                    class="flex h-8 items-center justify-between rounded border border-[#c0c0c0] bg-white px-2 text-[14px]"
                    role="button"
                    tabindex="0"
                  >
                    <input
                      id="state-select-value"
                      type="text"
                      placeholder="Select"
                      class="w-full bg-transparent text-[#4b4b4b] outline-none"
                    />
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      keyboard_arrow_down
                    </span>
                  </div>
                  <div
                    id="state-select-menu"
                    class="absolute left-0 right-0 top-[36px] z-20 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                  >
                    <div id="state-select-options" class="flex flex-col gap-1"></div>
                  </div>
                </div>
              </div>

              <div class="flex w-[300px] flex-col gap-2 hidden" data-scope-panel="select">
                <div
                  id="food-location-label"
                  class="flex items-center gap-2 text-[12px] font-medium text-[#b1b1b1]"
                >
                  <span>Select Food Locations</span>
                  <span
                    id="food-location-icon"
                    class="material-icons text-[16px] text-[#b1b1b1]"
                  >
                    info
                  </span>
                </div>
                <div class="relative">
                  <div
                    id="food-location-field"
                    class="flex h-8 items-center justify-between rounded border border-[#dadada] bg-[#efefef] px-2 text-[14px] text-[#b1b1b1]"
                    role="button"
                    tabindex="-1"
                    aria-disabled="true"
                  >
                    <input
                      id="food-location-value"
                      type="text"
                      placeholder="Select"
                      class="w-full bg-transparent text-current outline-none placeholder:text-[#b1b1b1]"
                    />
                    <span
                      id="food-location-chevron"
                      class="material-icons text-[16px] text-[#b1b1b1]"
                    >
                      keyboard_arrow_down
                    </span>
                  </div>
                  <div
                    id="food-location-menu"
                    class="absolute left-0 right-0 top-[36px] z-20 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                  >
                    <div id="food-location-options" class="flex flex-col gap-1"></div>
                  </div>
                </div>
              </div>

              <div class="flex w-[300px] flex-col gap-2 hidden" data-scope-panel="select">
                <div
                  id="beverage-location-label"
                  class="flex items-center gap-2 text-[12px] font-medium text-[#b1b1b1]"
                >
                  <span>Select Beverage Locations</span>
                  <span
                    id="beverage-location-icon"
                    class="material-icons text-[16px] text-[#b1b1b1]"
                  >
                    info
                  </span>
                </div>
                <div class="relative">
                  <div
                    id="beverage-location-field"
                    class="flex h-8 items-center justify-between rounded border border-[#dadada] bg-[#efefef] px-2 text-[14px] text-[#b1b1b1]"
                    role="button"
                    tabindex="-1"
                    aria-disabled="true"
                  >
                    <input
                      id="beverage-location-value"
                      type="text"
                      placeholder="Select"
                      class="w-full bg-transparent text-current outline-none placeholder:text-[#b1b1b1]"
                    />
                    <span
                      id="beverage-location-chevron"
                      class="material-icons text-[16px] text-[#b1b1b1]"
                    >
                      keyboard_arrow_down
                    </span>
                  </div>
                  <div
                    id="beverage-location-menu"
                    class="absolute left-0 right-0 top-[36px] z-20 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                  >
                    <div id="beverage-location-options" class="flex flex-col gap-1"></div>
                  </div>
                </div>
              </div>

              <div class="flex w-[300px] flex-col gap-2 hidden" data-scope-panel="select">
                <div
                  id="food-beverage-location-label"
                  class="flex items-center gap-2 text-[12px] font-medium text-[#b1b1b1]"
                >
                  <span>Select Food &amp; Beverage Locations</span>
                  <span
                    id="food-beverage-location-icon"
                    class="material-icons text-[16px] text-[#b1b1b1]"
                  >
                    info
                  </span>
                </div>
                <div class="relative">
                  <div
                    id="food-beverage-location-field"
                    class="flex h-8 items-center justify-between rounded border border-[#dadada] bg-[#efefef] px-2 text-[14px] text-[#b1b1b1]"
                    role="button"
                    tabindex="-1"
                    aria-disabled="true"
                  >
                    <input
                      id="food-beverage-location-value"
                      type="text"
                      placeholder="Select"
                      class="w-full bg-transparent text-current outline-none placeholder:text-[#b1b1b1]"
                    />
                    <span
                      id="food-beverage-location-chevron"
                      class="material-icons text-[16px] text-[#b1b1b1]"
                    >
                      keyboard_arrow_down
                    </span>
                  </div>
                  <div
                    id="food-beverage-location-menu"
                    class="absolute left-0 right-0 top-[36px] z-20 hidden max-h-[240px] overflow-auto rounded border border-[#d8e7fb] bg-white p-2 text-[14px] text-[#4b4b4b] shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)]"
                  >
                    <div id="food-beverage-location-options" class="flex flex-col gap-1"></div>
                  </div>
                </div>
              </div>

              <button
                id="apply-selections-button"
                class="mt-2 flex h-8 w-[180px] items-center justify-center gap-1 rounded-full bg-[#dadada] px-4 text-[14px] font-bold text-[#b1b1b1] transition-colors hidden"
                type="button"
                disabled
                data-scope-panel="select"
              >
                Apply Selections
              </button>

            </div>

            <div class="flex-1 hidden" data-scope-panel="upload">
              <div class="flex w-full max-w-[500px] flex-col gap-2 mx-auto">
                <div class="flex items-center justify-between text-[12px]">
                  <div class="flex items-center gap-2 font-medium">
                    <span>Upload Store IDs</span>
                    <span class="material-icons text-[16px] text-[#4b4b4b]">
                      info
                    </span>
                  </div>
                  <span class="text-[#4b4b4b]">*Required</span>
                </div>
                <div
                  id="upload-dropzone"
                  class="flex flex-1 flex-col items-center justify-center gap-4 rounded border border-dashed border-[#d8e7fb] bg-[#f5f9ff] px-4 py-4"
                >
                  <div class="flex flex-col items-center gap-2 text-center text-[12px]">
                    <span class="material-icons text-[32px] text-[#2d2d2d]">
                      cloud_upload
                    </span>
                    <div>
                      Drag and drop your file here
                      <br />
                      (only .cvs)
                    </div>
                  </div>
                  <button
                    id="upload-file-button"
                    class="flex h-8 items-center gap-2 rounded-full border border-[#004895] px-4 text-[14px] font-bold text-[#004895] hover:border-[#002B5E] hover:text-[#002B5E]"
                    type="button"
                  >
                    <span class="material-icons text-[16px] text-current">
                      file_upload
                    </span>
                    Upload file
                  </button>
                </div>
                <div
                  id="uploaded-file"
                  class="hidden flex h-[58px] items-center justify-between rounded border border-[#d8e7fb] bg-white px-3 py-2 text-[12px]"
                >
                  <div class="flex items-center gap-2">
                    <span class="material-icons text-[16px] text-[#004895]">
                      description
                    </span>
                    <span id="uploaded-file-name" class="font-medium">
                      Select design is Figma
                    </span>
                  </div>
                  <div class="flex items-center gap-3 text-[#004895]">
                    <button
                      id="uploaded-download"
                      class="flex items-center"
                      type="button"
                      aria-label="Download file"
                      title="Download"
                    >
                      <span class="material-icons text-[16px]">download</span>
                    </button>
                    <button
                      id="uploaded-delete"
                      class="flex items-center"
                      type="button"
                      aria-label="Delete file"
                      title="Delete"
                    >
                      <span class="material-icons text-[16px]">delete</span>
                    </button>
                  </div>
                </div>
                <div class="flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                  <span class="material-icons text-[16px] text-[#4b4b4b]">
                    info
                  </span>
                  Only one file is allowed
                </div>
              </div>
            </div>

            <div class="flex-1 hidden" data-scope-panel="select-map">
              <div class="relative h-full min-h-[520px] rounded-lg border border-[#d8e7fb] bg-[#e6e8e3]">
                <img
                  id="map-image"
                  src="./map1.png"
                  alt="Map"
                  class="absolute inset-0 h-full w-full rounded-lg object-cover"
                />
                <div class="absolute inset-0 z-10 pointer-events-none">
                  <div id="map-markers" class="absolute inset-0"></div>
                </div>
                <div class="absolute left-4 top-4 z-20 rounded bg-white/90 px-3 py-2 text-[12px] text-[#2d2d2d] shadow">
                  <div class="font-bold uppercase text-[11px] text-[#4b4b4b]">
                    Locations
                  </div>
                  <div class="mt-1 space-y-1">
                    <div class="flex items-center gap-2">
                      <span class="inline-flex h-5 w-5 items-center justify-center text-[16px] leading-none text-[#2d2d2d]">â—†</span>
                      <span class="text-left">DCs: [# of DCs]</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="inline-flex h-5 w-5 items-center justify-center text-[14px] leading-none text-[#2d2d2d]">â–²</span>
                      <span class="text-left">Plant Warehouses: [# of Plant Warehouses]</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="inline-flex h-5 w-5 items-center justify-center text-[16px] leading-none text-[#2d2d2d]">â– </span>
                      <span class="text-left">PEC/BINs: [# of PEC/BINs]</span>
                    </div>
                    <div class="mt-2 flex items-center gap-2">
                      <span class="inline-flex h-5 w-5 items-center justify-center">
                        <span class="h-3 w-3 rounded-full bg-[#E5BB08]"></span>
                      </span>
                      <span class="text-left">Foods: [# of Food Locations]</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="inline-flex h-5 w-5 items-center justify-center">
                        <span class="h-3 w-3 rounded-full bg-[#0662C4]"></span>
                      </span>
                      <span class="text-left">Beverages: [# of Beverage Locations]</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="inline-flex h-5 w-5 items-center justify-center">
                        <span class="h-3 w-3 rounded-full bg-[#027C06]"></span>
                      </span>
                      <span class="text-left">Foods &amp; Beverages: [# of Food &amp; Beverage Locations]</span>
                    </div>
                  </div>
                </div>
                <div class="absolute bottom-4 right-4 z-40 flex flex-col overflow-hidden rounded border border-[#d8e7fb] bg-white">
                  <button class="flex h-8 w-8 items-center justify-center text-[#4b4b4b]" type="button">+</button>
                  <button class="flex h-8 w-8 items-center justify-center text-[#4b4b4b]" type="button">âˆ’</button>
                </div>
              </div>
            </div>

            
          </div>
        </section>

        <section
          id="baseline-view"
          class="mx-auto hidden max-w-[1344px] flex-col gap-6"
        >
          <div class="flex flex-col gap-4 pb-6">
            <p class="text-[18px] leading-[24px] text-[#4b4b4b]">
              SCENARIO CREATION
            </p>
            <div class="flex items-start justify-between px-12">
              <div class="flex flex-1 flex-col">
                <div class="flex w-full items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#0662C4]"
                  >
                    check_circle
                  </span>
                  <div class="flex-1">
                    <div class="h-[2px] w-full bg-[#0662C4]"></div>
                  </div>
                </div>
                <p class="pt-1 text-[14px] font-bold text-[#004895]">
                  Define Scope
                </p>
              </div>
              <div class="flex flex-1 flex-col">
                <div class="flex w-full items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#0662C4]"
                  >
                    radio_button_checked
                  </span>
                  <div class="flex-1">
                    <div class="h-[2px] w-full bg-[#4b4b4b]"></div>
                  </div>
                </div>
                <p class="pt-1 text-[14px] font-bold text-[#004895]">
                  View Baseline
                </p>
              </div>
              <div class="flex flex-col">
                <div class="flex items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#4b4b4b]"
                  >
                    circle
                  </span>
                </div>
                <p class="pt-1 text-[14px] text-[#4b4b4b]">
                  Define Parameters
                </p>
              </div>
            </div>
          </div>

          <div
            class="flex flex-col gap-6 rounded-lg bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
          >
            <div class="grid gap-2">
              <div class="grid grid-cols-5 gap-2">
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Stores</div>
                    <div id="baseline-kpi-top-0" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">storefront</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Annual Cases</div>
                    <div id="baseline-kpi-top-1" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">bar_chart</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Profit to Serve %NR</div>
                    <div id="baseline-kpi-top-2" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">show_chart</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Annual NR</div>
                    <div id="baseline-kpi-top-3" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">monetization_on</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Headcount</div>
                    <div id="baseline-kpi-top-4" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">person</span>
                </div>
              </div>

              <div class="grid grid-cols-5 gap-2">
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Hours</div>
                    <div id="baseline-kpi-bottom-0" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">hourglass_empty</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Miles</div>
                    <div id="baseline-kpi-bottom-1" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">add_road</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Number of Deliveries</div>
                    <div id="baseline-kpi-bottom-2" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">local_shipping</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">S&amp;D % NR</div>
                    <div id="baseline-kpi-bottom-3" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">analytics</span>
                </div>
                <div class="flex items-start justify-between rounded border border-[#d8e7fb] bg-white p-2">
                  <div>
                    <div class="text-[12px] text-[#4b4b4b]">Net Revenue/hour</div>
                    <div id="baseline-kpi-bottom-4" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                  </div>
                  <span class="material-icons text-[20px] text-[#4b4b4b]">attach_money</span>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div class="rounded-[8px] border border-[#d8e7fb]">
                <div class="rounded-t-[8px] border-t-[8px] border-[#0662C4]">
                  <div class="flex items-center justify-between border-b border-[#d8e7fb] px-4 py-3">
                    <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                      BEVERAGES
                    </div>
                    <div class="flex items-center gap-2 text-[14px] font-bold text-[#2d2d2d]">
                      <span id="beverages-total-stores" class="text-[#0662c4]">0</span>
                      Total Stores
                      <span class="material-icons text-[22px] text-[#2d2d2d]">
                        storefront
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex flex-col gap-4 p-4">
                  <div class="flex flex-wrap gap-2">
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Annual Cases</div>
                        <div id="beverages-kpi-top-0" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">bar_chart</span>
                    </div>
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Profit to Serve %NR</div>
                        <div id="beverages-kpi-top-1" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">show_chart</span>
                    </div>
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Annual NR</div>
                        <div id="beverages-kpi-top-2" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">monetization_on</span>
                    </div>
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Headcount</div>
                        <div id="beverages-kpi-top-3" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">person</span>
                    </div>
                  </div>

                  <div class="flex flex-wrap gap-2">
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Hours</div>
                        <div id="beverages-kpi-bottom-0" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">hourglass_empty</span>
                    </div>
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Miles</div>
                        <div id="beverages-kpi-bottom-1" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">add_road</span>
                    </div>
                    <div class="flex w-[127px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90"># of Deliveries</div>
                        <div id="beverages-kpi-bottom-2" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">local_shipping</span>
                    </div>
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">S&amp;D % NR</div>
                        <div id="beverages-kpi-bottom-3" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">analytics</span>
                    </div>
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#d8e7fb] bg-[#f5f9ff] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">NR/Hour</div>
                        <div id="beverages-kpi-bottom-4" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#4b4b4b]">attach_money</span>
                    </div>
                  </div>

                  <div class="flex flex-col gap-4">
                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#d8e7fb] table-text">
                        <div class="bg-[#f5f9ff] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          Labor
                        </div>
                        <div class="border-b border-[#d8e7fb]">
                          <div class="grid grid-cols-[1.6fr_0.6fr_1fr_1fr_0.6fr] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>Role Name</div>
                            <div>HC</div>
                            <div>Wages $/Hr</div>
                            <div>Annual Salary</div>
                            <div>Hrs/Wk</div>
                          </div>
                        </div>
                        <div id="beverages-labor-body" class="divide-y divide-[#d8e7fb] text-[14px]"></div>
                      </div>
                    </div>

                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#d8e7fb] table-text">
                        <div class="bg-[#f5f9ff] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          Service
                        </div>
                        <div class="border-b border-[#d8e7fb]">
                          <div class="grid grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>Segment</div>
                            <div>Large Format</div>
                            <div>Small Format</div>
                            <div>AFH</div>
                          </div>
                        </div>
                        <div id="beverages-service-body" class="divide-y divide-[#d8e7fb] text-[14px]"></div>
                      </div>
                    </div>

                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#d8e7fb] table-text">
                        <div class="bg-[#f5f9ff] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          Assets
                        </div>
                        <div class="border-b border-[#d8e7fb]">
                          <div class="grid grid-cols-[1.2fr_0.8fr_1fr_1fr] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>Asset Type</div>
                            <div>Miles</div>
                            <div>Est. $/Mile Fuel &amp; R&amp;M</div>
                            <div>
                              <div>Est. $/Mile</div>
                              <div>Depreciation</div>
                            </div>
                          </div>
                        </div>
                        <div id="beverages-assets-body" class="divide-y divide-[#d8e7fb] text-[14px]"></div>
                      </div>
                    </div>

                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#d8e7fb] table-text">
                        <div class="bg-[#f5f9ff] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          P&amp;L
                        </div>
                        <div class="border-b border-[#d8e7fb]">
                          <div class="grid grid-cols-[1fr_100px_100px_100px] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>P&amp;L</div>
                            <div>$</div>
                            <div>% NR</div>
                            <div>$/Case</div>
                          </div>
                        </div>
                        <div id="beverages-pnl-body" class="divide-y divide-[#d8e7fb] text-[14px]"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="rounded-[8px] border border-[#f3c12e]">
                <div class="rounded-t-[8px] border-t-[8px] border-[#f3c12e]">
                  <div class="flex items-center justify-between border-b border-[#f3c12e] px-4 py-3">
                    <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                      FOODS
                    </div>
                    <div class="flex items-center gap-2 text-[14px] font-bold text-[#2d2d2d]">
                      <span id="foods-total-stores" class="text-[#f3c12e]">0</span>
                      Total Stores
                      <span class="material-icons text-[22px] text-[#2d2d2d]">
                        storefront
                      </span>
                    </div>
                  </div>
                </div>
                <div class="flex flex-col gap-4 p-4">
                  <div class="flex flex-wrap gap-2">
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Annual Cases</div>
                        <div id="foods-kpi-top-0" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">bar_chart</span>
                    </div>
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Profit to Serve %NR</div>
                        <div id="foods-kpi-top-1" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">show_chart</span>
                    </div>
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Annual NR</div>
                        <div id="foods-kpi-top-2" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">monetization_on</span>
                    </div>
                    <div class="flex w-[145px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Headcount</div>
                        <div id="foods-kpi-top-3" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">person</span>
                    </div>
                  </div>

                  <div class="flex flex-wrap gap-2">
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Hours</div>
                        <div id="foods-kpi-bottom-0" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">hourglass_empty</span>
                    </div>
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">Miles</div>
                        <div id="foods-kpi-bottom-1" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">add_road</span>
                    </div>
                    <div class="flex w-[126px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90"># of Deliveries</div>
                        <div id="foods-kpi-bottom-2" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">local_shipping</span>
                    </div>
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">S&amp;D % NR</div>
                        <div id="foods-kpi-bottom-3" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">analytics</span>
                    </div>
                    <div class="flex w-[111.5px] items-start justify-between gap-2 overflow-hidden rounded-[8px] border border-[#f9d849] bg-[#fff9d6] p-2">
                      <div>
                        <div class="text-[12px] text-[#4b4b4b] opacity-90">NR/Hour</div>
                        <div id="foods-kpi-bottom-4" class="text-[16px] font-bold text-[#2d2d2d]">0</div>
                      </div>
                      <span class="material-icons text-[24px] text-[#2d2d2d]">attach_money</span>
                    </div>
                  </div>

                  <div class="flex flex-col gap-4">
                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#f9d849] table-text">
                        <div class="bg-[#fff9d6] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          Labor
                        </div>
                        <div class="border-b border-[#f9d849]">
                          <div class="grid grid-cols-[1.6fr_0.6fr_1fr_1fr_0.6fr] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>Role Name</div>
                            <div>HC</div>
                            <div>Wages $/Hr</div>
                            <div>Annual Salary</div>
                            <div>Hrs/Wk</div>
                          </div>
                        </div>
                        <div
                          id="foods-labor-body"
                          class="divide-y divide-[#f9d849] text-[14px] min-h-[192px]"
                        ></div>
                      </div>
                    </div>

                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#f9d849] table-text">
                        <div class="bg-[#fff9d6] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          Service
                        </div>
                        <div class="border-b border-[#f9d849]">
                          <div class="grid grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>Segment</div>
                            <div>Large Format</div>
                            <div>Small Format</div>
                            <div>AFH</div>
                          </div>
                        </div>
                        <div id="foods-service-body" class="divide-y divide-[#f9d849] text-[14px]"></div>
                      </div>
                    </div>

                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#f9d849] table-text">
                        <div class="bg-[#fff9d6] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          Assets
                        </div>
                        <div class="border-b border-[#f9d849]">
                          <div class="grid grid-cols-[1.2fr_0.8fr_1fr_1fr] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>Asset Type</div>
                            <div>Miles</div>
                            <div>Est. $/Mile Fuel &amp; R&amp;M</div>
                            <div>
                              <div>Est. $/Mile</div>
                              <div>Depreciation</div>
                            </div>
                          </div>
                        </div>
                        <div id="foods-assets-body" class="divide-y divide-[#f9d849] text-[14px]"></div>
                      </div>
                    </div>

                    <div>
                      <div class="mt-2 overflow-hidden rounded border border-[#f9d849] table-text">
                        <div class="bg-[#fff9d6] px-4 py-3 text-[12px] font-bold uppercase text-[#2d2d2d]">
                          P&amp;L
                        </div>
                        <div class="border-b border-[#f9d849]">
                          <div class="grid min-h-[40px] grid-cols-[1fr_100px_100px_100px] items-center px-4 py-2 text-[12px] font-bold uppercase text-[#4b4b4b]">
                            <div>P&amp;L</div>
                            <div>$</div>
                            <div>% NR</div>
                            <div>$/Case</div>
                          </div>
                        </div>
                        <div id="foods-pnl-body" class="divide-y divide-[#f9d849] text-[14px]"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </section>

        <section
          id="define-parameters-view"
          class="mx-auto hidden max-w-[1344px] flex-col gap-6"
        >
          <div class="flex flex-col gap-4 pb-6">
            <p class="text-[18px] leading-[24px] text-[#4b4b4b]">
              SCENARIO CREATION
            </p>
            <div class="flex items-start justify-between px-12">
              <div class="flex flex-1 flex-col">
                <div class="flex w-full items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#0662C4]"
                  >
                    check_circle
                  </span>
                  <div class="flex-1">
                    <div class="h-[2px] w-full bg-[#0662C4]"></div>
                  </div>
                </div>
                <p class="pt-1 text-[14px] font-bold text-[#004895]">
                  Define Scope
                </p>
              </div>
              <div class="flex flex-1 flex-col">
                <div class="flex w-full items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#0662C4]"
                  >
                    check_circle
                  </span>
                  <div class="flex-1">
                    <div class="h-[2px] w-full bg-[#0662C4]"></div>
                  </div>
                </div>
                <p class="pt-1 text-[14px] font-bold text-[#004895]">
                  View Baseline
                </p>
              </div>
              <div class="flex flex-col">
                <div class="flex items-center py-1">
                  <span
                    class="material-icons inline-flex h-4 w-4 items-center justify-center text-[16px] leading-none text-[#0662C4]"
                  >
                    radio_button_checked
                  </span>
                </div>
                <p class="pt-1 text-[14px] font-bold text-[#004895]">
                  Define Parameters
                </p>
              </div>
            </div>
          </div>

          <div
            class="rounded-lg bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)] w-full"
          >
            <div class="flex gap-6">
              <div class="w-[220px] shrink-0 border-l border-[#d8e7fb] h-fit">
                <div class="flex flex-col text-[14px] text-[#4b4b4b]">
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l border-[#d8e7fb] px-2 py-1 transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="Facilities"
                    type="button"
                  >
                    <span>Facilities</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l border-[#d8e7fb] px-2 py-1 transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="Labor"
                    type="button"
                  >
                    <span>Labor</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l border-[#d8e7fb] px-2 py-1 transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="Service"
                    type="button"
                  >
                    <span>Service</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l border-[#d8e7fb] px-2 py-1 transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="Assets"
                    type="button"
                  >
                    <span>Assets</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l border-[#d8e7fb] px-2 py-1 transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="GTM Types"
                    type="button"
                  >
                    <span>GTM Types</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l-2 border-[#004895] px-2 py-1 font-bold transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="Time Estimates"
                    type="button"
                  >
                    <span>Time Estimates</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                  <button
                    class="define-parameters-tab flex min-h-[32px] items-center justify-between border-l border-[#d8e7fb] px-2 py-1 transition-colors hover:border-l-2 hover:border-[#B0D0FB]"
                    data-define-tab="Exceptions"
                    type="button"
                  >
                    <span>Exceptions</span>
                    <span class="rounded-[4px] bg-[#0662c4] px-2 py-[2px] text-[12px] text-white">
                      0 changes
                    </span>
                  </button>
                </div>
              </div>

              <div class="flex-1 min-w-0">
                <div class="hidden w-full min-w-0" data-define-panel="Facilities">
                  <div
                    class="w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Existing Facilities
                      </div>
                      <div class="flex items-center gap-2">
                        <button
                          class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-3 text-[12px] font-bold text-white transition-colors hover:bg-[#002B5E]"
                          type="button"
                        >
                          <span class="material-icons text-[16px] text-current">
                            add
                          </span>
                          Add Existing Facility
                        </button>
                        <button
                          id="existing-facilities-reset"
                          class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-3 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                          type="button"
                        >
                          <span class="material-icons text-[16px] text-current">
                            refresh
                          </span>
                          Reset to default
                        </button>
                      </div>
                    </div>
                    <div class="mt-4 text-[12px] text-[#2d2d2d] table-text overflow-x-auto">
                      <div
                        class="table-header grid min-h-[40px] grid-cols-[1.2fr_80px_120px_220px_1.2fr] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                      >
                        <div class="flex items-center gap-1">
                          Facility
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div>Inc.</div>
                        <div class="flex items-center gap-1">
                          Location ID
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Maximum Weekly Cases
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Address
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                      </div>
                      <div class="divide-y divide-[#d8e7fb]">
                        <div class="grid min-h-[48px] grid-cols-[1.2fr_80px_120px_220px_1.2fr] items-center gap-4 px-2 py-2">
                          <div>FLUS Forth Worth DC</div>
                          <div class="flex items-center">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                          <div>1234</div>
                          <div>
                            <input
                              type="number"
                              class="facility-input"
                              value="46"
                              data-default="46"
                              disabled
                            />
                            <div class="mt-1 flex items-center gap-1 text-[12px] text-[#b1b1b1]">
                              <span class="material-icons text-[16px] text-[#b1b1b1]">
                                info
                              </span>
                              Default: 46
                            </div>
                          </div>
                          <div>4701 PYLON ST FORT WORTH TX 76106</div>
                        </div>
                        <div class="grid min-h-[48px] grid-cols-[1.2fr_80px_120px_220px_1.2fr] items-center gap-4 px-2 py-2">
                          <div>PBC US Forth Worth DC</div>
                          <div class="flex items-center">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                          <div>5678</div>
                          <div>
                            <input
                              type="number"
                              class="facility-input"
                              value="46"
                              data-default="46"
                              disabled
                            />
                            <div class="mt-1 flex items-center gap-1 text-[12px] text-[#b1b1b1]">
                              <span class="material-icons text-[16px] text-[#b1b1b1]">
                                info
                              </span>
                              Default: 46
                            </div>
                          </div>
                          <div>5201 BLUE MOUND RD FORT WORTH TX 76106</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="mt-4 rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        New Facilities
                      </div>
                        <button
                          id="create-facility-button"
                          class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-3 text-[12px] font-bold text-white transition-colors hover:bg-[#002B5E]"
                          type="button"
                        >
                        <span class="material-icons text-[16px] text-current">
                          add
                        </span>
                        Create New Facility
                      </button>
                    </div>
                    <div class="mt-4 text-[12px] table-text overflow-x-auto">
                      <div
                        class="table-header grid min-h-[40px] grid-cols-[1.2fr_80px_1fr_1.2fr] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                      >
                        <div class="flex items-center gap-1">
                          Facility
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div>Inc.</div>
                        <div class="flex items-center gap-1">
                          Maximum Weekly Cases
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Address
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                      </div>
                      <div class="border-b-2 border-[#d8e7fb] px-2 py-6 text-center text-[14px] text-[#2d2d2d]">
                        Create new facility to see information here
                      </div>
                    </div>
                  </div>
                </div>

                <div class="hidden w-full min-w-0" data-define-panel="Labor">
                  <div
                    class="rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Frontline
                      </div>
                      <button
                        class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                        type="button"
                        data-reset-default="frontline"
                      >
                        <span class="material-icons text-[16px] text-current">
                          refresh
                        </span>
                        Reset to default
                      </button>
                    </div>
                    <div
                      class="relative z-20 mt-4 w-full flex-1 text-[12px] text-[#2d2d2d] table-text labor-table overflow-x-auto overflow-y-visible"
                      data-define-table="frontline"
                    >
                      <div class="min-w-full w-max">
                        <div
                          class="table-header grid min-h-[40px] grid-cols-[1.1fr_64px_140px_140px_140px_140px_120px_160px] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                        >
                          <div class="flex items-center gap-1">
                            Role Name
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div>Inc</div>
                          <div>Max Hours/Day</div>
                          <div>Max Hours/Week</div>
                          <div>Hourly Wage</div>
                          <div class="flex items-center gap-1">
                            Annual Earning
                            <span
                              class="relative flex items-center"
                              data-tooltip="Expected pay for frontline employees if they maintain their weekly hours throughout the year, inclusive of base pay and overtime pay"
                            >
                              <span class="material-icons text-[16px] text-[#4b4b4b]">
                                info
                              </span>
                            </span>
                          </div>
                          <div>Relief Rate</div>
                          <div>Relief Wage Index</div>
                        </div>
                        <div class="divide-y divide-[#d8e7fb]">
                          <div class="grid min-h-[48px] grid-cols-[1.1fr_64px_140px_140px_140px_140px_120px_160px] items-center gap-4 px-2 py-2">
                            <div>CDL(A) DMS</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="10" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="46" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div class="text-[14px] font-bold">$92,940</div>
                            <div>
                              <input class="facility-input" value="15%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 15%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="100%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 100%
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[1.1fr_64px_140px_140px_140px_140px_120px_160px] items-center gap-4 px-2 py-2">
                            <div>CDL(B) DMS</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="10" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="46" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div class="text-[14px] font-bold">$83,646</div>
                            <div>
                              <input class="facility-input" value="15%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 15%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="100%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 100%
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[1.1fr_64px_140px_140px_140px_140px_120px_160px] items-center gap-4 px-2 py-2">
                            <div>Non-CDL DMS</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="9" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 9
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div class="text-[14px] font-bold">$69,956</div>
                            <div>
                              <input class="facility-input" value="15%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 15%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="100%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 100%
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[1.1fr_64px_140px_140px_140px_140px_120px_160px] items-center gap-4 px-2 py-2">
                            <div>Merchandiser</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="9" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 9
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div class="text-[14px] font-bold">$51,609</div>
                            <div>
                              <input class="facility-input" value="15%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 15%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="100%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 100%
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[1.1fr_64px_140px_140px_140px_140px_120px_160px] items-center gap-4 px-2 py-2">
                            <div>Sales Rep</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="9" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 9
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" placeholder="Placeholder" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 46
                              </div>
                            </div>
                            <div class="text-[14px] font-bold">$51,609</div>
                            <div>
                              <input class="facility-input" value="15%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 15%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="100%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 100%
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="mt-4 w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Management
                      </div>
                      <button
                        class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                        type="button"
                        data-reset-default="management"
                      >
                        <span class="material-icons text-[16px] text-current">
                          refresh
                        </span>
                        Reset to default
                      </button>
                    </div>
                    <div
                      class="relative z-20 mt-4 w-full flex-1 text-[12px] text-[#2d2d2d] table-text labor-table overflow-x-auto overflow-y-visible"
                      data-define-table="management"
                    >
                      <div class="min-w-full w-max">
                        <div
                          class="table-header grid min-h-[40px] grid-cols-[1.4fr_1fr_1fr] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                        >
                          <div class="flex items-center gap-1">
                            Role Name
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div class="flex items-center gap-1">
                            Annual Salary
                            <span
                              class="relative flex items-center"
                              data-tooltip="Indirect employee's annual base salary and bonus paid at target"
                            >
                              <span class="material-icons text-[16px] text-[#4b4b4b]">
                                info
                              </span>
                            </span>
                          </div>
                          <div>Span of Control</div>
                        </div>
                        <div class="divide-y divide-[#d8e7fb]">
                          <div class="grid min-h-[48px] grid-cols-[1.4fr_1fr_1fr] items-center gap-4 px-2 py-2">
                            <div>Delivery Manager</div>
                            <div>
                              <input class="facility-input" value="$97,750" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: $97,750
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="13" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 13
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[1.4fr_1fr_1fr] items-center gap-4 px-2 py-2">
                            <div>Sales Manager</div>
                            <div>
                              <input class="facility-input" value="$97,750" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: $97,750
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="13" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 13
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[1.4fr_1fr_1fr] items-center gap-4 px-2 py-2">
                            <div>Merch Manager</div>
                            <div>
                              <input class="facility-input" value="$97,750" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: $97,750
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="13" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 13
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="hidden w-full min-w-0" data-define-panel="Service">
                  <div class="mb-6 flex flex-col gap-6">
                    <div class="w-full rounded-[8px] bg-white px-4 py-0">
                      <div class="flex items-center gap-2">
                        <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                          Delivery Frequency
                        </div>
                        <span class="material-icons text-[16px] text-[#4b4b4b]">
                          info
                        </span>
                      </div>
                      <div class="mt-2 flex flex-wrap gap-6 text-[14px] text-[#4b4b4b]">
                        <label class="flex items-center gap-2">
                          <input
                            class="radio-input"
                            id="service-delivery-actuals"
                            type="radio"
                            name="service-delivery-frequency"
                            checked
                          />
                          Actuals
                        </label>
                        <label class="flex items-center gap-2">
                          <input
                            class="radio-input"
                            id="service-delivery-standards"
                            type="radio"
                            name="service-delivery-frequency"
                          />
                          Standards
                        </label>
                      </div>
                    </div>

                    <div class="w-full rounded-[8px] bg-white p-4">
                      <div class="flex items-center gap-2">
                        <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                          Sunday Delivery Eligibility
                        </div>
                        <span class="material-icons text-[16px] text-[#4b4b4b]">
                          info
                        </span>
                      </div>
                      <div class="mt-2 flex flex-wrap gap-6 text-[14px] text-[#4b4b4b]">
                        <label class="flex items-center gap-2">
                          <input
                            class="radio-input"
                            type="radio"
                            name="service-sunday-eligibility"
                            checked
                          />
                          Stores Currently Receiving Sunday Deliveries
                        </label>
                        <label class="flex items-center gap-2">
                          <input
                            class="radio-input"
                            type="radio"
                            name="service-sunday-eligibility"
                          />
                          Chains Currently Receiving Sunday Deliveries
                        </label>
                        <label class="flex items-center gap-2">
                          <input
                            class="radio-input"
                            type="radio"
                            name="service-sunday-eligibility"
                          />
                          All Stores
                        </label>
                      </div>
                    </div>
                  </div>
                  <div
                    class="w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Service Frequency Standards (Weekly)
                      </div>
                      <button
                        class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                        type="button"
                        data-reset-default="service-standards"
                      >
                        <span class="material-icons text-[16px] text-current">
                          refresh
                        </span>
                        Reset to default
                      </button>
                    </div>
                    <div class="mt-3 flex flex-wrap items-center justify-between gap-3">
                      <div class="flex flex-wrap items-center gap-2">
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[14px] text-[#004895]"
                          type="button"
                        >
                          Business Unit
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[14px] text-[#004895]"
                          type="button"
                        >
                          Trade Segment
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[14px] text-[#004895]"
                          type="button"
                        >
                          Weekly Case Range
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <div class="h-6 w-px bg-[#d8e7fb]"></div>
                        <button
                          class="flex h-8 items-center text-[14px] font-bold text-[#004895]"
                          type="button"
                        >
                          Reset all filters
                        </button>
                      </div>
                    </div>
                    <div
                      class="mt-4 w-full text-[12px] text-[#2d2d2d] table-text overflow-x-auto"
                      data-define-table="service-standards"
                    >
                      <div class="min-w-full w-max">
                        <div
                          class="table-header grid min-h-[40px] grid-cols-[120px_160px_160px_140px_140px_120px_120px] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                        >
                          <div>Business Unit</div>
                          <div class="flex items-center gap-1">
                            Trade Segment
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div class="flex items-center gap-1">
                            Weekly Case Range
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div>Delivery Freq.</div>
                          <div>Merch Primary</div>
                          <div>Sell Freq.</div>
                          <div>Order Freq.</div>
                        </div>
                        <div class="divide-y divide-[#d8e7fb]">
                          <div class="grid min-h-[48px] grid-cols-[120px_160px_160px_140px_140px_120px_120px] items-center gap-4 px-2 py-2">
                            <div>1NA</div>
                            <div>Large Format</div>
                            <div>0-145</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 7
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[120px_160px_160px_140px_140px_120px_120px] items-center gap-4 px-2 py-2">
                            <div>1NA</div>
                            <div>Large Format</div>
                            <div>145-290</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 7
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="2" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 2
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[120px_160px_160px_140px_140px_120px_120px] items-center gap-4 px-2 py-2">
                            <div>1NA</div>
                            <div>Large Format</div>
                            <div>290-430</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 7
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[120px_160px_160px_140px_140px_120px_120px] items-center gap-4 px-2 py-2">
                            <div>1NA</div>
                            <div>Large Format</div>
                            <div>430-575</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 7
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[120px_160px_160px_140px_140px_120px_120px] items-center gap-4 px-2 py-2">
                            <div>1NA</div>
                            <div>Large Format</div>
                            <div>575-999K</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 7
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="1" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 1
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="mt-4 w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex flex-col gap-1">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Second Hit Merchandising (Beverages Only)
                      </div>
                      <div class="text-[14px] text-[#c12c01]">
                        This section is rarely modified
                      </div>
                    </div>
                    <div class="mt-3 flex flex-wrap items-center justify-between gap-3">
                      <div class="flex flex-wrap items-center gap-2">
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[14px] text-[#004895]"
                          type="button"
                        >
                          Trade Segment
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[14px] text-[#004895]"
                          type="button"
                        >
                          Channel
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <div class="h-6 w-px bg-[#d8e7fb]"></div>
                        <button
                          class="flex h-8 items-center text-[14px] font-bold text-[#004895]"
                          type="button"
                        >
                          Reset all filters
                        </button>
                      </div>
                      <button
                        class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                        type="button"
                        data-reset-default="service-second-hit"
                      >
                        <span class="material-icons text-[16px] text-current">
                          refresh
                        </span>
                        Reset to default
                      </button>
                    </div>
                    <div
                      class="mt-4 w-full text-[12px] text-[#2d2d2d] table-text overflow-x-auto"
                      data-define-table="service-second-hit"
                    >
                      <div class="min-w-full w-max">
                        <div
                          class="table-header grid min-h-[40px] grid-cols-[200px_200px_180px_220px] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                        >
                          <div class="flex items-center gap-1">
                            Trade Segment
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div class="flex items-center gap-1">
                            Channel
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div class="flex items-center gap-1">
                            Weekly Case Range
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div>Second Hit Weekly Freq.</div>
                        </div>
                        <div class="divide-y divide-[#d8e7fb]">
                          <div class="grid min-h-[48px] grid-cols-[200px_200px_180px_220px] items-center gap-4 px-2 py-2">
                            <div>Large Format</div>
                            <div>Grocery</div>
                            <div>0-900</div>
                            <div>
                              <input class="facility-input" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[200px_200px_180px_220px] items-center gap-4 px-2 py-2">
                            <div>Large Format</div>
                            <div>Grocery</div>
                            <div>900-1250</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[200px_200px_180px_220px] items-center gap-4 px-2 py-2">
                            <div>Large Format</div>
                            <div>Grocery</div>
                            <div>1250-999K</div>
                            <div>
                              <input class="facility-input" value="7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 7
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[200px_200px_180px_220px] items-center gap-4 px-2 py-2">
                            <div>Large Format</div>
                            <div>Hyper Super Center</div>
                            <div>0-810</div>
                            <div>
                              <input class="facility-input" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[48px] grid-cols-[200px_200px_180px_220px] items-center gap-4 px-2 py-2">
                            <div>Large Format</div>
                            <div>Hyper Super Center</div>
                            <div>810-1010</div>
                            <div>
                              <input class="facility-input" value="3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 3
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="mt-4 flex items-center justify-between text-[14px] text-[#2d2d2d]">
                      <div class="flex items-center gap-2">
                        <span>Rows per page</span>
                        <button
                          class="flex h-8 items-center gap-1 rounded border border-[#c0c0c0] bg-white px-2"
                          type="button"
                        >
                          5
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            keyboard_arrow_down
                          </span>
                        </button>
                      </div>
                      <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2 text-[#004895]">
                          <span class="material-icons text-[18px]">first_page</span>
                          <span class="material-icons text-[18px]">chevron_left</span>
                        </div>
                        <div class="flex items-center gap-2">
                          <span>Page</span>
                          <div class="flex h-8 w-10 items-center justify-center rounded border border-[#c0c0c0] bg-white">
                            1
                          </div>
                          <span>of</span>
                          <span class="font-bold">3</span>
                        </div>
                        <div class="flex items-center gap-2 text-[#004895]">
                          <span class="material-icons text-[18px]">chevron_right</span>
                          <span class="material-icons text-[18px]">last_page</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="hidden w-full min-w-0" data-define-panel="Assets">
                  <div
                    class="w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Assets
                      </div>
                      <button
                        class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                        type="button"
                        data-reset-default="assets"
                      >
                        <span class="material-icons text-[16px] text-current">
                          refresh
                        </span>
                        Reset to default
                      </button>
                    </div>
                    <div
                      class="mt-4 w-full text-[12px] text-[#2d2d2d] table-text overflow-x-auto"
                      data-define-table="assets"
                    >
                      <div class="min-w-full w-max">
                        <div
                          class="table-header grid min-h-[40px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                        >
                          <div class="flex items-center gap-1">
                            Truck Type
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div>Inc.</div>
                          <div class="flex items-center gap-1">
                            Spare Rate
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div class="flex items-center gap-1">
                            Maximum Utilization
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                        </div>
                        <div class="divide-y divide-[#d8e7fb]">
                          <div class="asset-row grid min-h-[48px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 px-2 py-2">
                            <div>Class 6 Non CDL Bulk Truck</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox asset-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="10%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="85%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 85%
                              </div>
                            </div>
                          </div>
                          <div class="asset-row grid min-h-[48px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 px-2 py-2">
                            <div>Class 7 CDL Bulk Truck</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox asset-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="10%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="85%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 85%
                              </div>
                            </div>
                          </div>
                          <div class="asset-row grid min-h-[48px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 px-2 py-2">
                            <div>GeoBox Tractor with Liftgate</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox asset-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="10%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="85%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 85%
                              </div>
                            </div>
                          </div>
                          <div class="asset-row grid min-h-[48px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 px-2 py-2">
                            <div>GeoBox Tractor without Liftgate</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox asset-checkbox" checked />
                            </div>
                            <div>
                              <input class="facility-input" value="10%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="85%" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 85%
                              </div>
                            </div>
                          </div>
                          <div class="asset-row grid min-h-[48px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 px-2 py-2">
                            <div>Route Truck</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox asset-checkbox" />
                            </div>
                            <div>
                              <input class="facility-input" value="10%" disabled />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="85%" disabled />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 85%
                              </div>
                            </div>
                          </div>
                          <div class="asset-row grid min-h-[48px] grid-cols-[1.6fr_80px_200px_240px] items-center gap-4 px-2 py-2">
                            <div>Market Place Truck</div>
                            <div class="flex items-center">
                              <input type="checkbox" class="table-checkbox asset-checkbox" />
                            </div>
                            <div>
                              <input class="facility-input" value="10%" disabled />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 10%
                              </div>
                            </div>
                            <div>
                              <input class="facility-input" value="85%" disabled />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 85%
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="hidden w-full min-w-0" data-define-panel="Time Estimates">
                  <div
                    class="w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Time Estimates (On Property)
                      </div>
                      <button
                        class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                        type="button"
                      >
                        <span class="material-icons text-[16px] text-current">
                          refresh
                        </span>
                        Reset to default
                      </button>
                    </div>
                    <div class="mt-4 w-full text-[12px] text-[#2d2d2d] table-text">
                      <div
                        class="table-header grid min-h-[40px] grid-cols-[200px_200px_1fr] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                      >
                        <div class="flex items-center gap-1">
                          Role Type
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          GTM Activity
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div>Daily Fixed Minutes (On Property, Meetings, Breaks)</div>
                      </div>
                      <div id="existing-facilities-body" class="divide-y divide-[#d8e7fb]">
                        <div class="grid min-h-[64px] grid-cols-[200px_200px_1fr] items-center gap-4 px-2 py-2">
                          <div>Delivery</div>
                          <div>On property</div>
                          <div>
                            <input class="facility-input text-[#b1b1b1]" value="60 minutes" />
                            <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                              <span class="material-icons text-[16px] text-[#4b4b4b]">
                                info
                              </span>
                              Default: 60 minutes
                            </div>
                          </div>
                        </div>
                        <div class="grid min-h-[64px] grid-cols-[200px_200px_1fr] items-center gap-4 px-2 py-2">
                          <div>Sales</div>
                          <div>On property</div>
                          <div>
                            <input class="facility-input text-[#b1b1b1]" value="60 minutes" />
                            <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                              <span class="material-icons text-[16px] text-[#4b4b4b]">
                                info
                              </span>
                              Default: 60 minutes
                            </div>
                          </div>
                        </div>
                        <div class="grid min-h-[64px] grid-cols-[200px_200px_1fr] items-center gap-4 px-2 py-2">
                          <div>Merch</div>
                          <div>On property</div>
                          <div>
                            <input class="facility-input text-[#b1b1b1]" value="60 minutes" />
                            <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                              <span class="material-icons text-[16px] text-[#4b4b4b]">
                                info
                              </span>
                              Default: 60 minutes
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="mt-6 w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                        Time Estimates (Deliver, Merch, Order, and Sell)
                      </div>
                    </div>
                    <div class="mt-4 flex flex-wrap items-center justify-between gap-4">
                      <div class="flex flex-wrap items-center gap-2 text-[14px]">
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[#004895]"
                          type="button"
                        >
                          Role Type
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[#004895]"
                          type="button"
                        >
                          GTM Activity
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[#004895]"
                          type="button"
                        >
                          Trade Segment
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <div class="h-6 w-px bg-[#d8e7fb]"></div>
                        <button class="text-[#004895] font-bold" type="button">
                          Reset all filters
                        </button>
                      </div>
                      <div class="flex items-center gap-3">
                        <label class="flex items-center gap-2 text-[12px] text-[#4b4b4b]">
                          <input type="checkbox" class="table-checkbox" />
                          Show Legacy Standards
                        </label>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                          type="button"
                        >
                          <span class="material-icons text-[16px] text-current">
                            add
                          </span>
                          Reset to default
                        </button>
                      </div>
                    </div>

                    <div class="mt-4 w-full text-[12px] text-[#2d2d2d] table-text overflow-x-auto">
                      <div class="min-w-full w-max">
                        <div
                          class="table-header grid min-h-[40px] grid-cols-[120px_140px_150px_160px_180px_180px_180px] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                        >
                          <div class="flex items-center gap-1">
                            Role Type
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div class="flex items-center gap-1">
                            GTM Activity
                            <span class="material-icons text-[16px] text-[#4b4b4b]">
                              unfold_more
                            </span>
                          </div>
                          <div>Trade Segment</div>
                          <div>Channel</div>
                          <div class="leading-[14px] text-[#626262]">
                            <div>1NA Fixed Minutes</div>
                            <div>Per Visit</div>
                          </div>
                          <div class="leading-[14px] text-[#626262]">
                            <div>Foods Variable</div>
                            <div>Minutes Per Case</div>
                          </div>
                          <div class="leading-[14px] text-[#626262]">
                            <div>Beverages Variable</div>
                            <div>Minutes Per Case</div>
                          </div>
                        </div>
                        <div class="divide-y divide-[#d8e7fb]">
                          <div class="grid min-h-[64px] grid-cols-[120px_140px_150px_160px_180px_180px_180px] items-center gap-4 px-2 py-2">
                            <div>Delivery</div>
                            <div>Deliver</div>
                            <div>Large Format</div>
                            <div>HYPER SUPER CENTER</div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="73" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 73
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[64px] grid-cols-[120px_140px_150px_160px_180px_180px_180px] items-center gap-4 px-2 py-2">
                            <div>Delivery</div>
                            <div>Deliver</div>
                            <div>Large Format</div>
                            <div>GROCERY</div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="57.2" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 57.2
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[64px] grid-cols-[120px_140px_150px_160px_180px_180px_180px] items-center gap-4 px-2 py-2">
                            <div>Delivery</div>
                            <div>Deliver</div>
                            <div>Large Format</div>
                            <div>MILITARY&amp;G OVT</div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="62.7" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 62.7
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[64px] grid-cols-[120px_140px_150px_160px_180px_180px_180px] items-center gap-4 px-2 py-2">
                            <div>Delivery</div>
                            <div>Deliver</div>
                            <div>Large Format</div>
                            <div>WHOLESALE CLUB</div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="94.4" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 94.4
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                          <div class="grid min-h-[64px] grid-cols-[120px_140px_150px_160px_180px_180px_180px] items-center gap-4 px-2 py-2">
                            <div>Delivery</div>
                            <div>Deliver</div>
                            <div>Large Format</div>
                            <div>IBS</div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="25.3" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 25.3
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                            <div>
                              <input class="facility-input text-[#b1b1b1]" value="0" />
                              <div class="mt-1 flex items-center gap-1 text-[12px] text-[#4b4b4b]">
                                <span class="material-icons text-[16px] text-[#4b4b4b]">
                                  info
                                </span>
                                Default: 0
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="mt-4 flex items-center justify-between text-[14px] text-[#2d2d2d]">
                      <div class="flex items-center gap-2">
                        <span>Rows per page</span>
                        <button
                          class="flex h-8 items-center gap-1 rounded border border-[#c0c0c0] bg-white px-2"
                          type="button"
                        >
                          5
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            keyboard_arrow_down
                          </span>
                        </button>
                      </div>
                      <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2 text-[#004895]">
                          <span class="material-icons text-[18px]">first_page</span>
                          <span class="material-icons text-[18px]">chevron_left</span>
                        </div>
                        <div class="flex items-center gap-2">
                          <span>Page</span>
                          <div class="flex h-8 w-10 items-center justify-center rounded border border-[#c0c0c0] bg-white">
                            1
                          </div>
                          <span>of</span>
                          <span class="font-bold">3</span>
                        </div>
                        <div class="flex items-center gap-2 text-[#004895]">
                          <span class="material-icons text-[18px]">chevron_right</span>
                          <span class="material-icons text-[18px]">last_page</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="hidden w-full min-w-0" data-define-panel="Exceptions">
                  <div
                    class="w-full rounded-[8px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]"
                  >
                    <div class="flex items-center justify-between">
                      <div>
                        <div class="text-[22px] font-bold leading-[28px] text-[#2d2d2d]">
                          Chain Exceptions
                        </div>
                        <p class="mt-1 text-[14px] text-[#4b4b4b]">
                          Unselecting a checkbox will exclude the GTM activity from the scenario
                        </p>
                      </div>
                    </div>

                    <div class="mt-4 flex flex-wrap items-center justify-between gap-4">
                      <div class="flex flex-wrap items-center gap-2 text-[14px]">
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[#004895]"
                          type="button"
                        >
                          Business Unit
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#d8e7fb] bg-white px-4 text-[#004895]"
                          type="button"
                        >
                          Chain Name
                          <span class="material-icons text-[16px] text-current">
                            arrow_drop_down
                          </span>
                        </button>
                        <div class="h-6 w-px bg-[#d8e7fb]"></div>
                        <button
                          class="text-[#004895] font-bold"
                          type="button"
                        >
                          Reset all filters
                        </button>
                      </div>
                      <div class="flex items-center gap-2">
                        <button
                          id="add-chain-button"
                          class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
                          type="button"
                        >
                          <span class="material-icons text-[18px] text-current">
                            add
                          </span>
                          Add Chain
                        </button>
                        <button
                          class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
                          type="button"
                        >
                          <span class="material-icons text-[18px] text-current">
                            refresh
                          </span>
                          Reset to default
                        </button>
                      </div>
                    </div>

                    <div class="mt-4 w-full text-[12px] text-[#2d2d2d] table-text">
                      <div
                        class="table-header grid min-h-[40px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 border-b-2 border-t-2 border-[#d8e7fb] px-2 py-2 font-bold uppercase text-[#4b4b4b]"
                      >
                        <div class="flex items-center gap-1">
                          Business Unit
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Chain Name
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Deliver
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Merch
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Order
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                        <div class="flex items-center gap-1">
                          Sell
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            unfold_more
                          </span>
                        </div>
                      </div>
                      <div id="exceptions-table-body" class="divide-y divide-[#d8e7fb]">
                        <div class="grid min-h-[48px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 px-2 py-2">
                          <div>PFUS</div>
                          <div>7-Eleven</div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                        </div>
                        <div class="grid min-h-[48px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 px-2 py-2">
                          <div>PBUS</div>
                          <div>7-Eleven</div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                        </div>
                        <div class="grid min-h-[48px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 px-2 py-2">
                          <div>PFUS</div>
                          <div>Quiktrip</div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                        </div>
                        <div class="grid min-h-[48px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 px-2 py-2">
                          <div>PBUS</div>
                          <div>Quiktrip</div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                        </div>
                        <div class="grid min-h-[48px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 px-2 py-2">
                          <div>PFUS</div>
                          <div>HEB</div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" checked />
                          </div>
                          <div class="flex items-center justify-start">
                            <input type="checkbox" class="table-checkbox" />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="mt-4 flex items-center justify-between text-[14px] text-[#2d2d2d]">
                      <div class="flex items-center gap-2">
                        <span>Rows per page</span>
                        <button
                          class="flex h-8 items-center gap-1 rounded border border-[#c0c0c0] bg-white px-2"
                          type="button"
                        >
                          5
                          <span class="material-icons text-[16px] text-[#4b4b4b]">
                            keyboard_arrow_down
                          </span>
                        </button>
                      </div>
                      <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2 text-[#004895]">
                          <span class="material-icons text-[18px]">first_page</span>
                          <span class="material-icons text-[18px]">chevron_left</span>
                        </div>
                        <div class="flex items-center gap-2">
                          <span>Page</span>
                          <div class="flex h-8 w-10 items-center justify-center rounded border border-[#c0c0c0] bg-white">
                            1
                          </div>
                          <span>of</span>
                          <span class="font-bold">3</span>
                        </div>
                        <div class="flex items-center gap-2 text-[#004895]">
                          <span class="material-icons text-[18px]">chevron_right</span>
                          <span class="material-icons text-[18px]">last_page</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section
          id="output-view"
          class="mx-auto hidden max-w-[1344px] flex-col gap-6"
        >
          <div class="flex flex-col gap-3 px-12 pb-6">
            <div class="text-[12px] text-[#4b4b4b]">
              <span
                id="output-breadcrumb-workspace"
                class="cursor-pointer text-[#0662C4] hover:underline"
                >Workspace</span
              >
              <span class="mx-1.5">â€º</span>
              <span class="font-bold text-[#0662C4]">Scenario Analysis</span>
            </div>
            <div class="flex items-start justify-between gap-4 pb-6">
              <div>
                <div class="flex items-center gap-2 pt-2">
                  <span class="material-icons text-[20px] text-[#4b4b4b]">
                    auto_awesome
                  </span>
                  <span
                    id="output-scenario-id"
                    class="text-[24px] font-bold text-[#2d2d2d]"
                  >
                    SC-4859
                  </span>
                </div>
                <div
                  id="output-scenario-desc"
                  class="text-[14px] text-[#4b4b4b]"
                >
                  North Fort Worth, 1NA, Class B DMS
                </div>
              </div>
              <div class="flex flex-wrap items-center gap-6 text-[12px]">
                <div class="text-right">
                  <div class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Timeline</div>
                  <div id="output-timeline" class="text-[13px] text-[#2d2d2d]">
                    P01 2025 - P13 2025
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Total Stores</div>
                  <div id="output-stores" class="text-[13px] text-[#2d2d2d]">228</div>
                </div>
                <div class="text-right">
                  <div class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Annual NR</div>
                  <div id="output-annual-nr" class="text-[13px] text-[#2d2d2d]">$16.6MM</div>
                </div>
                <div class="text-right">
                  <div class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Annual Cases</div>
                  <div id="output-annual-cases" class="text-[13px] text-[#2d2d2d]">3.4MM</div>
                </div>
              </div>
            </div>

            <div class="flex gap-6 border-b border-[#d8e7fb] text-[14px]">
              <button
                class="output-tab border-b-2 border-[#004895] pb-2 font-bold text-[#004895]"
                data-output-tab="summary"
                type="button"
              >
                Executive Summary
              </button>
              <button
                class="output-tab border-b-2 border-transparent pb-2 text-[#4b4b4b]"
                data-output-tab="details"
                type="button"
              >
                From/To Details
              </button>
              <button
                class="output-tab border-b-2 border-transparent pb-2 text-[#4b4b4b]"
                data-output-tab="insights"
                type="button"
              >
                Input Parameters
              </button>
            </div>
          </div>

          <div class="px-12 pb-6">
            <div class="flex flex-col gap-6">
              <div class="rounded-[12px] bg-white p-6 shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]">
                <div data-output-panel="summary">
                  <span class="inline-flex rounded-full bg-[#0662C4] px-2 py-[2px] text-[10px] font-bold text-white">
                    Generated by AI
                  </span>
                  <div class="mt-2 flex items-center gap-2">
                    <span class="material-icons text-[18px] text-[#4b4b4b]">
                      bar_chart
                    </span>
                    <div id="output-total-savings" class="text-[16px] font-bold text-[#2d2d2d]">
                      $1.24M Total Savings
                    </div>
                  </div>

                  <div class="mt-4 flex flex-col gap-6">
                    <div class="text-[13px] text-[#2d2d2d]">
                      <div id="output-improvement" class="text-[13px] font-bold text-[#008A3B]">
                        +3.4 Points Margin Improvement
                      </div>
                      <p id="output-summary-line-1" class="mt-2 text-[12px] text-[#4b4b4b]">
                        The proposed optimization generates <span class="font-bold text-[#2d2d2d]">$1.24M in total savings</span>, driven largely by a <span class="font-bold text-[#2d2d2d]">12.9% reduction in overall spend</span>. Labor costs are cut by <span class="font-bold text-[#2d2d2d]">$1.04M</span> through a strategic headcount reduction of 8 positions and role transitions.
                      </p>
                      <p id="output-summary-line-2" class="mt-2 text-[12px] text-[#4b4b4b]">
                        The fleet is streamlined by 11 units, replacing smaller vans with higher-capacity bulk trucks to improve efficiency. Additionally, improved route sequencing has <span class="font-bold text-[#2d2d2d]">boosted revenue per drop by 23.7%</span>, increasing it to $1,382.
                      </p>
                    </div>

                    <div class="grid grid-cols-2 gap-3 text-[12px] text-[#2d2d2d] lg:grid-cols-4">
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="0">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Profit to Serve</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">show_chart</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>+$00M</div>
                        <span class="mt-1 inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]" data-output-delta>+3.4 points</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="1">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Weekly Hours</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">event</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>+00</div>
                        <span class="mt-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]" data-output-delta>-05%</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="2">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Weekly Miles</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">bar_chart</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>-200</div>
                        <span class="mt-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]" data-output-delta>-00%</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="3">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Headcount</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">person</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>-5</div>
                        <span class="mt-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]" data-output-delta>-5%</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="4">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Weekly Deliveries</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">event</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>+00</div>
                        <span class="mt-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]" data-output-delta>-00%</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="5">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Drop Size Cases</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">bar_chart</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>+00</div>
                        <span class="mt-1 inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]" data-output-delta>+00%</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="6">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Net Revenue/hour</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">attach_money</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>+$2.50</div>
                        <span class="mt-1 inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]" data-output-delta>+11.9%</span>
                      </div>
                      <div class="rounded-[8px] border border-[#d8e7fb] p-3" data-output-card="7">
                        <div class="flex items-center justify-between">
                          <span class="text-[11px] text-[#4b4b4b]">Assets</span>
                          <span class="material-icons text-[16px] text-[#4b4b4b]">local_shipping</span>
                        </div>
                        <div class="text-[16px] font-bold" data-output-value>+00</div>
                        <span class="mt-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]" data-output-delta>-00%</span>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 rounded-[12px] border border-[#d8e7fb] p-4">
                    <div class="text-[14px] font-bold text-[#2d2d2d]">
                      Profit to Serve - Sources of Value
                    </div>
                    <div id="output-waterfall" class="mt-4">
                      <div class="waterfall-chart">
                        <div class="waterfall-body">
                          <div class="waterfall-y">
                            <div>$700K</div>
                            <div>$600K</div>
                            <div>$500K</div>
                            <div>$400K</div>
                            <div>$300K</div>
                            <div>$200K</div>
                          </div>
                          <div class="waterfall-plot">
                            <div class="waterfall-col" style="--connector: 140px;">
                              <div class="waterfall-bar is-start" style="--bar-bottom: 0px; --bar-height: 140px;">
                                <span class="waterfall-value">$450K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 168px;">
                              <div class="waterfall-bar is-positive" style="--bar-bottom: 140px; --bar-height: 28px;">
                                <span class="waterfall-value">+$50K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 154px;">
                              <div class="waterfall-bar is-negative" style="--bar-bottom: 154px; --bar-height: 14px;">
                                <span class="waterfall-value">-$25K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 179.2px;">
                              <div class="waterfall-bar is-positive" style="--bar-bottom: 154px; --bar-height: 25.2px;">
                                <span class="waterfall-value">+$45K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 221.2px;">
                              <div class="waterfall-bar is-positive" style="--bar-bottom: 179.2px; --bar-height: 42px;">
                                <span class="waterfall-value">+$75K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 235.2px;">
                              <div class="waterfall-bar is-positive" style="--bar-bottom: 221.2px; --bar-height: 14px;">
                                <span class="waterfall-value">+$25K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 243.6px;">
                              <div class="waterfall-bar is-positive" style="--bar-bottom: 235.2px; --bar-height: 8.4px;">
                                <span class="waterfall-value">+$15K</span>
                              </div>
                            </div>
                            <div class="waterfall-col" style="--connector: 280px;">
                              <div class="waterfall-bar is-positive" style="--bar-bottom: 243.6px; --bar-height: 36.4px;">
                                <span class="waterfall-value">+$65K</span>
                              </div>
                            </div>
                            <div class="waterfall-col">
                              <div class="waterfall-bar is-total" style="--bar-bottom: 0px; --bar-height: 280px;">
                                <span class="waterfall-value">750K</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="waterfall-x">
                          <div>From</div>
                          <div>Wage Arbitrage</div>
                          <div>Labor Hours &amp;<br />Headcount</div>
                          <div>Frontline<br />Management</div>
                          <div>Delivery Fleet<br />Miles</div>
                          <div>Personal<br />Mileage</div>
                          <div>Number of Assets/<br />Depreciation</div>
                          <div>Asset Operating<br />Costs (R&amp;M, Fuel)</div>
                          <div>To</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 rounded-[12px] border border-[#d8e7fb] p-4">
                    <div class="text-[16px] font-bold text-[#2d2d2d]">
                      Scenario Sensitivities
                    </div>
                    <div class="mt-4 text-[12px] text-[#4b4b4b]">
                      <div class="grid grid-cols-[1.3fr_1fr_1fr_1fr_1fr] border-b border-[#d8e7fb] pb-2 font-bold uppercase">
                        <div>Sensitivity</div>
                        <div>Worse</div>
                        <div>Base</div>
                        <div>Better</div>
                        <div class="text-right">Total Savings Range</div>
                      </div>
                      <div id="output-sensitivities" class="divide-y divide-[#d8e7fb]"></div>
                    </div>
                  </div>
                </div>

                <div class="hidden" data-output-panel="details">
                  <div class="rounded-[12px] border border-[#d8e7fb] p-4 text-[14px] text-[#4b4b4b]">
                    From/To details placeholder.
                  </div>
                </div>

                <div class="hidden" data-output-panel="insights">
                  <div class="rounded-[12px] border border-[#d8e7fb] p-4 text-[14px] text-[#4b4b4b]">
                    Input parameters placeholder.
                  </div>
                </div>
              </div>

              <div class="h-16"></div>
            </div>
          </div>
        </section>

        <!-- Compare View -->
        <section
          id="compare-view"
          class="mx-auto hidden max-w-[1344px] flex flex-col gap-6"
        >
          <!-- Breadcrumb + Header + Scenario Tiles -->
          <div class="px-12 pt-6">
            <div class="mb-2 text-[12px] text-[#4b4b4b]">
              <span id="compare-breadcrumb-workspace" class="cursor-pointer text-[#0662C4] hover:underline">Workspace</span>
              <span class="mx-1.5">â€º</span>
              <span class="font-bold text-[#0662C4]">Scenario Comparison</span>
            </div>
            <div class="flex items-start justify-between">
              <div class="flex items-center gap-2 pt-2">
                <span class="material-icons text-[20px] text-[#4b4b4b]">auto_awesome</span>
                <span id="compare-title" class="text-[24px] font-bold text-[#2d2d2d]"></span>
              </div>
              <div class="flex flex-col gap-2">
                <div id="compare-tile-row-1" class="flex items-center"></div>
                <div id="compare-tile-row-2" class="flex items-center"></div>
              </div>
            </div>
          </div>

          <!-- Comparison Metrics Table -->
          <div class="mx-12 overflow-hidden rounded-xl bg-white shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]">
            <div class="flex items-center justify-end px-6 pt-5 pb-2">
              <div class="flex items-center gap-1.5 text-[12px] text-[#4b4b4b]">
                <span class="inline-block h-[7px] w-[7px] rounded-full bg-[#004895]"></span>
                Optimal
              </div>
            </div>
            <table class="w-full border-collapse">
              <thead>
                <tr class="border-b border-[#e8e8e8]">
                  <th class="w-[25%] py-3 pl-6 pr-4 text-left text-[12px] font-bold uppercase tracking-wide text-[#2d2d2d]">
                    <div class="flex items-center gap-1">Comparison Metric <span class="material-icons text-[14px] text-[#4b4b4b]">unfold_more</span></div>
                  </th>
                  <th class="w-[25%] py-3 px-4 text-left text-[12px] font-bold uppercase tracking-wide text-[#2d2d2d]">
                    <div class="flex items-center gap-1">Scenario 1 <span class="material-icons text-[14px] text-[#4b4b4b]">unfold_more</span></div>
                  </th>
                  <th class="w-[25%] py-3 px-4 text-left text-[12px] font-bold uppercase tracking-wide text-[#2d2d2d]">
                    <div class="flex items-center gap-1">Scenario 2 <span class="material-icons text-[14px] text-[#4b4b4b]">unfold_more</span></div>
                  </th>
                  <th class="w-[25%] py-3 px-4 text-left text-[12px] font-bold uppercase tracking-wide text-[#2d2d2d]">
                    <div class="flex items-center gap-1">S2 B(W) S1 <span class="material-icons text-[14px] text-[#4b4b4b]">unfold_more</span></div>
                  </th>
                </tr>
              </thead>
              <tbody id="compare-metrics-body"></tbody>
            </table>
          </div>

          <!-- Input Differences Summary -->
          <div class="mx-12 overflow-hidden rounded-xl bg-white shadow-[0px_0px_24px_0px_rgba(0,94,192,0.08)]">
            <div class="flex items-center justify-between px-6 pt-6 pb-4">
              <div class="flex items-center gap-2">
                <span class="material-icons text-[18px] text-[#4b4b4b]">table_chart</span>
                <span class="text-[16px] font-bold text-[#2d2d2d]">Input Differences Summary</span>
              </div>
              <span class="rounded-full border border-[#004895] bg-[#d8e7fb] px-3 py-1 text-[11px] font-bold text-[#004895]">Generated by AI</span>
            </div>
            <div id="compare-diff-container" class="px-6 pb-6"></div>
          </div>

          <!-- Detail Tabs (Labor / Service / Assets / P&L) -->
          <div class="mx-12">
            <div class="flex gap-6 border-b border-[#e8e8e8]">
              <button class="compare-detail-tab border-b-2 border-[#004895] pb-2 text-[14px] font-bold text-[#004895]" data-compare-tab="Labor">Labor</button>
              <button class="compare-detail-tab border-b-2 border-transparent pb-2 text-[14px] text-[#4b4b4b] hover:text-[#004895]" data-compare-tab="Service">Service</button>
              <button class="compare-detail-tab border-b-2 border-transparent pb-2 text-[14px] text-[#4b4b4b] hover:text-[#004895]" data-compare-tab="Assets">Assets</button>
              <button class="compare-detail-tab border-b-2 border-transparent pb-2 text-[14px] text-[#4b4b4b] hover:text-[#004895]" data-compare-tab="P&L">P&L</button>
            </div>
            <div class="mt-4 grid grid-cols-2 gap-6">
              <div id="compare-detail-left" class="rounded-lg border border-[#e8e8e8] overflow-hidden"></div>
              <div id="compare-detail-right" class="rounded-lg border border-[#e8e8e8] overflow-hidden"></div>
            </div>
          </div>

          <!-- spacer for sticky bottom bar -->
          <div class="h-16"></div>
        </section>
      </main>
      <div
        id="baseline-sticky"
        class="fixed bottom-0 left-0 right-0 hidden flex items-center justify-between bg-white px-12 py-4 shadow-[0px_2px_24px_0px_rgba(0,94,192,0.12)]"
      >
        <button
          id="baseline-back"
          class="flex h-8 items-center gap-1 text-[14px] font-bold text-[#004895] transition-colors hover:text-[#002B5E]"
          type="button"
        >
          <span class="material-icons text-[20px] text-current">
            arrow_back
          </span>
          Back
        </button>
        <div class="flex items-center gap-4">
          <button
            id="baseline-rerun"
            class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
            type="button"
          >
            <span class="material-icons text-[20px] text-current">
              refresh
            </span>
            Re-run
          </button>
          <button
            id="baseline-define-parameters"
            class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
            type="button"
          >
            Define Parameters
            <span class="material-icons text-[20px] text-current">
              arrow_forward
            </span>
          </button>
        </div>
      </div>
      <div
        id="define-parameters-sticky"
        class="fixed bottom-0 left-0 right-0 hidden flex items-center justify-between bg-white px-12 py-4 shadow-[0px_2px_24px_0px_rgba(0,94,192,0.12)]"
      >
        <button
          id="define-parameters-back"
          class="flex h-8 items-center gap-1 text-[14px] font-bold text-[#004895] transition-colors hover:text-[#002B5E]"
          type="button"
        >
          <span class="material-icons text-[20px] text-current">
            arrow_back
          </span>
          Back
        </button>
        <div class="flex items-center gap-4">
          <button
            id="define-parameters-save"
            class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
            type="button"
          >
            <span class="material-icons text-[20px] text-current">
              file_download
            </span>
            Save as a draft
          </button>
          <button
            id="define-parameters-run"
            class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
            type="button"
          >
            Run the scenario
            <span class="material-icons text-[20px] text-current">
              arrow_forward
            </span>
          </button>
        </div>
      </div>
      <div
        id="compare-sticky"
        class="fixed bottom-0 left-0 right-0 hidden flex items-center justify-between bg-white px-12 py-4 shadow-[0px_2px_24px_0px_rgba(0,94,192,0.12)]"
      >
        <button
          id="compare-back"
          class="flex h-8 items-center gap-1 text-[14px] font-bold text-[#004895] transition-colors hover:text-[#002B5E]"
          type="button"
        >
          <span class="material-icons text-[20px] text-current">
            arrow_back
          </span>
          Back to Workspace
        </button>
        <button
          id="compare-download"
          class="flex h-8 items-center gap-2 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
          type="button"
        >
          <span class="material-icons text-[16px] text-current">
            download
          </span>
          Download
        </button>
      </div>
      <div
        id="output-sticky"
        class="fixed bottom-0 left-0 right-0 hidden flex items-center justify-between bg-white px-12 py-4 shadow-[0px_2px_24px_0px_rgba(0,94,192,0.12)]"
      >
        <button
          id="output-back"
          class="flex h-8 items-center gap-1 text-[14px] font-bold text-[#004895] transition-colors hover:text-[#002B5E]"
          type="button"
        >
          <span class="material-icons text-[20px] text-current">
            arrow_back
          </span>
          Back to Workspace
        </button>
        <button
          id="output-download"
          class="flex h-8 items-center gap-2 rounded-full border border-[#004895] bg-white px-4 text-[12px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
          type="button"
        >
          <span class="material-icons text-[16px] text-current">
            download
          </span>
          Download
        </button>
      </div>
      <div
        id="scenario-sticky"
        class="fixed bottom-0 left-0 right-0 z-50 hidden flex h-16 items-center justify-end bg-white pl-12 pr-6 shadow-[0px_2px_24px_0px_rgba(0,94,192,0.12)]"
      >
        <button
          id="view-baseline-button"
          class="flex h-8 items-center gap-2 rounded-full bg-[#dadada] px-4 text-[14px] font-bold text-[#b1b1b1] transition-colors"
          type="button"
          disabled
        >
          View Baseline
          <span class="material-icons text-[20px] text-current">
            arrow_forward
          </span>
        </button>
      </div>
      <div
        id="draft-modal"
        class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 px-6"
      >
        <div class="w-full max-w-[420px] rounded-lg bg-white p-6 shadow-[0px_8px_24px_0px_rgba(0,0,0,0.12)]">
          <div class="text-[18px] font-bold text-[#2d2d2d]">
            Save as a draft?
          </div>
          <p class="mt-2 text-[14px] text-[#4b4b4b]">
            This will save your current progress as a draft and return you to the workspace.
          </p>
          <div class="mt-5 flex items-center justify-end gap-3">
            <button
              id="draft-modal-cancel"
              class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
              type="button"
            >
              No
            </button>
            <button
              id="draft-modal-confirm"
              class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
              type="button"
            >
              Yes, save
            </button>
          </div>
        </div>
      </div>
      <div
        id="chain-modal"
        class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 px-6"
      >
        <div class="w-full max-w-[520px] rounded-lg bg-white p-6 shadow-[0px_8px_24px_0px_rgba(0,0,0,0.12)]">
          <div class="text-[18px] font-bold text-[#2d2d2d]">
            Add Chain Exception
          </div>
          <p class="mt-2 text-[14px] text-[#4b4b4b]">
            Select a business unit and chain name to add a chain exception to this
            scenario.
          </p>
          <div class="mt-4 grid gap-4">
            <label class="flex flex-col gap-2 text-[12px] text-[#4b4b4b]">
              Business Unit
              <div class="relative">
                <select
                  id="chain-business-unit"
                  class="h-8 w-full appearance-none rounded border border-[#c0c0c0] bg-white px-2 pr-8 text-[14px] text-[#2d2d2d]"
                >
                  <option value="PFUS">PFUS</option>
                  <option value="PBUS">PBUS</option>
                </select>
                <span class="material-icons pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[16px] text-[#4b4b4b]">
                  keyboard_arrow_down
                </span>
              </div>
            </label>
            <label class="flex flex-col gap-2 text-[12px] text-[#4b4b4b]">
              Chain Name
              <div class="relative">
                <select
                  id="chain-name"
                  class="h-8 w-full appearance-none rounded border border-[#c0c0c0] bg-white px-2 pr-8 text-[14px] text-[#2d2d2d]"
                ></select>
                <span class="material-icons pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-[16px] text-[#4b4b4b]">
                  keyboard_arrow_down
                </span>
              </div>
            </label>
          </div>
          <div class="mt-6 flex items-center justify-end gap-3">
            <button
              id="chain-modal-cancel"
              class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
              type="button"
            >
              Cancel
            </button>
            <button
              id="chain-modal-confirm"
              class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
              type="button"
            >
              Add Chain
            </button>
          </div>
        </div>
      </div>
      <div
        id="facility-modal"
        class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 px-6"
      >
        <div class="w-full max-w-[560px] rounded-lg bg-white p-6 shadow-[0px_8px_24px_0px_rgba(0,0,0,0.12)]">
          <div class="text-[18px] font-bold text-[#2d2d2d]">
            Create New Facility
          </div>
          <p class="mt-2 text-[14px] text-[#4b4b4b]">
            Add a new facility to the existing facilities list for this scenario.
          </p>
          <div class="mt-4 grid gap-4">
            <label class="flex flex-col gap-2 text-[12px] text-[#4b4b4b]">
              Facility Name
              <input
                id="facility-name-input"
                type="text"
                class="h-9 rounded border border-[#c0c0c0] bg-white px-2 text-[14px] text-[#2d2d2d]"
                placeholder="Enter facility name"
              />
            </label>
            <div class="grid grid-cols-2 gap-4">
              <label class="flex flex-col gap-2 text-[12px] text-[#4b4b4b]">
                Location ID
                <input
                  id="facility-location-id"
                  type="text"
                  class="h-9 rounded border border-[#c0c0c0] bg-white px-2 text-[14px] text-[#2d2d2d]"
                  placeholder="Enter location ID"
                />
              </label>
              <label class="flex flex-col gap-2 text-[12px] text-[#4b4b4b]">
                Maximum Weekly Cases
                <input
                  id="facility-max-cases"
                  type="number"
                  class="h-9 rounded border border-[#c0c0c0] bg-white px-2 text-[14px] text-[#2d2d2d]"
                  placeholder="0"
                />
              </label>
            </div>
            <label class="flex flex-col gap-2 text-[12px] text-[#4b4b4b]">
              Address
              <input
                id="facility-address"
                type="text"
                class="h-9 rounded border border-[#c0c0c0] bg-white px-2 text-[14px] text-[#2d2d2d]"
                placeholder="Enter address"
              />
            </label>
            <label class="flex items-center gap-2 text-[12px] text-[#4b4b4b]">
              <input
                id="facility-inc"
                type="checkbox"
                class="table-checkbox"
              />
              Include in scenario
            </label>
          </div>
          <div class="mt-6 flex items-center justify-end gap-3">
            <button
              id="facility-modal-cancel"
              class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
              type="button"
            >
              Cancel
            </button>
            <button
              id="facility-modal-confirm"
              class="flex h-8 items-center gap-1 rounded-full bg-[#dadada] px-4 text-[14px] font-bold text-[#b1b1b1] transition-colors"
              type="button"
              disabled
            >
              Create New Facility
            </button>
          </div>
        </div>
      </div>
      <div
        id="run-modal"
        class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 px-6"
      >
        <div class="w-full max-w-[420px] rounded-lg bg-white p-6 shadow-[0px_8px_24px_0px_rgba(0,0,0,0.12)]">
          <div class="text-[18px] font-bold text-[#2d2d2d]">
            Run this scenario?
          </div>
          <p class="mt-2 text-[14px] text-[#4b4b4b]">
            This will start the scenario run and return you to the workspace.
          </p>
          <div class="mt-5 flex items-center justify-end gap-3">
            <button
              id="run-modal-cancel"
              class="flex h-8 items-center gap-1 rounded-full border border-[#004895] bg-white px-4 text-[14px] font-bold text-[#004895] transition-colors hover:border-[#002B5E] hover:text-[#002B5E]"
              type="button"
            >
              No
            </button>
            <button
              id="run-modal-confirm"
              class="flex h-8 items-center gap-1 rounded-full bg-[#004895] px-4 text-[14px] font-bold text-white transition-colors hover:bg-[#002B5E]"
              type="button"
            >
              Yes, run
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      const selectAll = document.getElementById("select-all");
      const bulkBar = document.getElementById("bulk-bar");
      const selectedCount = document.getElementById("selected-count");
      const totalCount = document.getElementById("total-count");
      const compareButton = document.getElementById("compare-button");
      const tableBody = document.getElementById("table-body");
      const workspaceFirstPage = document.getElementById("workspace-first-page");
      const workspacePrevPage = document.getElementById("workspace-prev-page");
      const workspaceNextPage = document.getElementById("workspace-next-page");
      const workspaceLastPage = document.getElementById("workspace-last-page");
      const workspacePageCurrent = document.getElementById("workspace-page-current");
      const workspacePageTotal = document.getElementById("workspace-page-total");
      const tabAll = document.getElementById("tab-all");
      const tabMy = document.getElementById("tab-my");
      const portfolioChip = document.getElementById("portfolio-chip");
      const statusChip = document.getElementById("status-chip");
      const portfolioMenu = document.getElementById("portfolio-menu");
      const statusMenu = document.getElementById("status-menu");
      const portfolioOptions = document.getElementById("portfolio-options");
      const statusOptions = document.getElementById("status-options");
      const portfolioCount = document.getElementById("portfolio-count");
      const statusCount = document.getElementById("status-count");
      const portfolioCountValue = document.getElementById("portfolio-count-value");
      const statusCountValue = document.getElementById("status-count-value");
      const portfolioClear = document.getElementById("portfolio-clear");
      const statusClear = document.getElementById("status-clear");
      const portfolioSearch = document.getElementById("portfolio-search");
      const statusSearch = document.getElementById("status-search");
      const portfolioApply = document.getElementById("portfolio-apply");
      const statusApply = document.getElementById("status-apply");
      const portfolioCancel = document.getElementById("portfolio-cancel");
      const statusCancel = document.getElementById("status-cancel");
      const defineScopeTabs = Array.from(
        document.querySelectorAll(".define-scope-tab")
      );
      const defineScopePanels = Array.from(
        document.querySelectorAll("[data-scope-panel]")
      );
      const startDateField = document.getElementById("start-date-field");
      const endDateField = document.getElementById("end-date-field");
      const startDateMenu = document.getElementById("start-date-menu");
      const endDateMenu = document.getElementById("end-date-menu");
      const startDateValue = document.getElementById("start-date-value");
      const endDateValue = document.getElementById("end-date-value");
      const navWorkspace = document.getElementById("nav-workspace");
      const navScenario = document.getElementById("nav-scenario");
      const workspaceView = document.getElementById("workspace-view");
      const scenarioView = document.getElementById("scenario-view");
      const baselineView = document.getElementById("baseline-view");
      const defineParametersView = document.getElementById("define-parameters-view");
      const outputView = document.getElementById("output-view");
      const compareView = document.getElementById("compare-view");
      const compareTitle = document.getElementById("compare-title");
      const compareTileRow1 = document.getElementById("compare-tile-row-1");
      const compareTileRow2 = document.getElementById("compare-tile-row-2");
      const compareMetricsBody = document.getElementById("compare-metrics-body");
      const compareDiffContainer = document.getElementById("compare-diff-container");
      const compareDetailLeft = document.getElementById("compare-detail-left");
      const compareDetailRight = document.getElementById("compare-detail-right");
      const compareBack = document.getElementById("compare-back");
      const compareDownload = document.getElementById("compare-download");
      const compareBreadcrumbWorkspace = document.getElementById("compare-breadcrumb-workspace");
      const outputBreadcrumbWorkspace = document.getElementById("output-breadcrumb-workspace");
      const compareSticky = document.getElementById("compare-sticky");
      const outputSticky = document.getElementById("output-sticky");
      const scenarioSticky = document.getElementById("scenario-sticky");
      const baselineSticky = document.getElementById("baseline-sticky");
      const baselineBack = document.getElementById("baseline-back");
      const baselineRerun = document.getElementById("baseline-rerun");
      const baselineDefineParameters = document.getElementById("baseline-define-parameters");
      const defineParametersSticky = document.getElementById("define-parameters-sticky");
      const defineParametersBack = document.getElementById("define-parameters-back");
      const defineParametersSave = document.getElementById("define-parameters-save");
      const defineParametersRun = document.getElementById("define-parameters-run");
      const outputBack = document.getElementById("output-back");
      const outputScenarioId = document.getElementById("output-scenario-id");
      const outputScenarioDesc = document.getElementById("output-scenario-desc");
      const outputTimeline = document.getElementById("output-timeline");
      const outputStores = document.getElementById("output-stores");
      const outputAnnualNr = document.getElementById("output-annual-nr");
      const outputAnnualCases = document.getElementById("output-annual-cases");
      const outputTotalSavings = document.getElementById("output-total-savings");
      const outputImprovement = document.getElementById("output-improvement");
      const outputSummaryLine1 = document.getElementById("output-summary-line-1");
      const outputSummaryLine2 = document.getElementById("output-summary-line-2");
      const outputTabs = Array.from(document.querySelectorAll(".output-tab"));
      const outputPanels = Array.from(
        document.querySelectorAll("[data-output-panel]")
      );
      const draftModal = document.getElementById("draft-modal");
      const draftModalConfirm = document.getElementById("draft-modal-confirm");
      const draftModalCancel = document.getElementById("draft-modal-cancel");
      const chainModal = document.getElementById("chain-modal");
      const chainModalConfirm = document.getElementById("chain-modal-confirm");
      const chainModalCancel = document.getElementById("chain-modal-cancel");
      const addChainButton = document.getElementById("add-chain-button");
      const chainBusinessUnit = document.getElementById("chain-business-unit");
      const chainNameSelect = document.getElementById("chain-name");
      const exceptionsTableBody = document.getElementById(
        "exceptions-table-body"
      );
      const facilityModal = document.getElementById("facility-modal");
      const facilityModalConfirm = document.getElementById("facility-modal-confirm");
      const facilityModalCancel = document.getElementById("facility-modal-cancel");
      const createFacilityButton = document.getElementById("create-facility-button");
      const facilityNameInput = document.getElementById("facility-name-input");
      const facilityLocationId = document.getElementById("facility-location-id");
      const facilityMaxCases = document.getElementById("facility-max-cases");
      const facilityAddress = document.getElementById("facility-address");
      const facilityInc = document.getElementById("facility-inc");
      const existingFacilitiesBody = document.getElementById(
        "existing-facilities-body"
      );
      const runModal = document.getElementById("run-modal");
      const runModalConfirm = document.getElementById("run-modal-confirm");
      const runModalCancel = document.getElementById("run-modal-cancel");
      const newScenario = document.getElementById("new-scenario");
      const portfolioSelectField = document.getElementById("portfolio-select-field");
      const portfolioSelectMenu = document.getElementById("portfolio-select-menu");
      const portfolioSelectValue = document.getElementById("portfolio-select-value");
      const stateSelectField = document.getElementById("state-select-field");
      const stateSelectMenu = document.getElementById("state-select-menu");
      const stateSelectValue = document.getElementById("state-select-value");
      const stateSelectOptions = document.getElementById("state-select-options");
      const applySelectionsButton = document.getElementById(
        "apply-selections-button"
      );
      const mapImage = document.getElementById("map-image");
      const foodLocationField = document.getElementById("food-location-field");
      const foodLocationValue = document.getElementById("food-location-value");
      const foodLocationMenu = document.getElementById("food-location-menu");
      const foodLocationOptions = document.getElementById("food-location-options");
      const foodLocationLabel = document.getElementById("food-location-label");
      const foodLocationIcon = document.getElementById("food-location-icon");
      const foodLocationChevron = document.getElementById(
        "food-location-chevron"
      );
      const beverageLocationField = document.getElementById("beverage-location-field");
      const beverageLocationValue = document.getElementById("beverage-location-value");
      const beverageLocationMenu = document.getElementById("beverage-location-menu");
      const beverageLocationOptions = document.getElementById("beverage-location-options");
      const beverageLocationLabel = document.getElementById(
        "beverage-location-label"
      );
      const beverageLocationIcon = document.getElementById(
        "beverage-location-icon"
      );
      const beverageLocationChevron = document.getElementById(
        "beverage-location-chevron"
      );
      const foodBeverageLocationField = document.getElementById(
        "food-beverage-location-field"
      );
      const foodBeverageLocationValue = document.getElementById(
        "food-beverage-location-value"
      );
      const foodBeverageLocationMenu = document.getElementById(
        "food-beverage-location-menu"
      );
      const foodBeverageLocationOptions = document.getElementById(
        "food-beverage-location-options"
      );
      const foodBeverageLocationLabel = document.getElementById(
        "food-beverage-location-label"
      );
      const foodBeverageLocationIcon = document.getElementById(
        "food-beverage-location-icon"
      );
      const foodBeverageLocationChevron = document.getElementById(
        "food-beverage-location-chevron"
      );
      const viewBaselineButton = document.getElementById("view-baseline-button");
      const baselineKpiTop = Array.from({ length: 5 }, (_, index) =>
        document.getElementById(`baseline-kpi-top-${index}`)
      );
      const baselineKpiBottom = Array.from({ length: 5 }, (_, index) =>
        document.getElementById(`baseline-kpi-bottom-${index}`)
      );
      const beveragesTotalStores = document.getElementById("beverages-total-stores");
      const foodsTotalStores = document.getElementById("foods-total-stores");
      const beveragesKpiTop = Array.from({ length: 4 }, (_, index) =>
        document.getElementById(`beverages-kpi-top-${index}`)
      );
      const beveragesKpiBottom = Array.from({ length: 5 }, (_, index) =>
        document.getElementById(`beverages-kpi-bottom-${index}`)
      );
      const foodsKpiTop = Array.from({ length: 4 }, (_, index) =>
        document.getElementById(`foods-kpi-top-${index}`)
      );
      const foodsKpiBottom = Array.from({ length: 5 }, (_, index) =>
        document.getElementById(`foods-kpi-bottom-${index}`)
      );
      const beveragesLaborBody = document.getElementById("beverages-labor-body");
      const beveragesServiceBody = document.getElementById("beverages-service-body");
      const beveragesAssetsBody = document.getElementById("beverages-assets-body");
      const beveragesTotalBody = document.getElementById("beverages-total-body");
      const beveragesPnlBody = document.getElementById("beverages-pnl-body");
      const foodsLaborBody = document.getElementById("foods-labor-body");
      const foodsServiceBody = document.getElementById("foods-service-body");
      const foodsAssetsBody = document.getElementById("foods-assets-body");
      const foodsTotalBody = document.getElementById("foods-total-body");
      const foodsPnlBody = document.getElementById("foods-pnl-body");
      const uploadFileButton = document.getElementById("upload-file-button");
      const uploadDropzone = document.getElementById("upload-dropzone");
      const uploadedFile = document.getElementById("uploaded-file");
      const uploadedFileName = document.getElementById("uploaded-file-name");
      const uploadedDownload = document.getElementById("uploaded-download");
      const uploadedDelete = document.getElementById("uploaded-delete");
      const serviceDeliveryActuals = document.getElementById(
        "service-delivery-actuals"
      );
      const serviceDeliveryStandards = document.getElementById(
        "service-delivery-standards"
      );
      const MAX_SELECTED = 4;
      const currentUser = "Grace Goudreau";
      const filters = {
        portfolio: {
          options: ["1NA", "Food Only", "Bev Only"],
          selected: new Set(),
          draft: new Set(),
        },
        status: {
          options: ["Completed", "In progress", "Draft"],
          selected: new Set(),
          draft: new Set(),
        },
      };
      function buildPeriodsForYear(year) {
        const periods = [];
        const yearStart = new Date(year, 0, 1);

        for (let index = 0; index < 12; index += 1) {
          const start = new Date(yearStart);
          start.setDate(yearStart.getDate() + index * 28);
          const end = new Date(start);
          end.setDate(start.getDate() + 27);
          periods.push({ label: `P${String(index + 1).padStart(2, "0")} ${year}`, start, end });
        }

        const p13Start = new Date(yearStart);
        p13Start.setDate(yearStart.getDate() + 12 * 28);
        const p13End = new Date(year, 11, 31);
        periods.push({ label: `P13 ${year}`, start: p13Start, end: p13End });

        return periods;
      }

      function buildPeriodOptions() {
        const today = new Date();
        const windowStart = new Date(today);
        windowStart.setFullYear(today.getFullYear() - 1);
        windowStart.setHours(0, 0, 0, 0);
        today.setHours(23, 59, 59, 999);

        const years = [windowStart.getFullYear(), today.getFullYear()];
        const options = years
          .flatMap((year) => buildPeriodsForYear(year))
          .filter((period) => period.start >= windowStart && period.end <= today);

        if (options.length === 0) {
          const fallbackYear = today.getFullYear();
          const fallbackPeriods = buildPeriodsForYear(fallbackYear).filter(
            (period) => period.end <= today
          );
          return fallbackPeriods.slice(-1).map((period) => period.label);
        }

        return options.map((period) => period.label);
      }

      const periodOptions = buildPeriodOptions();
      let startDateSelected = "";
      let endDateSelected = "";
      const fakeUploadedFileName = "Placeholder101.csv";
      let scenarioSessionId = 0;
      let currentBaselineData = null;
      const scenarios = [
        {
          id: "SC-1001",
          description: "Dallas Metro Q2 DSD Expansion",
          portfolio: "1NA",
          owner: "Jordan Lee",
          status: "Completed",
          dateModified: "02 12, 2026",
          ptsImpact: "$1,180M",
        },
        {
          id: "SC-1420",
          description: "Midwest Multi-Pack Optimization",
          portfolio: "Food Only",
          owner: "Avery Patel",
          status: "In progress",
          runningTime: "Running for 05hh 18mm",
          ptsImpact: "$3,420M",
        },
        {
          id: "SC-1558",
          description: "Houston Value Channel Reset",
          portfolio: "Bev Only",
          owner: "Grace Goudreau",
          status: "Completed",
          dateModified: "02 10, 2026",
          ptsImpact: "$980M",
        },
        {
          id: "SC-1612",
          description: "Northeast Promo Lift Test",
          portfolio: "1NA",
          owner: "Taylor Brooks",
          status: "Completed",
          dateModified: "02 08, 2026",
          ptsImpact: "$3,210M",
        },
        {
          id: "SC-1711",
          description: "West Coast Cold Chain Upgrade",
          portfolio: "Bev Only",
          owner: "Casey Nguyen",
          status: "Completed",
          dateModified: "02 05, 2026",
          ptsImpact: "$2,740M",
        },
        {
          id: "SC-1804",
          description: "Southeast Snack Route Mix",
          portfolio: "Food Only",
          owner: "Riley Shah",
          status: "Completed",
          dateModified: "02 03, 2026",
          ptsImpact: "$4,020M",
        },
        {
          id: "SC-1922",
          description: "Great Lakes Holiday Pallets",
          portfolio: "1NA",
          owner: "Grace Goudreau",
          status: "Completed",
          dateModified: "01 31, 2026",
          ptsImpact: "$6,880M",
        },
        {
          id: "SC-2033",
          description: "Southwest Convenience Focus",
          portfolio: "Food Only",
          owner: "Jamie Park",
          status: "Completed",
          dateModified: "01 29, 2026",
          ptsImpact: "$1,940M",
        },
        {
          id: "SC-2147",
          description: "Mountain Region Pack Sizes",
          portfolio: "Bev Only",
          owner: "Drew Morgan",
          status: "Draft",
          dateModified: "01 26, 2026",
          ptsImpact: "$4,110M",
        },
        {
          id: "SC-2275",
          description: "Upper Midwest Pricing Guardrails",
          portfolio: "1NA",
          owner: "Grace Goudreau",
          status: "Draft",
          dateModified: "01 24, 2026",
          ptsImpact: "$5,420M",
        },
      ];
      let activeTab = "all";
      const WORKSPACE_PAGE_SIZE = 10;
      let workspacePage = 1;
      const formatScenarioDate = (date) => {
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${month} ${day}, ${date.getFullYear()}`;
      };
      const getNextScenarioId = () => {
        const maxId = scenarios.reduce((currentMax, scenario) => {
          const match = String(scenario.id).match(/SC-(\d+)/i);
          if (!match) return currentMax;
          return Math.max(currentMax, Number(match[1]));
        }, 1000);
        return `SC-${maxId + 1}`;
      };

      function setNavActive(active) {
        const workspaceIcon = navWorkspace.querySelector(".material-icons");
        const workspaceText = navWorkspace.querySelector("span:last-child");
        const scenarioIcon = navScenario.querySelector(".material-icons");
        const scenarioText = navScenario.querySelector("span:last-child");

        if (active === "workspace") {
          navWorkspace.classList.add("border-b-2", "border-[#0662C4]");
          workspaceIcon.classList.add("text-[#0662C4]");
          workspaceText.classList.add("font-bold", "text-[#0662C4]");
          workspaceText.classList.remove("text-[#4b4b4b]");
          workspaceIcon.classList.remove("text-[#4b4b4b]");

          navScenario.classList.remove("border-b-2", "border-[#0662C4]");
          scenarioIcon.classList.add("text-[#4b4b4b]");
          scenarioText.classList.add("text-[#4b4b4b]");
          scenarioIcon.classList.remove("text-[#0662C4]");
          scenarioText.classList.remove("font-bold", "text-[#0662C4]");
        } else {
          navScenario.classList.add("border-b-2", "border-[#0662C4]");
          scenarioIcon.classList.add("text-[#0662C4]");
          scenarioText.classList.add("font-bold", "text-[#0662C4]");
          scenarioText.classList.remove("text-[#4b4b4b]");
          scenarioIcon.classList.remove("text-[#4b4b4b]");

          navWorkspace.classList.remove("border-b-2", "border-[#0662C4]");
          workspaceIcon.classList.add("text-[#4b4b4b]");
          workspaceText.classList.add("text-[#4b4b4b]");
          workspaceIcon.classList.remove("text-[#0662C4]");
          workspaceText.classList.remove("font-bold", "text-[#0662C4]");
        }
      }

      let currentView = "workspace";
      function setView(view) {
        const showWorkspace = view === "workspace";
        const showScenario = view === "scenario";
        const showBaseline = view === "baseline";
        const showDefineParameters = view === "define-parameters";
        const showOutput = view === "output";
        const showCompare = view === "compare";
        workspaceView.classList.toggle("hidden", !showWorkspace);
        scenarioView.classList.toggle("hidden", !showScenario);
        baselineView.classList.toggle("hidden", !showBaseline);
        defineParametersView.classList.toggle("hidden", !showDefineParameters);
        outputView?.classList.toggle("hidden", !showOutput);
        compareView.classList.toggle("hidden", !showCompare);
        scenarioSticky.classList.toggle("hidden", !showScenario);
        baselineSticky.classList.toggle("hidden", !showBaseline);
        defineParametersSticky.classList.toggle("hidden", !showDefineParameters);
        compareSticky.classList.toggle("hidden", !showCompare);
        outputSticky?.classList.toggle("hidden", !showOutput);
        setNavActive(showWorkspace || showOutput || showCompare ? "workspace" : "scenario");
        currentView = view;
        window.scrollTo({ top: 0, left: 0, behavior: "auto" });
      }

      navWorkspace.addEventListener("click", () => setView("workspace"));
      navScenario.addEventListener("click", () => startScenarioSession());
      newScenario.addEventListener("click", () => startScenarioSession());
      uploadFileButton.addEventListener("click", showUploadedFile);
      uploadedDelete.addEventListener("click", clearUploadedFile);
      uploadedDownload.addEventListener("click", triggerFakeDownload);
      viewBaselineButton.addEventListener("click", () => {
        if (viewBaselineButton.disabled) {
          return;
        }
        if (!currentBaselineData) {
          currentBaselineData = buildBaselineData();
        }
        renderBaseline(currentBaselineData);
        setView("baseline");
      });

      baselineBack.addEventListener("click", () => {
        setView("scenario");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      baselineRerun.addEventListener("click", () => {
        currentBaselineData = buildBaselineData();
        renderBaseline(currentBaselineData);
        setView("baseline");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      baselineDefineParameters.addEventListener("click", () => {
        setView("define-parameters");
        setDefineParametersActiveTab("Facilities");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      defineParametersBack.addEventListener("click", () => {
        setView("baseline");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
      const showDraftModal = () => {
        if (!draftModal) {
          return;
        }
        draftModal.classList.remove("hidden");
        draftModal.classList.add("flex");
      };
      const hideDraftModal = () => {
        if (!draftModal) {
          return;
        }
        draftModal.classList.add("hidden");
        draftModal.classList.remove("flex");
      };
      const normalizePortfolioLabel = (label) => {
        if (!label) return label;
        return label === "Foods and Beverages" ? "1NA" : label;
      };

      const saveDraftScenario = () => {
        const now = new Date();
        const activeDefineTab = defineParametersTabs.find((tab) =>
          tab.classList.contains("border-l-2")
        )?.dataset.defineTab;
        const displayPortfolio = normalizePortfolioLabel(
          portfolioSelected || portfolioSelectValue.textContent || "1NA"
        );
        const scenario = {
          id: getNextScenarioId(),
          description: "Draft scenario",
          portfolio: displayPortfolio,
          status: "Draft",
          dateModified: formatScenarioDate(now),
          ptsImpact: "$0",
          draftState: {
            startDateSelected,
            endDateSelected,
            portfolioSelected,
            hasFile: !uploadedFile.classList.contains("hidden"),
            lastView: currentView,
            defineTab: activeDefineTab || "Facilities",
          },
        };
        createScenario(scenario);
      };
      const saveInProgressScenario = () => {
        const displayPortfolio = normalizePortfolioLabel(
          portfolioSelected || portfolioSelectValue.textContent || "1NA"
        );
        const scenario = {
          id: getNextScenarioId(),
          description: "Running scenario",
          portfolio: displayPortfolio,
          status: "In progress",
          runningTime: "Running for 00hh 05mm",
          ptsImpact: "$0",
        };
        createScenario(scenario);
      };
      defineParametersSave?.addEventListener("click", showDraftModal);
      draftModalConfirm?.addEventListener("click", () => {
        hideDraftModal();
        try {
          saveDraftScenario();
        } catch (error) {
          // Continue to workspace even if draft creation fails.
        }
        setTimeout(() => {
          setView("workspace");
          renderTable();
          workspaceView?.classList.remove("hidden");
          scenarioView?.classList.add("hidden");
          baselineView?.classList.add("hidden");
          defineParametersView?.classList.add("hidden");
          window.scrollTo({ top: 0, behavior: "smooth" });
        }, 0);
      });
      draftModalCancel?.addEventListener("click", hideDraftModal);

      const showRunModal = () => {
        if (!runModal) {
          return;
        }
        runModal.classList.remove("hidden");
        runModal.classList.add("flex");
      };
      const hideRunModal = () => {
        if (!runModal) {
          return;
        }
        runModal.classList.add("hidden");
        runModal.classList.remove("flex");
      };

      const chainOptions = {
        PFUS: [
          "Corner Market",
          "Freshway Foods",
          "Prairie Mart",
          "Summit Grocers",
          "Westside Foods",
        ],
        PBUS: [
          "Blue Ridge Market",
          "Harvest Pantry",
          "Northland Co-op",
          "Sunset Foods",
          "Urban Pantry",
        ],
      };
      const updateChainNames = (unit) => {
        if (!chainNameSelect) {
          return;
        }
        const options = chainOptions[unit] || [];
        chainNameSelect.innerHTML = options
          .map((name) => `<option value="${name}">${name}</option>`)
          .join("");
      };
      const showChainModal = () => {
        if (!chainModal) {
          return;
        }
        const unit = chainBusinessUnit?.value || "PFUS";
        updateChainNames(unit);
        chainModal.classList.remove("hidden");
        chainModal.classList.add("flex");
      };
      const hideChainModal = () => {
        if (!chainModal) {
          return;
        }
        chainModal.classList.add("hidden");
        chainModal.classList.remove("flex");
      };
      const updateFacilityModalState = () => {
        if (!facilityModalConfirm) {
          return;
        }
        const isReady =
          Boolean(facilityNameInput?.value.trim()) &&
          Boolean(facilityLocationId?.value.trim()) &&
          Boolean(facilityMaxCases?.value.trim()) &&
          Boolean(facilityAddress?.value.trim());
        facilityModalConfirm.disabled = !isReady;
        facilityModalConfirm.classList.toggle("bg-[#004895]", isReady);
        facilityModalConfirm.classList.toggle("text-white", isReady);
        facilityModalConfirm.classList.toggle("hover:bg-[#002B5E]", isReady);
        facilityModalConfirm.classList.toggle("bg-[#dadada]", !isReady);
        facilityModalConfirm.classList.toggle("text-[#b1b1b1]", !isReady);
        facilityModalConfirm.classList.toggle("cursor-not-allowed", !isReady);
      };
      const showFacilityModal = () => {
        if (!facilityModal) {
          return;
        }
        if (facilityNameInput) facilityNameInput.value = "";
        if (facilityLocationId) facilityLocationId.value = "";
        if (facilityMaxCases) facilityMaxCases.value = "";
        if (facilityAddress) facilityAddress.value = "";
        if (facilityInc) facilityInc.checked = false;
        updateFacilityModalState();
        facilityModal.classList.remove("hidden");
        facilityModal.classList.add("flex");
      };
      const hideFacilityModal = () => {
        if (!facilityModal) {
          return;
        }
        facilityModal.classList.add("hidden");
        facilityModal.classList.remove("flex");
      };

      defineParametersRun?.addEventListener("click", showRunModal);
      runModalConfirm?.addEventListener("click", () => {
        hideRunModal();
        try {
          saveInProgressScenario();
        } catch (error) {
          // Continue to workspace even if scenario creation fails.
        }
        setTimeout(() => {
          setView("workspace");
          renderTable();
          workspaceView?.classList.remove("hidden");
          scenarioView?.classList.add("hidden");
          baselineView?.classList.add("hidden");
          defineParametersView?.classList.add("hidden");
          window.scrollTo({ top: 0, behavior: "smooth" });
        }, 0);
      });
      runModalCancel?.addEventListener("click", hideRunModal);
      outputBack?.addEventListener("click", () => {
        setView("workspace");
        renderTable();
      });
      addChainButton?.addEventListener("click", showChainModal);
      chainModalCancel?.addEventListener("click", hideChainModal);
      chainModalConfirm?.addEventListener("click", () => {
        if (!exceptionsTableBody || !chainBusinessUnit || !chainNameSelect) {
          hideChainModal();
          return;
        }
        const unit = chainBusinessUnit.value;
        const chainName = chainNameSelect.value;
        const row = document.createElement("div");
        row.className =
          "grid min-h-[48px] grid-cols-[140px_1.4fr_120px_120px_120px_120px] items-center gap-4 px-2 py-2";
        row.innerHTML = `
          <div>${unit}</div>
          <div>${chainName}</div>
          <div class="flex items-center justify-start">
            <input type="checkbox" class="table-checkbox" checked />
          </div>
          <div class="flex items-center justify-start">
            <input type="checkbox" class="table-checkbox" checked />
          </div>
          <div class="flex items-center justify-start">
            <input type="checkbox" class="table-checkbox" />
          </div>
          <div class="flex items-center justify-start">
            <input type="checkbox" class="table-checkbox" checked />
          </div>
        `;
        exceptionsTableBody.prepend(row);
        row.querySelectorAll("input").forEach((input) => {
          registerDefineInput(input);
        });
        updateDefineChangeCounts();
        hideChainModal();
      });
      chainBusinessUnit?.addEventListener("change", () => {
        updateChainNames(chainBusinessUnit.value);
      });
      createFacilityButton?.addEventListener("click", showFacilityModal);
      facilityModalCancel?.addEventListener("click", hideFacilityModal);
      facilityModalConfirm?.addEventListener("click", () => {
        if (
          !existingFacilitiesBody ||
          !facilityNameInput ||
          !facilityLocationId ||
          !facilityMaxCases ||
          !facilityAddress
        ) {
          hideFacilityModal();
          return;
        }
        const row = document.createElement("div");
        row.className =
          "grid min-h-[48px] grid-cols-[1.2fr_80px_120px_220px_1.2fr] items-center gap-4 px-2 py-2";
        const defaultCases = facilityMaxCases.value.trim();
        row.innerHTML = `
          <div>${facilityNameInput.value.trim()}</div>
          <div class="flex items-center">
            <input type="checkbox" class="table-checkbox" ${facilityInc?.checked ? "checked" : ""} />
          </div>
          <div>${facilityLocationId.value.trim()}</div>
          <div>
            <input
              type="number"
              class="facility-input"
              value="${defaultCases}"
              data-default="${defaultCases}"
              ${facilityInc?.checked ? "" : "disabled"}
            />
            <div class="mt-1 flex items-center gap-1 text-[12px] text-[#b1b1b1]">
              <span class="material-icons text-[16px] text-[#b1b1b1]">
                info
              </span>
              Default: ${defaultCases}
            </div>
          </div>
          <div>${facilityAddress.value.trim()}</div>
        `;
        existingFacilitiesBody.prepend(row);
        const input = row.querySelector(".facility-input");
        const checkbox = row.querySelector(".table-checkbox");
        registerFacilityRow(input, checkbox);
        facilityRows.push({ input, checkbox });
        updateDefineChangeCounts();
        hideFacilityModal();
      });
      [
        facilityNameInput,
        facilityLocationId,
        facilityMaxCases,
        facilityAddress,
      ].forEach((input) => {
        input?.addEventListener("input", updateFacilityModalState);
      });

      const defineParametersTabs = Array.from(
        document.querySelectorAll(".define-parameters-tab")
      );
      const defineParametersPanels = Array.from(
        document.querySelectorAll("[data-define-panel]")
      );
      const setDefineParametersActiveTab = (activeLabel) => {
        defineParametersTabs.forEach((tab) => {
          const isActive = tab.dataset.defineTab === activeLabel;
          tab.classList.toggle("border-l-2", isActive);
          tab.classList.toggle("border-[#004895]", isActive);
          tab.classList.toggle("font-bold", isActive);
          tab.classList.toggle("border-l", !isActive);
          tab.classList.toggle("border-[#d8e7fb]", !isActive);
        });
        defineParametersPanels.forEach((panel) => {
          panel.classList.toggle(
            "hidden",
            panel.dataset.definePanel !== activeLabel
          );
        });
      };

      const getDefineTabBadge = (tab) =>
        tab?.querySelector("span:last-child");

      const registerFacilityRow = (input, checkbox) => {
        if (!input || !checkbox) {
          return;
        }
        checkbox.addEventListener("change", () => {
          input.disabled = !checkbox.checked;
          if (!checkbox.checked) {
            input.value = input.dataset.default || "46";
          }
          updateDefineChangeCounts();
        });
        registerDefineInput(checkbox);
        registerDefineInput(input);
      };

      const registerDefineInput = (input) => {
        if (!input) {
          return;
        }
        if (input.type === "checkbox") {
          if (input.dataset.initialChecked === undefined) {
            input.dataset.initialChecked = input.checked ? "true" : "false";
          }
          input.addEventListener("change", updateDefineChangeCounts);
          return;
        }
        if (input.dataset.initialValue === undefined) {
          const defaultValue = input.dataset.default ?? input.value;
          input.dataset.initialValue = defaultValue;
        }
        input.addEventListener("input", updateDefineChangeCounts);
      };

      const initDefineChangeTracking = () => {
        defineParametersPanels.forEach((panel) => {
          panel.querySelectorAll("input").forEach((input) => {
            registerDefineInput(input);
          });
        });
      };

      const updateDefineChangeCounts = () => {
        defineParametersPanels.forEach((panel) => {
          let changes = 0;
          panel.querySelectorAll("input").forEach((input) => {
            if (input.type === "checkbox") {
              const initialChecked = input.dataset.initialChecked === "true";
              if (input.checked !== initialChecked) {
                changes += 1;
              }
              return;
            }
            const initialValue = input.dataset.initialValue ?? "";
            if (input.value !== initialValue) {
              changes += 1;
            }
          });
          const tab = defineParametersTabs.find(
            (candidate) =>
              candidate.dataset.defineTab === panel.dataset.definePanel
          );
          const badge = getDefineTabBadge(tab);
          if (badge) {
            badge.textContent = `${changes} changes`;
          }
        });
      };

      defineParametersTabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          setDefineParametersActiveTab(tab.dataset.defineTab);
        });
      });
      setDefineParametersActiveTab("Facilities");

      outputTabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          setOutputTab(tab.dataset.outputTab);
        });
      });

      const existingFacilitiesTable = document.querySelector(
        ".define-parameters-tab[data-define-tab='Facilities']"
      );
      const existingFacilitiesReset = document.getElementById(
        "existing-facilities-reset"
      );
      const facilityRows = Array.from(
        document.querySelectorAll(".facility-input")
      ).map((input) => ({
        input,
        checkbox: input
          .closest(".grid")
          .querySelector("input.table-checkbox"),
      }));

      facilityRows.forEach(({ input, checkbox }) => {
        registerFacilityRow(input, checkbox);
      });

      if (existingFacilitiesReset) {
        existingFacilitiesReset.addEventListener("click", () => {
          facilityRows.forEach(({ input, checkbox }) => {
            input.value = input.dataset.default || "46";
            if (checkbox) {
              input.disabled = !checkbox.checked;
            }
          });
          updateDefineChangeCounts();
        });
      }

      const laborTables = Array.from(
        document.querySelectorAll("[data-define-table]")
      );
      const updateServiceDeliveryColumn = () => {
        const serviceTable = document.querySelector(
          "[data-define-table='service-standards']"
        );
        if (!serviceTable) {
          return;
        }
        const headerRow = serviceTable.querySelector(".table-header");
        const rows = Array.from(
          serviceTable.querySelectorAll(".divide-y > .grid")
        );
        const hideDelivery = Boolean(serviceDeliveryActuals?.checked);
        const fullColumns =
          "120px 160px 160px 140px 140px 120px 120px";
        const hiddenColumns =
          "120px 160px 160px 140px 120px 120px";

        if (headerRow) {
          headerRow.style.gridTemplateColumns = hideDelivery
            ? hiddenColumns
            : fullColumns;
          const headerCell = headerRow.children[3];
          if (headerCell) {
            headerCell.classList.toggle("hidden", hideDelivery);
          }
        }

        rows.forEach((row) => {
          row.style.gridTemplateColumns = hideDelivery
            ? hiddenColumns
            : fullColumns;
          const cell = row.children[3];
          if (cell) {
            cell.classList.toggle("hidden", hideDelivery);
          }
        });
      };
      const syncLaborDefaults = () => {
        laborTables.forEach((table) => {
          table.querySelectorAll(".facility-input").forEach((input) => {
            const defaultLabel = input.parentElement?.querySelector("div");
            if (!defaultLabel) {
              return;
            }
            const match = defaultLabel.textContent.match(/Default:\s*(.*)/i);
            if (!match) {
              return;
            }
            const defaultValue = match[1].trim();
            input.dataset.default = defaultValue;
            input.value = defaultValue;
          });
        });
      };

      syncLaborDefaults();

      initDefineChangeTracking();
      updateDefineChangeCounts();

      if (serviceDeliveryActuals || serviceDeliveryStandards) {
        serviceDeliveryActuals?.addEventListener(
          "change",
          updateServiceDeliveryColumn
        );
        serviceDeliveryStandards?.addEventListener(
          "change",
          updateServiceDeliveryColumn
        );
        updateServiceDeliveryColumn();
      }

      const assetRows = Array.from(document.querySelectorAll(".asset-row")).map(
        (row) => ({
          row,
          checkbox: row.querySelector(".asset-checkbox"),
          inputs: Array.from(row.querySelectorAll(".facility-input")),
        })
      );
      const syncAssetRows = () => {
        assetRows.forEach(({ checkbox, inputs }) => {
          if (!checkbox) return;
          const isDisabled = !checkbox.checked;
          inputs.forEach((input) => {
            input.disabled = isDisabled;
          });
        });
      };

      assetRows.forEach(({ checkbox }) => {
        if (!checkbox) return;
        checkbox.addEventListener("change", syncAssetRows);
      });
      syncAssetRows();

      document.querySelectorAll("[data-reset-default]").forEach((button) => {
        button.addEventListener("click", () => {
          const target = button.dataset.resetDefault;
          const table = document.querySelector(
            `[data-define-table="${target}"]`
          );
          if (!table) {
            return;
          }
          table.querySelectorAll(".facility-input").forEach((input) => {
            if (input.dataset.default !== undefined) {
              input.value = input.dataset.default;
            }
          });
          if (target === "assets") {
            syncAssetRows();
          }
        });
      });

      function createScenario(scenario) {
        scenarios.unshift({ ...scenario, owner: currentUser });
        workspacePage = 1;
        renderTable();
      }

      function getVisibleScenarios() {
        if (activeTab === "mine") {
          return scenarios.filter((scenario) => scenario.owner === currentUser);
        }
        return scenarios;
      }

      function statusBadge(status) {
        if (status === "In progress") {
          return "bg-[#95d7fe]";
        }
        if (status === "Draft") {
          return "bg-[#cdcdcd]";
        }
        return "bg-[#98e492]";
      }

      function renderDateCell(scenario) {
        if (scenario.runningTime) {
          return `
            <div class="px-2">
              <div class="text-[14px] font-bold text-[#0662c4]">
                ${scenario.runningTime}
              </div>
              <div class="text-[14px] font-bold uppercase text-[#4b4b4b]">
                ELAPSE TIME
              </div>
            </div>
          `;
        }
        return `<div class="px-2 text-[14px]">${scenario.dateModified}</div>`;
      }

      function renderRow(scenario) {
        return `
          <div
            class="table-row grid min-h-[48px] grid-cols-[32px_120px_1fr_120px_140px_120px_1fr_120px] items-center bg-white py-2"
            data-status="${scenario.status}"
          >
            <div class="flex items-center justify-center">
              <input type="checkbox" class="table-checkbox row-checkbox" />
            </div>
            <div class="px-2 text-[14px] text-[#004895]">
              <button
                class="scenario-link font-bold text-[#004895]"
                type="button"
                data-scenario-id="${scenario.id}"
              >
                ${scenario.id}
              </button>
            </div>
            <div class="px-2 text-[14px]">${scenario.description}</div>
            <div class="px-2 text-[14px]">${scenario.portfolio}</div>
            <div class="px-2 text-[14px]">${scenario.owner}</div>
            <div class="px-2">
              <span
                class="font-inter inline-flex h-6 items-center rounded ${statusBadge(
                  scenario.status
                )} px-2 text-[12px] leading-[20px] text-black"
              >
                ${scenario.status}
              </span>
            </div>
            ${renderDateCell(scenario)}
            <div class="px-2 text-[14px]">${scenario.ptsImpact}</div>
          </div>
        `;
      }

      function applyFilters(list) {
        const portfolioSet = filters.portfolio.selected;
        const statusSet = filters.status.selected;
        return list.filter((scenario) => {
          const portfolioPass =
            portfolioSet.size === 0 || portfolioSet.has(scenario.portfolio);
          const statusPass =
            statusSet.size === 0 || statusSet.has(scenario.status);
          return portfolioPass && statusPass;
        });
      }

      function applyDraftState(draftState) {
        const fallbackStart = periodOptions[0] || "";
        const fallbackEnd = periodOptions[1] || periodOptions[0] || "";
        startDateSelected = draftState.startDateSelected || fallbackStart;
        endDateSelected = draftState.endDateSelected || fallbackEnd;
        portfolioSelected = draftState.portfolioSelected || "Foods and Beverages";
        startDateValue.textContent = startDateSelected;
        endDateValue.textContent = endDateSelected;
        portfolioSelectValue.textContent = portfolioSelected;
        if (draftState.hasFile) {
          showUploadedFile();
        } else {
          clearUploadedFile();
        }
        updateViewBaselineState();
        setDefineParametersActiveTab(draftState.defineTab || "Facilities");
        updateDefineChangeCounts();
        setView(draftState.lastView || "scenario");
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function openDraftScenario(scenario) {
        const draftState =
          scenario.draftState || {
            startDateSelected: periodOptions[0] || "",
            endDateSelected: periodOptions[1] || periodOptions[0] || "",
            portfolioSelected: "Foods and Beverages",
            hasFile: true,
            lastView: "define-parameters",
            defineTab: "Facilities",
          };
        applyDraftState(draftState);
      }

      const setOutputTab = (activeTab) => {
        outputTabs.forEach((tab) => {
          const isActive = tab.dataset.outputTab === activeTab;
          tab.classList.toggle("border-b-2", true);
          tab.classList.toggle("border-[#004895]", isActive);
          tab.classList.toggle("border-transparent", !isActive);
          tab.classList.toggle("text-[#004895]", isActive);
          tab.classList.toggle("text-[#4b4b4b]", !isActive);
          tab.classList.toggle("font-bold", isActive);
        });
        outputPanels.forEach((panel) => {
          panel.classList.toggle(
            "hidden",
            panel.dataset.outputPanel !== activeTab
          );
        });
      };

      const openOutputScenario = (scenario) => {
        renderOutputScenario(scenario);
        setView("output");
      };

      function updateChipCounts() {
        const portfolioCountValueNumber = filters.portfolio.selected.size;
        const statusCountValueNumber = filters.status.selected.size;
        const portfolioIsFiltered = portfolioCountValueNumber > 0;
        const statusIsFiltered = statusCountValueNumber > 0;
        portfolioCountValue.textContent = portfolioCountValueNumber;
        statusCountValue.textContent = statusCountValueNumber;
        portfolioCount.classList.toggle("hidden", !portfolioIsFiltered);
        statusCount.classList.toggle("hidden", !statusIsFiltered);
        portfolioChip.classList.toggle("filter-chip-active", portfolioIsFiltered);
        statusChip.classList.toggle("filter-chip-active", statusIsFiltered);
      }

      function getWorkspacePagination(list) {
        const totalPages = Math.max(
          1,
          Math.ceil(list.length / WORKSPACE_PAGE_SIZE)
        );
        if (workspacePage > totalPages) {
          workspacePage = totalPages;
        }
        if (workspacePage < 1) {
          workspacePage = 1;
        }
        const startIndex = (workspacePage - 1) * WORKSPACE_PAGE_SIZE;
        return {
          totalPages,
          pageItems: list.slice(startIndex, startIndex + WORKSPACE_PAGE_SIZE),
        };
      }

      function updateWorkspacePaginationUI(totalPages) {
        if (workspacePageCurrent) {
          workspacePageCurrent.textContent = workspacePage;
        }
        if (workspacePageTotal) {
          workspacePageTotal.textContent = totalPages;
        }
        const isFirst = workspacePage <= 1;
        const isLast = workspacePage >= totalPages;
        workspaceFirstPage?.toggleAttribute("disabled", isFirst);
        workspacePrevPage?.toggleAttribute("disabled", isFirst);
        workspaceNextPage?.toggleAttribute("disabled", isLast);
        workspaceLastPage?.toggleAttribute("disabled", isLast);
      }

      function renderTable() {
        const visibleScenarios = applyFilters(getVisibleScenarios());
        const { pageItems, totalPages } = getWorkspacePagination(
          visibleScenarios
        );
        tableBody.innerHTML = pageItems.map(renderRow).join("");
        totalCount.textContent = pageItems.length;
        bindSelectionHandlers();
        updateSelectionState();
        updateChipCounts();
        updateWorkspacePaginationUI(totalPages);
      }

      tableBody.addEventListener("click", (event) => {
        const link = event.target.closest("[data-scenario-id]");
        if (!link) {
          return;
        }
        const scenario = scenarios.find((item) => item.id === link.dataset.scenarioId);
        if (!scenario) {
          return;
        }
        if (scenario.status === "Draft") {
          openDraftScenario(scenario);
          return;
        }
        if (scenario.status === "Completed") {
          openOutputScenario(scenario);
        }
      });

      workspaceFirstPage?.addEventListener("click", () => {
        workspacePage = 1;
        renderTable();
      });
      workspacePrevPage?.addEventListener("click", () => {
        workspacePage = Math.max(1, workspacePage - 1);
        renderTable();
      });
      workspaceNextPage?.addEventListener("click", () => {
        workspacePage += 1;
        renderTable();
      });
      workspaceLastPage?.addEventListener("click", () => {
        const totalPages = Math.max(
          1,
          Math.ceil(applyFilters(getVisibleScenarios()).length / WORKSPACE_PAGE_SIZE)
        );
        workspacePage = totalPages;
        renderTable();
      });

      function setActiveTab(tab) {
        activeTab = tab;
        tabAll.classList.toggle("border-[#004895]", tab === "all");
        tabAll.classList.toggle("font-bold", tab === "all");
        tabMy.classList.toggle("border-[#004895]", tab === "mine");
        tabMy.classList.toggle("font-bold", tab === "mine");
        tabAll.classList.toggle("border-b-2", tab === "all");
        tabMy.classList.toggle("border-b-2", tab === "mine");
        tabAll.classList.toggle("border-b", tab !== "all");
        tabMy.classList.toggle("border-b", tab !== "mine");
        tabAll.classList.toggle("border-[#d8e7fb]", tab !== "all");
        tabMy.classList.toggle("border-[#d8e7fb]", tab !== "mine");
        clearSelections();
        renderTable();
      }

      function buildOptionRow(name, group, isAllOption = false) {
        const optionId = `${group}-${name.replace(/\s+/g, "-")}`;
        return `
          <label class="flex items-center gap-2 px-1 py-1">
            <input
              id="${optionId}"
              type="checkbox"
              class="filter-checkbox"
              data-group="${group}"
              data-option="${name}"
              data-all="${isAllOption ? "true" : "false"}"
            />
            <span>${name}</span>
          </label>
        `;
      }

      function renderFilterOptions(group) {
        const config = filters[group];
        const searchTerm =
          group === "portfolio"
            ? portfolioSearch.value.trim().toLowerCase()
            : statusSearch.value.trim().toLowerCase();
        const container = group === "portfolio" ? portfolioOptions : statusOptions;
        const allOption = buildOptionRow("All options", group, true);
        const options = config.options
          .filter((option) => option.toLowerCase().includes(searchTerm))
          .map((option) => buildOptionRow(option, group))
          .join("");
        container.innerHTML = allOption + options;

        const allCheckbox = container.querySelector(
          `input[data-group="${group}"][data-all="true"]`
        );
        const optionCheckboxes = Array.from(
          container.querySelectorAll(
            `input[data-group="${group}"][data-all="false"]`
          )
        );
        const selectedSet = config.draft;
        optionCheckboxes.forEach((checkbox) => {
          checkbox.checked = selectedSet.has(checkbox.dataset.option);
        });
        if (selectedSet.size === 0) {
          allCheckbox.checked = true;
          allCheckbox.indeterminate = false;
        } else if (selectedSet.size === optionCheckboxes.length) {
          allCheckbox.checked = true;
          allCheckbox.indeterminate = false;
        } else {
          allCheckbox.checked = false;
          allCheckbox.indeterminate = true;
        }

        allCheckbox.addEventListener("change", () => {
          if (allCheckbox.checked) {
            config.draft.clear();
            optionCheckboxes.forEach((box) => (box.checked = false));
          }
        });

        optionCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", () => {
            if (checkbox.checked) {
              config.draft.add(checkbox.dataset.option);
            } else {
              config.draft.delete(checkbox.dataset.option);
            }
            if (config.draft.size === 0) {
              allCheckbox.checked = true;
              allCheckbox.indeterminate = false;
            } else if (config.draft.size === optionCheckboxes.length) {
              allCheckbox.checked = true;
              allCheckbox.indeterminate = false;
            } else {
              allCheckbox.checked = false;
              allCheckbox.indeterminate = true;
            }
          });
        });
      }

      function openMenu(menu, group) {
        if (menu.classList.contains("hidden")) {
          filters[group].draft = new Set(filters[group].selected);
          renderFilterOptions(group);
          menu.classList.remove("hidden");
        } else {
          menu.classList.add("hidden");
        }
      }

      function closeMenus() {
        portfolioMenu.classList.add("hidden");
        statusMenu.classList.add("hidden");
      }

      function setDateFieldActive(field, isActive) {
        field.classList.toggle("border-2", isActive);
        field.classList.toggle("border-[#0662c4]", isActive);
        field.classList.toggle("border", !isActive);
        field.classList.toggle("border-[#c0c0c0]", !isActive);
      }

      function renderPeriodMenu(menu, selectedLabel) {
        if (!periodOptions.length) {
          menu.innerHTML =
            '<div class="px-2 py-1 text-[12px] text-[#4b4b4b]">No periods available</div>';
          return;
        }

        menu.innerHTML = periodOptions
          .map((label, index) => {
            const isSelected = label === selectedLabel;
            const borderClass =
              index === periodOptions.length - 1 ? "" : "border-b border-[#d8e7fb]";
            const checkOpacity = isSelected ? "opacity-100" : "opacity-0";
            return `
              <div
                class="flex items-center gap-2 px-1 py-1 ${borderClass} cursor-pointer"
                data-value="${label}"
              >
                <span class="flex-1">${label}</span>
                <span class="material-icons text-[16px] text-[#004895] ${checkOpacity}">
                  check
                </span>
              </div>
            `;
          })
          .join("");
      }

      const portfolioSelectOptions = ["Foods and Beverages", "Foods", "Beverages"];
      let portfolioSelected = "";
      let selectionsApplied = false;
      const stateOptions = [
        "Alabama",
        "Alaska",
        "Arizona",
        "Arkansas",
        "California",
        "Colorado",
        "Connecticut",
        "Delaware",
        "Florida",
        "Georgia",
        "Hawaii",
        "Idaho",
        "Illinois",
        "Indiana",
        "Iowa",
        "Kansas",
        "Kentucky",
        "Louisiana",
        "Maine",
        "Maryland",
        "Massachusetts",
        "Michigan",
        "Minnesota",
        "Mississippi",
        "Missouri",
        "Montana",
        "Nebraska",
        "Nevada",
        "New Hampshire",
        "New Jersey",
        "New Mexico",
        "New York",
        "North Carolina",
        "North Dakota",
        "Ohio",
        "Oklahoma",
        "Oregon",
        "Pennsylvania",
        "Rhode Island",
        "South Carolina",
        "South Dakota",
        "Tennessee",
        "Texas",
        "Utah",
        "Vermont",
        "Virginia",
        "Washington",
        "West Virginia",
        "Wisconsin",
        "Wyoming",
      ];
      const selectedStates = new Set();
      const foodLocationTemplates = [
        "Food DC",
        "Produce Hub",
        "Cold Storage",
        "Fresh Facility",
        "Regional Warehouse",
      ];
      const beverageLocationTemplates = [
        "Beverage DC",
        "Bottling Facility",
        "Keg Depot",
        "Cold Beverage Hub",
        "Beverage Warehouse",
      ];
      const foodBeverageLocationTemplates = [
        "Foods & Bevs Hub",
        "Mixed Distribution Center",
        "Combined Warehouse",
        "Mixed Facility",
        "Foods & Bevs Plant",
      ];
      const selectedFoodLocations = new Set();
      const selectedBeverageLocations = new Set();
      const selectedFoodBeverageLocations = new Set();

      function startScenarioSession() {
        scenarioSessionId += 1;
        currentBaselineData = null;
        startDateSelected = "";
        endDateSelected = "";
        portfolioSelected = "";
        selectionsApplied = false;
        selectedStates.clear();
        selectedFoodLocations.clear();
        selectedBeverageLocations.clear();
        selectedFoodBeverageLocations.clear();
        startDateValue.textContent = "";
        endDateValue.textContent = "";
        portfolioSelectValue.textContent = "";
        stateSelectValue.value = "";
        stateSelectValue.placeholder = "Select";
        foodLocationValue.value = "";
        foodLocationValue.placeholder = "Select";
        beverageLocationValue.value = "";
        beverageLocationValue.placeholder = "Select";
        foodBeverageLocationValue.value = "";
        foodBeverageLocationValue.placeholder = "Select";
        if (mapImage) {
          mapImage.src = "./map1.png";
        }
        renderMapMarkers();
        updateStateSelectValue();
        updateLocationSelectValues();
        updateLocationSelectState();
        clearUploadedFile();
        closeDateMenus();
        closePortfolioSelectMenu();
        closeStateSelectMenu();
        closeLocationMenus();
        setDefineScopeTab("select");
        updateViewBaselineState();
        setView("scenario");
      }

      function updateViewBaselineState() {
        const hasFile = !uploadedFile.classList.contains("hidden");
        const hasStartDate = Boolean(startDateSelected.trim());
        const hasEndDate = Boolean(endDateSelected.trim());
        const hasPortfolio = Boolean(portfolioSelected.trim());
        const hasScope = hasFile || selectionsApplied;
        const isReady = hasScope && hasStartDate && hasEndDate && hasPortfolio;

        viewBaselineButton.disabled = !isReady;
        viewBaselineButton.classList.toggle("bg-[#004895]", isReady);
        viewBaselineButton.classList.toggle("text-white", isReady);
        viewBaselineButton.classList.toggle("hover:bg-[#002B5E]", isReady);
        viewBaselineButton.classList.toggle("bg-[#dadada]", !isReady);
        viewBaselineButton.classList.toggle("text-[#b1b1b1]", !isReady);
        viewBaselineButton.classList.toggle("cursor-not-allowed", !isReady);
      }

      function renderPortfolioMenu() {
        portfolioSelectMenu.innerHTML = portfolioSelectOptions
          .map((label, index) => {
            const isSelected = label === portfolioSelected;
            const borderClass =
              index === portfolioSelectOptions.length - 1
                ? ""
                : "border-b border-[#d8e7fb]";
            const checkOpacity = isSelected ? "opacity-100" : "opacity-0";
            return `
              <div
                class="flex items-center gap-2 px-1 py-1 ${borderClass} cursor-pointer"
                data-value="${label}"
              >
                <span class="flex-1">${label}</span>
                <span class="material-icons text-[16px] text-[#004895] ${checkOpacity}">
                  check
                </span>
              </div>
            `;
          })
          .join("");
      }

      function updateStateSelectValue() {
        const selections = Array.from(selectedStates);
        const summary = selections.length
          ? selections.length === 1
            ? selections[0]
            : `${selections.length} selected`
          : "Select";
        stateSelectValue.placeholder = summary;
        if (stateSelectMenu.classList.contains("hidden")) {
          stateSelectValue.value = summary === "Select" ? "" : summary;
        }
        if (!selections.length) {
          return;
        }
        if (selections.length === 1) {
          return;
        }
      }

      function updateLocationSelectValues() {
        updateLocationValue(
          selectedFoodLocations,
          foodLocationValue,
          foodLocationMenu
        );
        updateLocationValue(
          selectedBeverageLocations,
          beverageLocationValue,
          beverageLocationMenu
        );
        updateLocationValue(
          selectedFoodBeverageLocations,
          foodBeverageLocationValue,
          foodBeverageLocationMenu
        );
        updateApplySelectionsState();
      }

      function updateLocationValue(selections, target, menu) {
        const values = Array.from(selections);
        const summary = values.length
          ? values.length === 1
            ? values[0]
            : `${values.length} selected`
          : "Select";
        target.placeholder = summary;
        if (menu && !menu.classList.contains("hidden")) {
          return;
        }
        target.value = summary === "Select" ? "" : summary;
        if (!values.length) {
          return;
        }
        if (values.length === 1) {
          return;
        }
      }

      function updateApplySelectionsState() {
        const hasSelection =
          selectedFoodLocations.size > 0 ||
          selectedBeverageLocations.size > 0 ||
          selectedFoodBeverageLocations.size > 0;
        applySelectionsButton.disabled = !hasSelection;
        applySelectionsButton.classList.toggle("bg-[#004895]", hasSelection);
        applySelectionsButton.classList.toggle("text-white", hasSelection);
        applySelectionsButton.classList.toggle("hover:bg-[#002B5E]", hasSelection);
        applySelectionsButton.classList.toggle("bg-[#dadada]", !hasSelection);
        applySelectionsButton.classList.toggle("text-[#b1b1b1]", !hasSelection);
        applySelectionsButton.classList.toggle("cursor-not-allowed", !hasSelection);
      }

      function getLocationOptions(templates) {
        const states = Array.from(selectedStates);
        return states.flatMap((state) =>
          templates.map((template) => ({
            label: `${state} ${template}`,
            state,
          }))
        );
      }

      function renderMapMarkers(shapeMode = "mixed") {
        const mapMarkers = document.getElementById("map-markers");
        if (!mapMarkers) {
          return;
        }
        mapMarkers.innerHTML = "";
        const colors = ["#E5BB08", "#0662C4", "#027C06"];
        const markerCount = 100;
        let created = 0;
        let attempts = 0;
        while (created < markerCount && attempts < 1200) {
          const left = 5 + Math.random() * 90;
          const top = 6 + Math.random() * 78;
          if (left < 28 && top < 22) {
            attempts += 1;
            continue;
          }
          const color = colors[Math.floor(Math.random() * colors.length)];
          const shape =
            shapeMode === "circle"
              ? "circle"
              : ["diamond", "triangle", "square"][
                  Math.floor(Math.random() * 3)
                ];
          mapMarkers.insertAdjacentHTML(
            "beforeend",
            getMarkerSvg(shape, color, left, top)
          );
          created += 1;
          attempts += 1;
        }
      }

      function getMarkerSvg(shape, color, left, top) {
        const position = `left:${left.toFixed(1)}%; top:${top.toFixed(1)}%;`;
        if (shape === "triangle") {
          return `
            <svg class="absolute" style="${position}" width="12" height="12" viewBox="0 0 12 12">
              <polygon points="6,1 11,10.5 1,10.5" fill="${color}" stroke="#000" stroke-width="1" />
            </svg>
          `;
        }
        if (shape === "square") {
          return `
            <svg class="absolute" style="${position}" width="12" height="12" viewBox="0 0 12 12">
              <rect x="1.5" y="1.5" width="9" height="9" fill="${color}" stroke="#000" stroke-width="1" />
            </svg>
          `;
        }
        if (shape === "circle") {
          return `
            <svg class="absolute" style="${position}" width="12" height="12" viewBox="0 0 12 12">
              <circle cx="6" cy="6" r="4.5" fill="${color}" stroke="#000" stroke-width="1" />
            </svg>
          `;
        }
        return `
          <svg class="absolute" style="${position}" width="12" height="12" viewBox="0 0 12 12">
            <rect x="2" y="2" width="8" height="8" fill="${color}" stroke="#000" stroke-width="1" transform="rotate(45 6 6)" />
          </svg>
        `;
      }

      function renderLocationOptions(
        list,
        selections,
        target,
        filterValue = ""
      ) {
        const query = filterValue.trim().toLowerCase();
        const visibleItems = list.filter((item) =>
          item.label.toLowerCase().includes(query)
        );
        target.innerHTML = "";
        if (!visibleItems.length) {
          const empty = document.createElement("div");
          empty.className = "px-2 py-1 text-[12px] text-[#4b4b4b]";
          empty.textContent = "No locations found";
          target.appendChild(empty);
          return;
        }
        visibleItems.forEach((item) => {
          const row = document.createElement("label");
          row.className =
            "flex items-center gap-2 rounded px-2 py-1 hover:bg-[#f5f9ff] cursor-pointer";
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.value = item.label;
          checkbox.className = "h-4 w-4 accent-[#004895]";
          checkbox.checked = selections.has(item.label);
          const label = document.createElement("span");
          label.textContent = item.label;
          row.append(checkbox, label);
          target.appendChild(row);

          checkbox.addEventListener("change", () => {
            if (checkbox.checked) {
              selections.add(item.label);
            } else {
              selections.delete(item.label);
            }
            updateLocationSelectValues();
          });
        });
      }

      function setLocationSelectEnabled(field, label, icon, chevron, isEnabled) {
        field.setAttribute("aria-disabled", String(!isEnabled));
        field.setAttribute("tabindex", isEnabled ? "0" : "-1");
        const input = field.querySelector("input");
        if (input) {
          input.disabled = !isEnabled;
        }
        field.classList.toggle("bg-white", isEnabled);
        field.classList.toggle("border-[#c0c0c0]", isEnabled);
        field.classList.toggle("text-[#4b4b4b]", isEnabled);
        field.classList.toggle("cursor-pointer", isEnabled);
        field.classList.toggle("pointer-events-none", !isEnabled);
        field.classList.toggle("bg-[#efefef]", !isEnabled);
        field.classList.toggle("border-[#dadada]", !isEnabled);
        field.classList.toggle("text-[#b1b1b1]", !isEnabled);
        label.classList.toggle("text-[#4b4b4b]", isEnabled);
        label.classList.toggle("text-[#b1b1b1]", !isEnabled);
        icon.classList.toggle("text-[#4b4b4b]", isEnabled);
        icon.classList.toggle("text-[#b1b1b1]", !isEnabled);
        chevron.classList.toggle("text-[#4b4b4b]", isEnabled);
        chevron.classList.toggle("text-[#b1b1b1]", !isEnabled);
      }

      function updateLocationSelectState() {
        const isEnabled =
          selectedStates.size > 0 &&
          Boolean(startDateSelected.trim()) &&
          Boolean(endDateSelected.trim()) &&
          Boolean(portfolioSelected.trim());
        setLocationSelectEnabled(
          foodLocationField,
          foodLocationLabel,
          foodLocationIcon,
          foodLocationChevron,
          isEnabled
        );
        setLocationSelectEnabled(
          beverageLocationField,
          beverageLocationLabel,
          beverageLocationIcon,
          beverageLocationChevron,
          isEnabled
        );
        setLocationSelectEnabled(
          foodBeverageLocationField,
          foodBeverageLocationLabel,
          foodBeverageLocationIcon,
          foodBeverageLocationChevron,
          isEnabled
        );
        if (!isEnabled) {
          selectedFoodLocations.clear();
          selectedBeverageLocations.clear();
          selectedFoodBeverageLocations.clear();
          updateLocationSelectValues();
        }
      }

      function renderStateOptions(filterValue = "") {
        const query = filterValue.trim().toLowerCase();
        const visibleStates = stateOptions.filter((state) =>
          state.toLowerCase().includes(query)
        );
        stateSelectOptions.innerHTML = "";
        if (!visibleStates.length) {
          const empty = document.createElement("div");
          empty.className = "px-2 py-1 text-[12px] text-[#4b4b4b]";
          empty.textContent = "No states found";
          stateSelectOptions.appendChild(empty);
          return;
        }
        visibleStates.forEach((state) => {
          const row = document.createElement("label");
          row.className =
            "flex items-center gap-2 rounded px-2 py-1 hover:bg-[#f5f9ff] cursor-pointer";
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.value = state;
          checkbox.className = "h-4 w-4 accent-[#004895]";
          checkbox.checked = selectedStates.has(state);
          const label = document.createElement("span");
          label.textContent = state;
          row.append(checkbox, label);
          stateSelectOptions.appendChild(row);

          checkbox.addEventListener("change", () => {
            if (checkbox.checked) {
              selectedStates.add(state);
            } else {
              selectedStates.delete(state);
            }
            updateStateSelectValue();
            updateLocationSelectState();
            if (!foodLocationMenu.classList.contains("hidden")) {
              renderLocationOptions(
                getLocationOptions(foodLocationTemplates),
                selectedFoodLocations,
                foodLocationOptions,
                foodLocationValue.value
              );
            }
            if (!beverageLocationMenu.classList.contains("hidden")) {
              renderLocationOptions(
                getLocationOptions(beverageLocationTemplates),
                selectedBeverageLocations,
                beverageLocationOptions,
                beverageLocationValue.value
              );
            }
            if (!foodBeverageLocationMenu.classList.contains("hidden")) {
              renderLocationOptions(
                getLocationOptions(foodBeverageLocationTemplates),
                selectedFoodBeverageLocations,
                foodBeverageLocationOptions,
                foodBeverageLocationValue.value
              );
            }
            if (selectedStates.size === 0) {
              closeLocationMenus();
            }
          });
        });
      }

      function setUploadButtonDisabled(isDisabled) {
        uploadFileButton.disabled = isDisabled;
        uploadFileButton.classList.toggle("cursor-not-allowed", isDisabled);
        uploadFileButton.classList.toggle("border-[#d8e7fb]", isDisabled);
        uploadFileButton.classList.toggle("text-[#b1b1b1]", isDisabled);
        uploadFileButton.classList.toggle("hover:border-[#002B5E]", !isDisabled);
        uploadFileButton.classList.toggle("hover:text-[#002B5E]", !isDisabled);
        uploadFileButton.classList.toggle("border-[#004895]", !isDisabled);
        uploadFileButton.classList.toggle("text-[#004895]", !isDisabled);
        uploadDropzone.classList.toggle("opacity-60", isDisabled);
        uploadDropzone.classList.toggle("pointer-events-none", isDisabled);
      }

      function showUploadedFile() {
        uploadedFileName.textContent = fakeUploadedFileName;
        uploadedFile.classList.remove("hidden");
        setUploadButtonDisabled(true);
        updateViewBaselineState();
      }

      function clearUploadedFile() {
        uploadedFile.classList.add("hidden");
        setUploadButtonDisabled(false);
        updateViewBaselineState();
      }

      function triggerFakeDownload() {
        const blob = new Blob([fakeUploadedFileName], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = "select-design-is-figma.txt";
        document.body.appendChild(link);
        link.click();
        link.remove();
        URL.revokeObjectURL(url);
      }

      function createSeededRandom(seed) {
        let value = seed || 1;
        return () => {
          value += 0x6D2B79F5;
          let result = Math.imul(value ^ (value >>> 15), 1 | value);
          result ^= result + Math.imul(result ^ (result >>> 7), 61 | result);
          return ((result ^ (result >>> 14)) >>> 0) / 4294967296;
        };
      }

      function formatCurrency(value, decimals = 0) {
        return new Intl.NumberFormat("en-US", {
          style: "currency",
          currency: "USD",
          maximumFractionDigits: decimals,
          minimumFractionDigits: decimals,
        }).format(value);
      }

      function formatNumber(value) {
        return new Intl.NumberFormat("en-US").format(value);
      }

      function formatPercent(value) {
        return `${value.toFixed(1)}%`;
      }

      function formatMillions(value) {
        return `${value.toFixed(1)}MM`;
      }

      function formatMoneyMillions(value) {
        return `$${value.toFixed(1)}MM`;
      }

      function formatSigned(value, suffix = "") {
        const sign = value >= 0 ? "+" : "-";
        return `${sign}${Math.abs(value).toFixed(2)}${suffix}`;
      }

      function formatSignedInt(value) {
        const sign = value >= 0 ? "+" : "-";
        return `${sign}${Math.abs(Math.round(value))}`;
      }

      function buildOutputData(scenario) {
        const seed = Number(String(scenario.id).replace(/\D/g, "")) || 1;
        const random = createSeededRandom(seed);
        const randomBetween = (min, max) => min + random() * (max - min);

        const totalSavings = randomBetween(0.8, 3.5);
        const improvement = randomBetween(8, 15);
        const reduction = randomBetween(10, 14);
        const laborSavings = randomBetween(0.6, 1.6);
        const headcountReduction = Math.round(randomBetween(6, 12));
        const fleetReduction = Math.round(randomBetween(8, 14));
        const revenueBoost = randomBetween(18, 28);
        const revenuePerDrop = Math.round(randomBetween(1200, 1500));

        const startValue = randomBetween(2.0, 4.5);
        const stepLabels = [
          "Wage Arbitrage",
          "Selling Labor Efficiency",
          "Frontline Management",
          "Delivery Fleet Miles Driven",
          "Personal Mileage",
          "Number of Assets",
          "Asset Operating Costs",
        ];
        const rawSteps = [
          randomBetween(0.2, 0.6),
          -randomBetween(0.08, 0.25),
          randomBetween(0.15, 0.45),
          randomBetween(0.25, 0.7),
          randomBetween(0.05, 0.2),
          randomBetween(0.05, 0.2),
          randomBetween(0.2, 0.6),
        ];
        const rawSum = rawSteps.reduce((sum, value) => sum + value, 0);
        const scale = totalSavings / rawSum;
        const steps = rawSteps.map((value, index) => ({
          label: stepLabels[index],
          value: value * scale,
        }));

        const endValue = startValue + steps.reduce((sum, step) => sum + step.value, 0);

        return {
          timeline: "P01 2025 - P13 2025",
          stores: Math.round(randomBetween(180, 320)),
          annualNr: formatMoneyMillions(randomBetween(12, 22)),
          annualCases: formatMillions(randomBetween(2.5, 4.5)),
          totalSavings: `$${totalSavings.toFixed(2)}M`,
          improvement: `${formatSigned(improvement, "%")} IMPROVEMENT`,
          summaryLine1: `The proposed optimization generates <span class="font-bold text-[#2d2d2d]">$${totalSavings.toFixed(
            2
          )}M in total savings</span>, driven largely by a <span class="font-bold text-[#2d2d2d]">${reduction.toFixed(
            1
          )}% reduction in overall spend</span>. Labor costs are cut by <span class="font-bold text-[#2d2d2d]">$${laborSavings.toFixed(
            2
          )}M</span> through a strategic headcount reduction of ${headcountReduction} positions and role transitions.`,
          summaryLine2: `The fleet is streamlined by ${fleetReduction} units, replacing smaller vans with higher-capacity bulk trucks to improve efficiency. Additionally, improved route sequencing has <span class="font-bold text-[#2d2d2d]">boosted revenue per drop by ${revenueBoost.toFixed(
            1
          )}%</span>, increasing it to $${revenuePerDrop.toLocaleString()}.`,
          cards: [
            { value: `${formatSigned(totalSavings)}M`, delta: "+3.4 points", trend: "up" },
            { value: formatSignedInt(randomBetween(-5, 5)), delta: "-05%", trend: "down" },
            { value: formatSignedInt(randomBetween(-300, -80)), delta: "-00%", trend: "down" },
            { value: formatSignedInt(-headcountReduction), delta: "-5%", trend: "down" },
            { value: formatSignedInt(randomBetween(-5, 5)), delta: "-00%", trend: "down" },
            { value: formatSignedInt(randomBetween(0, 20)), delta: "+00%", trend: "up" },
            { value: `+$${randomBetween(1.5, 3.2).toFixed(2)}`, delta: `+${improvement.toFixed(1)}%`, trend: "up" },
            { value: formatSignedInt(randomBetween(-5, 5)), delta: "-00%", trend: "down" },
          ],
          waterfall: {
            start: startValue,
            steps,
            end: endValue,
          },
          sensitivities: [
            {
              label: "Labor Efficiency (+/- 10%)",
              worse: "($1.5)MM",
              base: "-10%",
              better: "$1.1MM",
              range: "($.3)MM - $3.2MM",
            },
            {
              label: "Wage Rates (+/- 5%)",
              worse: "($0.7)MM",
              base: "-5%",
              better: "$0.7MM",
              range: "$0.5MM - $1.9MM",
            },
          ],
        };
      }

      function renderWaterfall(container, data) {
        if (!container) {
          return;
        }
        const width = Math.max(640, container.getBoundingClientRect().width || 740);
        const height = 220;
        const paddingTop = 10;
        const paddingBottom = 50;
        const chartHeight = height - paddingTop - paddingBottom;
        const steps = [
          { label: "From", value: data.start, type: "total" },
          ...data.steps.map((step) => ({ ...step, type: "delta" })),
          { label: "To", value: data.end, type: "total" },
        ];

        const values = [data.start, data.end];
        let cumulative = data.start;
        data.steps.forEach((step) => {
          cumulative += step.value;
          values.push(cumulative);
        });
        const min = Math.min(...values);
        const max = Math.max(...values);
        const scale = chartHeight / (max - min || 1);
        const baselineY = paddingTop + (max - data.start) * scale;
        const barWidth = Math.max(24, Math.floor((width - 80) / (steps.length * 1.8)));
        const gap = Math.max(18, Math.floor((width - 80 - barWidth * steps.length) / (steps.length - 1)));
        const startX = 20;

        let current = data.start;
        const bars = steps.map((step, index) => {
          const x = startX + index * (barWidth + gap);
          let y;
          let h;
          if (step.type === "total") {
            const topVal = step.value;
            const yTop = paddingTop + (max - topVal) * scale;
            const yBottom = paddingTop + (max - min) * scale;
            y = yTop;
            h = yBottom - yTop;
          } else {
            const next = current + step.value;
            const topVal = Math.max(current, next);
            const bottomVal = Math.min(current, next);
            y = paddingTop + (max - topVal) * scale;
            h = (topVal - bottomVal) * scale;
            current = next;
          }
          const color =
            step.type === "total"
              ? step.label === "To"
                ? "#d9d9d9"
                : "#4b4b4b"
              : step.value >= 0
                ? "#0B7D12"
                : "#C0392B";
          return { x, y, h, color, label: step.label, type: step.type };
        });

        const connectorLines = bars.slice(0, -1).map((bar, index) => {
          const next = bars[index + 1];
          const x1 = bar.x + barWidth;
          const x2 = next.x;
          const y1 = bar.y;
          const y2 = next.y;
          return `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#b1b1b1" stroke-dasharray="3 3" />`;
        });

        const labelLines = (label) => {
          const words = label.split(" ");
          const lines = [];
          let currentLine = "";
          words.forEach((word) => {
            const test = currentLine ? `${currentLine} ${word}` : word;
            if (test.length > 12 && currentLine) {
              lines.push(currentLine);
              currentLine = word;
            } else {
              currentLine = test;
            }
          });
          if (currentLine) {
            lines.push(currentLine);
          }
          return lines.slice(0, 2);
        };

        container.innerHTML = `
          <svg class="h-[${height}px] w-full" viewBox="0 0 ${width} ${height}">
            <line x1="10" y1="${paddingTop + chartHeight}" x2="${width - 10}" y2="${paddingTop + chartHeight}" stroke="#d8e7fb" stroke-width="1" />
            ${bars
              .map(
                (bar) =>
                  `<rect x="${bar.x}" y="${bar.y}" width="${barWidth}" height="${Math.max(
                    2,
                    bar.h
                  )}" fill="${bar.color}" />`
              )
              .join("")}
            ${connectorLines.join("")}
            ${bars
              .map((bar) => {
                const lines = labelLines(bar.label);
                const x = bar.x + barWidth / 2;
                const y = height - 8;
                const tspans = lines
                  .map(
                    (line, idx) =>
                      `<tspan x="${x}" dy="${idx === 0 ? "0" : "12"}">${line}</tspan>`
                  )
                  .join("");
                return `<text x="${x}" y="${y}" text-anchor="middle" font-size="10">${tspans}</text>`;
              })
              .join("")}
          </svg>
        `;
      }

      function renderOutputScenario(scenario) {
        const data = buildOutputData(scenario);
        if (outputScenarioId) outputScenarioId.textContent = scenario.id;
        if (outputScenarioDesc) outputScenarioDesc.textContent = scenario.description;
        if (outputTimeline) outputTimeline.textContent = data.timeline;
        if (outputStores) outputStores.textContent = data.stores;
        if (outputAnnualNr) outputAnnualNr.textContent = data.annualNr;
        if (outputAnnualCases) outputAnnualCases.textContent = data.annualCases;
        if (outputTotalSavings) outputTotalSavings.textContent = `${data.totalSavings} Total Savings`;
        if (outputImprovement) outputImprovement.textContent = data.improvement;
        if (outputSummaryLine1) outputSummaryLine1.innerHTML = data.summaryLine1;
        if (outputSummaryLine2) outputSummaryLine2.innerHTML = data.summaryLine2;

        const cards = Array.from(document.querySelectorAll("[data-output-card]"));
        cards.forEach((card, index) => {
          const cardData = data.cards[index];
          if (!cardData) return;
          const value = card.querySelector("[data-output-value]");
          const delta = card.querySelector("[data-output-delta]");
          if (value) value.textContent = cardData.value;
          if (delta) {
            delta.textContent = cardData.delta;
            const isUp = cardData.trend === "up";
            delta.classList.toggle("bg-[#E6F6ED]", isUp);
            delta.classList.toggle("text-[#008A3B]", isUp);
            delta.classList.toggle("bg-[#FEECEA]", !isUp);
            delta.classList.toggle("text-[#C0392B]", !isUp);
          }
        });

        renderWaterfall(document.getElementById("output-waterfall"), data.waterfall);

        const sensitivityContainer = document.getElementById("output-sensitivities");
        if (sensitivityContainer) {
          sensitivityContainer.innerHTML = data.sensitivities
            .map(
              (row) => `
                <div class="grid grid-cols-[1.3fr_1fr_1fr_1fr_1fr] items-center py-4">
                  <div class="text-[14px] font-bold text-[#2d2d2d]">${row.label}</div>
                  <div class="flex items-center justify-center">
                    <div class="rounded bg-[#C0392B] px-3 py-1 text-white">${row.worse}</div>
                  </div>
                  <div class="text-center text-[#4b4b4b]">${row.base}</div>
                  <div class="flex items-center justify-center">
                    <div class="rounded bg-[#0B7D12] px-3 py-1 text-white">${row.better}</div>
                  </div>
                  <div class="text-right text-[14px] font-bold text-[#2d2d2d]">${row.range}</div>
                </div>
              `
            )
            .join("");
        }
        setOutputTab("summary");
      }

      function buildBaselineData() {
        const seed = scenarioSessionId || Math.floor(Math.random() * 10000) + 1;
        const random = createSeededRandom(seed);
        const randomBetween = (min, max) => min + random() * (max - min);
        const annualCases = randomBetween(2.8, 4.8);
        const annualNr = randomBetween(14, 22);
        const netRevenuePerHour = randomBetween(12, 22);
        const topKpis = [
          formatNumber(Math.round(randomBetween(4200, 7800))),
          formatMillions(annualCases),
          formatPercent(randomBetween(3.2, 7.4)),
          formatMoneyMillions(annualNr),
          formatNumber(Math.round(randomBetween(1200000, 1900000))),
        ];
        const bottomKpis = [
          formatNumber(Math.round(randomBetween(1200000, 2100000))),
          formatNumber(Math.round(randomBetween(240000, 380000))),
          formatMillions(randomBetween(18, 32)),
          formatPercent(randomBetween(10, 18)),
          formatCurrency(netRevenuePerHour, 2),
        ];

        const buildLaborRows = (count = 4) => {
          const roles = ["Sales Rep", "Merchandiser", "Non-CDL DMS", "CDL(A) DMS"];
          return roles.slice(0, count).map((role) => {
            const wages = randomBetween(22, 31);
            const hours = randomBetween(36, 44);
            return {
              role,
              hc: Math.round(randomBetween(8, 18)),
              wages: formatCurrency(wages, 2),
              salary: formatCurrency(wages * hours * 52, 0),
              hrs: hours.toFixed(1),
            };
          });
        };

        const buildServiceRows = () => [
          {
            label: "Number of Stores",
            large: Math.round(randomBetween(900, 1400)),
            small: Math.round(randomBetween(300, 700)),
            afh: Math.round(randomBetween(120, 320)),
          },
          {
            label: "Freq/Week",
            large: randomBetween(1.1, 1.7).toFixed(2),
            small: randomBetween(0.7, 1.2).toFixed(2),
            afh: randomBetween(2.0, 2.8).toFixed(2),
          },
          {
            label: "WSA (NR)",
            large: formatCurrency(randomBetween(60000, 90000), 0),
            small: formatCurrency(randomBetween(28000, 52000), 0),
            afh: formatCurrency(randomBetween(40000, 80000), 0),
          },
          {
            label: "Drop Size (NR)",
            large: formatCurrency(randomBetween(1600, 3200), 0),
            small: formatCurrency(randomBetween(900, 1800), 0),
            afh: formatCurrency(randomBetween(2000, 3500), 0),
          },
          {
            label: "WSA (Cs)",
            large: formatNumber(Math.round(randomBetween(8000, 13000))),
            small: formatNumber(Math.round(randomBetween(4000, 7000))),
            afh: formatNumber(Math.round(randomBetween(6000, 11000))),
          },
          {
            label: "Drop Size (Cs)",
            large: formatNumber(Math.round(randomBetween(280, 420))),
            small: formatNumber(Math.round(randomBetween(180, 300))),
            afh: formatNumber(Math.round(randomBetween(320, 520))),
          },
        ];

        const buildAssetsRows = (labels) => {
          const rows = labels.map((label) => {
            const miles = Math.round(randomBetween(5000, 25000));
            const fuel = randomBetween(0.35, 1.25);
            const dep = randomBetween(0.25, 0.95);
            return {
              label,
              miles,
              fuel,
              dep,
            };
          });
          const totals = rows.reduce(
            (acc, row) => ({
              miles: acc.miles + row.miles,
              fuel: acc.fuel + row.fuel,
              dep: acc.dep + row.dep,
            }),
            { miles: 0, fuel: 0, dep: 0 }
          );
          const count = rows.length || 1;
          const total = {
            label: "TOTAL",
            miles: formatNumber(totals.miles),
            fuel: formatCurrency(totals.fuel / count, 2),
            dep: formatCurrency(totals.dep / count, 2),
          };
          const formattedRows = rows.map((row) => ({
            label: row.label,
            miles: formatNumber(row.miles),
            fuel: formatCurrency(row.fuel, 2),
            dep: formatCurrency(row.dep, 2),
          }));
          return { rows: formattedRows, total };
        };

        const buildTotalRows = () => [
          {
            label: "Total",
            large: formatCurrency(randomBetween(600000, 1100000), 0),
            small: formatCurrency(randomBetween(280000, 620000), 0),
            afh: formatCurrency(randomBetween(420000, 780000), 0),
          },
        ];

        const buildPnlRows = (casesMillions) => {
          const netRevenue = randomBetween(6, 12) * 1000000;
          const caseCount = casesMillions * 1000000;
          const rows = [
            { label: "Net Revenue", value: netRevenue, level: 0, bold: true },
            { label: "Cost of Sales", value: netRevenue * randomBetween(0.45, 0.6), level: 0, bold: true },
            { label: "Gross Margin", value: netRevenue * randomBetween(0.35, 0.5), level: 0, bold: true },
            {
              label: "Selling & Distribution",
              value: netRevenue * randomBetween(0.12, 0.2),
              level: 0,
              bold: true,
            },
            { label: "Selling", value: netRevenue * randomBetween(0.05, 0.09), level: 1 },
            { label: "Frontline Labor", value: netRevenue * randomBetween(0.03, 0.06), level: 2 },
            { label: "Mgmt Labor", value: netRevenue * randomBetween(0.015, 0.035), level: 2 },
            { label: "Distribution", value: netRevenue * randomBetween(0.05, 0.09), level: 1 },
            { label: "Delivery Fleet Cost", value: netRevenue * randomBetween(0.02, 0.05), level: 2 },
            { label: "Depreciation and Leases", value: netRevenue * randomBetween(0.015, 0.03), level: 3 },
            { label: "Fuel", value: netRevenue * randomBetween(0.01, 0.025), level: 3 },
            { label: "R&M", value: netRevenue * randomBetween(0.008, 0.02), level: 3 },
            { label: "PTS", value: netRevenue * randomBetween(0.04, 0.08), level: 0, bold: true },
          ];
          return rows.map((row) => ({
            label: row.label,
            level: row.level,
            bold: row.bold ?? false,
            dollars: formatCurrency(row.value, 0),
            percent: formatPercent((row.value / netRevenue) * 100),
            perCase: formatCurrency(row.value / caseCount, 2),
          }));
        };

        const buildCardData = (storeMin, storeMax, laborCount = 4, assetLabels = []) => {
          const cardAnnualCases = randomBetween(1.2, 2.8);
          const cardAnnualNr = randomBetween(6, 12);
          const cardHours = Math.round(randomBetween(700000, 1100000));
          return {
            totalStores: Math.round(randomBetween(storeMin, storeMax)),
            kpiTop: [
              formatMillions(cardAnnualCases),
              formatPercent(randomBetween(2.5, 5.5)),
              formatMoneyMillions(cardAnnualNr),
              formatNumber(Math.round(randomBetween(600000, 950000))),
            ],
            kpiBottom: [
              formatNumber(cardHours),
              formatNumber(Math.round(randomBetween(120000, 200000))),
              formatMillions(randomBetween(11, 18)),
              formatPercent(randomBetween(6, 11)),
              formatCurrency(randomBetween(12, 19), 2),
            ],
            labor: buildLaborRows(laborCount),
            service: buildServiceRows(),
            assets: buildAssetsRows(assetLabels),
            total: buildTotalRows(),
            pnl: buildPnlRows(cardAnnualCases),
          };
        };

        return {
          topKpis,
          bottomKpis,
          beverages: buildCardData(3800, 5200, 4, [
            "Class 6 Non-CDL Bulk Track",
            "GeoBox Tractor with Liftgate",
          ]),
          foods: buildCardData(1200, 2200, 3, [
            "Class 6 Non-CDL Bulk Track",
            "Route Truck",
            "Market Place Truck",
          ]),
        };
      }

      function renderBaseline(data) {
        baselineKpiTop.forEach((node, index) => {
          if (node) {
            node.textContent = data.topKpis[index];
          }
        });
        baselineKpiBottom.forEach((node, index) => {
          if (node) {
            node.textContent = data.bottomKpis[index];
          }
        });

        const renderLaborRows = (rows) =>
          rows
            .map(
              (row) => `
                <div class="grid min-h-[48px] grid-cols-[1.6fr_0.6fr_1fr_1fr_0.6fr] items-center px-4 py-3">
                  <div>${row.role}</div>
                  <div>${row.hc}</div>
                  <div>${row.wages}</div>
                  <div>${row.salary}</div>
                  <div>${row.hrs}</div>
                </div>
              `
            )
            .join("");

        const renderServiceRows = (rows) =>
          rows
            .map(
              (row) => `
                <div class="grid min-h-[48px] grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr] items-center px-4 py-3">
                  <div>${row.label}</div>
                  <div>${row.large}</div>
                  <div>${row.small}</div>
                  <div>${row.afh}</div>
                </div>
              `
            )
            .join("");

        const renderAssetsRows = (rows, totalRow, includeSpacer = true) => {
          const rowMarkup = rows
            .map(
              (row) => `
                <div class="grid min-h-[48px] grid-cols-[1.2fr_0.8fr_1fr_1fr] items-center px-4 py-3">
                  <div>${row.label}</div>
                  <div>${row.miles}</div>
                  <div>${row.fuel}</div>
                  <div>${row.dep}</div>
                </div>
              `
            )
            .join("");
          const totalMarkup = `
            <div class="grid min-h-[48px] grid-cols-[1.2fr_0.8fr_1fr_1fr] items-center border-t-0 border-t-transparent px-4 py-3 font-bold">
              <div>${totalRow.label}</div>
              <div>${totalRow.miles}</div>
              <div>${totalRow.fuel}</div>
              <div>${totalRow.dep}</div>
            </div>
          `;
          const spacer = includeSpacer
            ? `
            <div class="grid min-h-[48px] grid-cols-[1.2fr_0.8fr_1fr_1fr] items-center px-4 py-3 text-transparent">
              <div>.</div>
              <div>.</div>
              <div>.</div>
              <div>.</div>
            </div>
          `
            : "";
          return rowMarkup + spacer + totalMarkup;
        };

        const renderTotalRows = (rows) =>
          rows
            .map(
              (row) => `
                <div class="grid grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr] items-center px-2 py-2">
                  <div>${row.label}</div>
                  <div>${row.large}</div>
                  <div>${row.small}</div>
                  <div>${row.afh}</div>
                </div>
              `
            )
            .join("");

        const renderPnlRows = (rows) => {
          const indentClass = (level) => {
            if (level === 1) return "pl-4";
            if (level === 2) return "pl-8";
            if (level >= 3) return "pl-12";
            return "";
          };
          return rows
            .map(
              (row) => `
                <div class="grid min-h-[48px] grid-cols-[1fr_100px_100px_100px] items-center px-4 py-3 ${
                  row.bold ? "font-bold" : ""
                }">
                  <div class="${indentClass(row.level)}">${row.label}</div>
                  <div>${row.dollars}</div>
                  <div>${row.percent}</div>
                  <div>${row.perCase}</div>
                </div>
              `
            )
            .join("");
        };

        const applyCardData = (card, elements) => {
          if (elements.totalStores) {
            elements.totalStores.textContent = formatNumber(card.totalStores);
          }
          elements.kpiTop.forEach((node, index) => {
            if (node) {
              node.textContent = card.kpiTop[index];
            }
          });
          elements.kpiBottom.forEach((node, index) => {
            if (node) {
              node.textContent = card.kpiBottom[index];
            }
          });
          if (elements.laborBody) {
            elements.laborBody.innerHTML = renderLaborRows(card.labor);
          }
          if (elements.serviceBody) {
            elements.serviceBody.innerHTML = renderServiceRows(card.service);
          }
          if (elements.assetsBody) {
            const includeSpacer = false;
            elements.assetsBody.innerHTML = renderAssetsRows(
              card.assets.rows,
              card.assets.total,
              includeSpacer
            );
          }
          if (elements.totalBody) {
            elements.totalBody.innerHTML = renderTotalRows(card.total);
          }
          if (elements.pnlBody) {
            elements.pnlBody.innerHTML = renderPnlRows(card.pnl);
          }
        };

        applyCardData(data.beverages, {
          totalStores: beveragesTotalStores,
          kpiTop: beveragesKpiTop,
          kpiBottom: beveragesKpiBottom,
          laborBody: beveragesLaborBody,
          serviceBody: beveragesServiceBody,
          assetsBody: beveragesAssetsBody,
          totalBody: beveragesTotalBody,
          pnlBody: beveragesPnlBody,
        });

        applyCardData(data.foods, {
          totalStores: foodsTotalStores,
          kpiTop: foodsKpiTop,
          kpiBottom: foodsKpiBottom,
          laborBody: foodsLaborBody,
          serviceBody: foodsServiceBody,
          assetsBody: foodsAssetsBody,
          totalBody: foodsTotalBody,
          pnlBody: foodsPnlBody,
        });

        requestAnimationFrame(() => {
          const foodsAssetsTable = foodsAssetsBody?.closest(".table-text");
          const beveragesAssetsTable = beveragesAssetsBody?.closest(".table-text");
          if (foodsAssetsTable && beveragesAssetsTable) {
            const targetHeight = foodsAssetsTable.getBoundingClientRect().height;
            beveragesAssetsTable.style.minHeight = `${targetHeight}px`;
          }
        });
      }

      function closeDateMenus() {
        startDateMenu.classList.add("hidden");
        endDateMenu.classList.add("hidden");
        setDateFieldActive(startDateField, false);
        setDateFieldActive(endDateField, false);
      }

      function closePortfolioSelectMenu() {
        portfolioSelectMenu.classList.add("hidden");
        setDateFieldActive(portfolioSelectField, false);
      }

      function closeStateSelectMenu() {
        stateSelectMenu.classList.add("hidden");
        setDateFieldActive(stateSelectField, false);
        updateStateSelectValue();
      }

      function closeLocationMenus() {
        foodLocationMenu.classList.add("hidden");
        beverageLocationMenu.classList.add("hidden");
        foodBeverageLocationMenu.classList.add("hidden");
        setDateFieldActive(foodLocationField, false);
        setDateFieldActive(beverageLocationField, false);
        setDateFieldActive(foodBeverageLocationField, false);
        updateLocationSelectValues();
      }

      function openDateMenu(field, menu, selectedLabel) {
        if (!menu.classList.contains("hidden")) {
          menu.classList.add("hidden");
          setDateFieldActive(field, false);
          return;
        }

        closeDateMenus();
        renderPeriodMenu(menu, selectedLabel);
        menu.classList.remove("hidden");
        setDateFieldActive(field, true);
      }

      function openPortfolioSelectMenu() {
        if (!portfolioSelectMenu.classList.contains("hidden")) {
          closePortfolioSelectMenu();
          return;
        }
        closeDateMenus();
        closeMenus();
        closeStateSelectMenu();
        renderPortfolioMenu();
        portfolioSelectMenu.classList.remove("hidden");
        setDateFieldActive(portfolioSelectField, true);
      }

      function openStateSelectMenu() {
        if (!stateSelectMenu.classList.contains("hidden")) {
          closeStateSelectMenu();
          return;
        }
        closeDateMenus();
        closeMenus();
        closePortfolioSelectMenu();
        closeLocationMenus();
        stateSelectValue.value = "";
        renderStateOptions(stateSelectValue.value);
        stateSelectMenu.classList.remove("hidden");
        setDateFieldActive(stateSelectField, true);
        stateSelectValue.focus();
      }

      function openLocationMenu(field, menu, input, list, selections, options) {
        if (field.getAttribute("aria-disabled") === "true") {
          return;
        }
        if (!menu.classList.contains("hidden")) {
          menu.classList.add("hidden");
          setDateFieldActive(field, false);
          return;
        }
        closeDateMenus();
        closeMenus();
        closePortfolioSelectMenu();
        closeStateSelectMenu();
        closeLocationMenus();
        input.value = "";
        renderLocationOptions(options, selections, list, input.value);
        menu.classList.remove("hidden");
        setDateFieldActive(field, true);
        input.focus();
      }

      portfolioChip.addEventListener("click", (event) => {
        event.stopPropagation();
        openMenu(portfolioMenu, "portfolio");
        statusMenu.classList.add("hidden");
        closeDateMenus();
        closePortfolioSelectMenu();
      });

      statusChip.addEventListener("click", (event) => {
        event.stopPropagation();
        openMenu(statusMenu, "status");
        portfolioMenu.classList.add("hidden");
        closeDateMenus();
        closePortfolioSelectMenu();
      });

      startDateField.addEventListener("click", (event) => {
        event.stopPropagation();
        openDateMenu(startDateField, startDateMenu, startDateSelected);
        closeMenus();
        closePortfolioSelectMenu();
        closeStateSelectMenu();
      });

      endDateField.addEventListener("click", (event) => {
        event.stopPropagation();
        openDateMenu(endDateField, endDateMenu, endDateSelected);
        closeMenus();
        closePortfolioSelectMenu();
        closeStateSelectMenu();
      });

      portfolioSelectField.addEventListener("click", (event) => {
        event.stopPropagation();
        openPortfolioSelectMenu();
      });

      stateSelectField.addEventListener("click", (event) => {
        event.stopPropagation();
        openStateSelectMenu();
      });

      stateSelectField.addEventListener("keydown", (event) => {
        if (event.key === "Enter" || event.key === " ") {
          event.preventDefault();
          openStateSelectMenu();
        }
      });

      foodLocationField.addEventListener("click", (event) => {
        event.stopPropagation();
        openLocationMenu(
          foodLocationField,
          foodLocationMenu,
          foodLocationValue,
          foodLocationOptions,
          selectedFoodLocations,
          getLocationOptions(foodLocationTemplates)
        );
      });

      beverageLocationField.addEventListener("click", (event) => {
        event.stopPropagation();
        openLocationMenu(
          beverageLocationField,
          beverageLocationMenu,
          beverageLocationValue,
          beverageLocationOptions,
          selectedBeverageLocations,
          getLocationOptions(beverageLocationTemplates)
        );
      });

      foodBeverageLocationField.addEventListener("click", (event) => {
        event.stopPropagation();
        openLocationMenu(
          foodBeverageLocationField,
          foodBeverageLocationMenu,
          foodBeverageLocationValue,
          foodBeverageLocationOptions,
          selectedFoodBeverageLocations,
          getLocationOptions(foodBeverageLocationTemplates)
        );
      });

      startDateMenu.addEventListener("click", (event) => {
        event.stopPropagation();
        const option = event.target.closest("[data-value]");
        if (!option) {
          return;
        }
        startDateSelected = option.dataset.value;
        startDateValue.textContent = startDateSelected;
        closeDateMenus();
        updateLocationSelectState();
        updateViewBaselineState();
      });

      endDateMenu.addEventListener("click", (event) => {
        event.stopPropagation();
        const option = event.target.closest("[data-value]");
        if (!option) {
          return;
        }
        endDateSelected = option.dataset.value;
        endDateValue.textContent = endDateSelected;
        closeDateMenus();
        updateLocationSelectState();
        updateViewBaselineState();
      });

      portfolioSelectMenu.addEventListener("click", (event) => {
        event.stopPropagation();
        const option = event.target.closest("[data-value]");
        if (!option) {
          return;
        }
        portfolioSelected = option.dataset.value;
        portfolioSelectValue.textContent = portfolioSelected;
        closePortfolioSelectMenu();
        updateLocationSelectState();
        updateViewBaselineState();
      });

      stateSelectMenu.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      stateSelectValue.addEventListener("input", () => {
        if (stateSelectMenu.classList.contains("hidden")) {
          openStateSelectMenu();
        }
        renderStateOptions(stateSelectValue.value);
      });

      foodLocationMenu.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      beverageLocationMenu.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      foodBeverageLocationMenu.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      foodLocationValue.addEventListener("input", () => {
        if (foodLocationMenu.classList.contains("hidden")) {
          openLocationMenu(
            foodLocationField,
            foodLocationMenu,
            foodLocationValue,
            foodLocationOptions,
            selectedFoodLocations,
            getLocationOptions(foodLocationTemplates)
          );
        }
        renderLocationOptions(
          getLocationOptions(foodLocationTemplates),
          selectedFoodLocations,
          foodLocationOptions,
          foodLocationValue.value
        );
      });

      beverageLocationValue.addEventListener("input", () => {
        if (beverageLocationMenu.classList.contains("hidden")) {
          openLocationMenu(
            beverageLocationField,
            beverageLocationMenu,
            beverageLocationValue,
            beverageLocationOptions,
            selectedBeverageLocations,
            getLocationOptions(beverageLocationTemplates)
          );
        }
        renderLocationOptions(
          getLocationOptions(beverageLocationTemplates),
          selectedBeverageLocations,
          beverageLocationOptions,
          beverageLocationValue.value
        );
      });

      foodBeverageLocationValue.addEventListener("input", () => {
        if (foodBeverageLocationMenu.classList.contains("hidden")) {
          openLocationMenu(
            foodBeverageLocationField,
            foodBeverageLocationMenu,
            foodBeverageLocationValue,
            foodBeverageLocationOptions,
            selectedFoodBeverageLocations,
            getLocationOptions(foodBeverageLocationTemplates)
          );
        }
        renderLocationOptions(
          getLocationOptions(foodBeverageLocationTemplates),
          selectedFoodBeverageLocations,
          foodBeverageLocationOptions,
          foodBeverageLocationValue.value
        );
      });

      applySelectionsButton.addEventListener("click", () => {
        if (applySelectionsButton.disabled) {
          return;
        }
        if (mapImage) {
          mapImage.src = "./MapZoom.png";
        }
        renderMapMarkers("circle");
        selectionsApplied = true;
        updateViewBaselineState();
      });

      portfolioClear.addEventListener("click", (event) => {
        event.stopPropagation();
        filters.portfolio.selected.clear();
        updateChipCounts();
        renderTable();
      });

      statusClear.addEventListener("click", (event) => {
        event.stopPropagation();
        filters.status.selected.clear();
        updateChipCounts();
        renderTable();
      });

      portfolioMenu.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      statusMenu.addEventListener("click", (event) => {
        event.stopPropagation();
      });

      portfolioApply.addEventListener("click", () => {
        filters.portfolio.selected = new Set(filters.portfolio.draft);
        closeMenus();
        updateChipCounts();
        renderTable();
      });

      statusApply.addEventListener("click", () => {
        filters.status.selected = new Set(filters.status.draft);
        closeMenus();
        updateChipCounts();
        renderTable();
      });

      portfolioCancel.addEventListener("click", () => {
        closeMenus();
      });

      statusCancel.addEventListener("click", () => {
        closeMenus();
      });

      portfolioSearch.addEventListener("input", () =>
        renderFilterOptions("portfolio")
      );
      statusSearch.addEventListener("input", () =>
        renderFilterOptions("status")
      );

      document.addEventListener("click", () => {
        closeMenus();
        closeDateMenus();
        closePortfolioSelectMenu();
        closeStateSelectMenu();
        closeLocationMenus();
      });

      const tooltipEl = document.createElement("div");
      tooltipEl.className =
        "fixed z-[9999] max-w-[260px] rounded bg-[#262626] px-2 py-1 text-[12px] text-[#efefef] opacity-0 shadow-[0px_4px_24px_0px_rgba(58,58,58,0.08)] transition-opacity";
      tooltipEl.style.pointerEvents = "none";
      document.body.appendChild(tooltipEl);

      const showTooltip = (target) => {
        const text = target.dataset.tooltip;
        if (!text) {
          return;
        }
        tooltipEl.textContent = text;
        tooltipEl.style.opacity = "1";
        const rect = target.getBoundingClientRect();
        const tooltipRect = tooltipEl.getBoundingClientRect();
        const left = rect.left + rect.width / 2 - tooltipRect.width / 2;
        const top = rect.top - tooltipRect.height - 8;
        tooltipEl.style.left = `${Math.max(8, left)}px`;
        tooltipEl.style.top = `${Math.max(8, top)}px`;
      };

      const hideTooltip = () => {
        tooltipEl.style.opacity = "0";
      };

      document.addEventListener("mouseover", (event) => {
        const target = event.target.closest("[data-tooltip]");
        if (target) {
          showTooltip(target);
        }
      });
      document.addEventListener("mouseout", (event) => {
        if (event.target.closest("[data-tooltip]")) {
          hideTooltip();
        }
      });

      function clearSelections() {
        selectAll.checked = false;
        selectAll.indeterminate = false;
      }

      function updateCompareState() {
        const checkedRows = Array.from(document.querySelectorAll(".row-checkbox:checked"));
        const completedChecked = checkedRows.filter(
          (cb) => cb.closest(".table-row").getAttribute("data-status") === "Completed"
        );
        const isActive = completedChecked.length === 2;
        if (isActive) {
          compareButton.classList.remove("border-[#dadada]", "text-[#b1b1b1]");
          compareButton.classList.add("border-[#004895]", "text-[#004895]");
          compareButton.classList.add("hover:border-[#002B5E]", "hover:text-[#002B5E]");
        } else {
          compareButton.classList.add("border-[#dadada]", "text-[#b1b1b1]");
          compareButton.classList.remove("border-[#004895]", "text-[#004895]");
          compareButton.classList.remove("hover:border-[#002B5E]", "hover:text-[#002B5E]");
        }
      }

      function bindSelectionHandlers() {
        const rowCheckboxes = Array.from(
          document.querySelectorAll(".row-checkbox")
        );

        function getCheckedCount() {
          return rowCheckboxes.filter((checkbox) => checkbox.checked).length;
        }

        function updateSelectionState() {
          let checkedCount = 0;

          rowCheckboxes.forEach((checkbox) => {
            const row = checkbox.closest(".table-row");
            if (checkbox.checked) {
              checkedCount += 1;
              row.classList.add("is-selected");
            } else {
              row.classList.remove("is-selected");
            }
          });

          selectedCount.textContent = checkedCount;
          bulkBar.style.display = checkedCount === 0 ? "none" : "flex";
          updateCompareState();

          if (checkedCount === 0) {
            selectAll.checked = false;
            selectAll.indeterminate = false;
          } else if (checkedCount === rowCheckboxes.length) {
            selectAll.checked = true;
            selectAll.indeterminate = false;
          } else {
            selectAll.checked = false;
            selectAll.indeterminate = true;
          }
        }

        selectAll.addEventListener("click", (event) => {
          event.preventDefault();
          const allChecked = getCheckedCount() === rowCheckboxes.length;
          rowCheckboxes.forEach((checkbox) => {
            checkbox.checked = !allChecked;
          });
          selectAll.indeterminate = false;
          selectAll.checked = !allChecked;
          updateSelectionState();
        });

        rowCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", () => {
            if (checkbox.checked && getCheckedCount() > MAX_SELECTED) {
              checkbox.checked = false;
              return;
            }
            updateSelectionState();
          });
        });

        updateSelectionState();
      }

      tabAll.addEventListener("click", () => setActiveTab("all"));
      tabMy.addEventListener("click", () => setActiveTab("mine"));

      const setDefineScopeTab = (active) => {
        defineScopeTabs.forEach((tab) => {
          const isActive = tab.dataset.scopeTab === active;
          tab.classList.toggle("border", isActive);
          tab.classList.toggle("border-[#004895]", isActive);
          tab.classList.toggle("bg-white", isActive);
          tab.classList.toggle("text-[#004895]", isActive);
          tab.classList.toggle("font-bold", isActive);
          if (!isActive) {
            tab.classList.remove("border", "border-[#004895]", "bg-white", "text-[#004895]", "font-bold");
          }
        });
        defineScopePanels.forEach((panel) => {
          const panelType = panel.dataset.scopePanel;
          const shouldShow =
            (active === "select" && panelType === "select") ||
            (active === "select" && panelType === "select-map") ||
            (active === "upload" && panelType === "upload");
          panel.classList.toggle("hidden", !shouldShow);
        });
      };

      defineScopeTabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          setDefineScopeTab(tab.dataset.scopeTab);
        });
      });
      setDefineScopeTab("upload");

      if (startDateSelected) {
        startDateValue.textContent = startDateSelected;
      }
      if (endDateSelected) {
        endDateValue.textContent = endDateSelected;
      }
      if (portfolioSelected) {
        portfolioSelectValue.textContent = portfolioSelected;
      }
      renderMapMarkers();
      updateStateSelectValue();
      updateLocationSelectValues();
      updateLocationSelectState();

      /* â”€â”€ Compare View Logic â”€â”€ */

      function buildCompareData(seed) {
        const rng = createSeededRandom(seed);
        const r = (min, max) => Math.round(rng() * (max - min) + min);
        const rd = (min, max) => +(rng() * (max - min) + min).toFixed(1);
        const timeline = "P01 2025 - P13 2025";
        const stores = r(180, 320);
        const annualNr = formatMoneyMillions(rd(12, 22));
        const annualCases = formatMillions(rd(2.5, 4.5));
        const casesCount = r(2600, 4200);
        return {
          timeline,
          stores,
          annualNr,
          annualCases,
          profitToServe: r(380, 520),
          profitToServeChange: rd(2.0, 5.5),
          weeklyHours: r(1800, 2600),
          weeklyMiles: r(9200, 14000),
          headcount: r(44, 72),
          weeklyDeliveries: r(310, 480),
          dropSizeCases: r(38, 65),
          netRevenuePerHour: rd(28.0, 46.0),
          assets: r(18, 34),
          labor: {
            cdlDms: { hc: r(10, 16), wages: rd(0.80, 1.10), salary: r(86000, 98000), hrsWk: rd(40.0, 45.0) },
            merchandisers: { hc: r(10, 16), wages: rd(0.45, 0.70), salary: r(86000, 98000), hrsWk: rd(40.0, 45.0) },
          },
          service: (() => {
            const makeSection = (foodsLfRange, foodsSfRange, bevsLfRange, bevsSfRange, bevsDelta) => {
              const foods = {
                lf: r(...foodsLfRange),
                sf: r(...foodsSfRange),
                lfDelta: "+0%",
                sfDelta: "+0%",
              };
              const bevs = {
                lf: r(...bevsLfRange),
                sf: r(...bevsSfRange),
                lfDelta: bevsDelta,
                sfDelta: bevsDelta,
              };
              return {
                lf: foods.lf + bevs.lf,
                sf: foods.sf + bevs.sf,
                foods,
                bevs,
              };
            };
            return {
              freq: makeSection([0, 2], [0, 2], [0, 2], [0, 2], "+3"),
              wsa: makeSection([70, 90], [8, 16], [90, 110], [18, 32], "+70%"),
              dropSize: makeSection([70, 90], [8, 16], [90, 110], [18, 32], "+70%"),
            };
          })(),
          assets_detail: {
            vehicles: r(12, 28),
            mileagePerWeek: r(8000, 14000),
            fuelCostWeek: r(3200, 6400),
            depreciationMonthly: r(12000, 24000),
            table: [
              { label: "Class 6 Non CDL Bulk Truck", count: r(90, 120), delta: "+70%" },
              { label: "Class 7 CDL Bulk Truck", count: r(90, 120), delta: "+70%" },
              { label: "GeoBox Tractor with Liftgate", count: r(90, 120), delta: "+70%" },
              { label: "GeoBox Tractor without Liftgate", count: r(90, 120), delta: "+70%" },
              { label: "Route Truck", count: r(90, 120), delta: "+70%" },
              { label: "Market Place Truck", count: r(90, 120), delta: "+70%" },
            ],
          },
          pnl: (() => {
            const netRevenue = r(14000, 20000);
            const cogs = Math.round(netRevenue * (rng() * 0.12 + 0.58));
            const grossMargin = netRevenue - cogs;
            const sellingFrontline = Math.round(netRevenue * (rng() * 0.05 + 0.06));
            const sellingMgmt = Math.round(netRevenue * (rng() * 0.03 + 0.03));
            const selling = sellingFrontline + sellingMgmt;
            const deliveryFleet = Math.round(netRevenue * (rng() * 0.03 + 0.03));
            const depreciation = Math.round(netRevenue * (rng() * 0.02 + 0.02));
            const fuel = Math.round(netRevenue * (rng() * 0.02 + 0.015));
            const rm = Math.round(netRevenue * (rng() * 0.015 + 0.01));
            const distribution = deliveryFleet + depreciation + fuel + rm;
            const sellingDistribution = selling + distribution;
            const pts = grossMargin - sellingDistribution;
            const row = (label, value, isBold = false, indent = false) => ({
              label,
              value,
              percent: netRevenue === 0 ? 0 : (value / netRevenue) * 100,
              perCase: casesCount === 0 ? 0 : value / casesCount,
              isBold,
              indent,
            });
            return {
              netRevenue,
              cogs,
              grossMargin,
              sellingDistribution,
              selling,
              sellingFrontline,
              sellingMgmt,
              distribution,
              deliveryFleet,
              depreciation,
              fuel,
              rm,
              pts,
              rows: [
                row("Net Revenue", netRevenue, true),
                row("Cost of Sales", cogs, true),
                row("Gross Margin", grossMargin, true),
                row("Selling & Distribution", sellingDistribution, true),
                row("Selling", selling, false),
                row("Frontline Labor", sellingFrontline, false, true),
                row("Mgmt Labor", sellingMgmt, false, true),
                row("Distribution", distribution, true),
                row("Delivery Fleet Cost", deliveryFleet, false, true),
                row("Depreciation and Leases", depreciation, false, true),
                row("Fuel", fuel, false, true),
                row("R&M", rm, false, true),
                row("PTS", pts, true),
              ],
            };
          })(),
        };
      }

      function getSelectedScenarioIds() {
        return Array.from(document.querySelectorAll(".row-checkbox:checked"))
          .filter((cb) => cb.closest(".table-row").getAttribute("data-status") === "Completed")
          .map((cb) => cb.closest(".table-row").querySelector(".scenario-link")?.textContent.trim());
      }

      function renderCompareTileRow(rowEl, label, data) {
        rowEl.innerHTML = `
          <div class="flex flex-col items-end pr-4" style="min-width:154px">
            <span class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">${label}</span>
            <span class="text-[13px] text-[#2d2d2d]">${data.timeline}</span>
          </div>
          <div class="flex flex-col items-end pr-4" style="min-width:105px">
            <span class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Total Stores</span>
            <span class="text-[13px] text-[#2d2d2d]">${data.stores}</span>
          </div>
          <div class="flex flex-col items-end pr-4" style="min-width:87px">
            <span class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Annual NR</span>
            <span class="text-[13px] text-[#2d2d2d]">${data.annualNr}</span>
          </div>
          <div class="flex flex-col items-end" style="min-width:110px">
            <span class="text-[11px] font-bold uppercase tracking-wide text-[#4b4b4b]">Annual Cases</span>
            <span class="text-[13px] text-[#2d2d2d]">${data.annualCases}</span>
          </div>
        `;
      }

      function formatChangeTag(value) {
        const num = parseFloat(value);
        const isPositive = num > 0;
        const isNegative = num < 0;
        const bg = isPositive ? "#DDF9DA" : isNegative ? "#FFF6F4" : "#f0f0f0";
        const color = isPositive ? "#027C06" : isNegative ? "#C12C01" : "#4b4b4b";
        return `<span class="inline-block rounded px-2 py-0.5 text-[12px] font-bold" style="color:${color};background:${bg}">${value}</span>`;
      }

      function renderCompareMetrics(d1, d2) {
        const optimalDot = `<span class="inline-block h-[7px] w-[7px] rounded-full bg-[#004895] mr-1.5 shrink-0"></span>`;

        const metrics = [
          {
            name: "Profit to Serve",
            v1: `$${d1.profitToServe}MM`,
            v2: `$${d2.profitToServe}MM`,
            c1: `+${d1.profitToServeChange.toFixed(1)} points`,
            c2: `+${d2.profitToServeChange.toFixed(1)} points`,
            bw: `${(d2.profitToServe - d1.profitToServe) >= 0 ? "+" : "-"}${Math.abs(d2.profitToServe - d1.profitToServe)}MM`,
            opt1: d1.profitToServe >= d2.profitToServe,
            opt2: d2.profitToServe > d1.profitToServe,
          },
          {
            name: "Weekly Hours",
            v1: d1.weeklyHours,
            v2: d2.weeklyHours,
            c1: `${formatSigned(d1.weeklyHours - d2.weeklyHours, "")}`,
            c2: `${formatSigned(d2.weeklyHours - d1.weeklyHours, "")}`,
            bw: `${formatSigned(d2.weeklyHours - d1.weeklyHours, "")}`,
          },
          {
            name: "Weekly Miles",
            v1: d1.weeklyMiles,
            v2: d2.weeklyMiles,
            c1: `${formatSigned(d1.weeklyMiles - d2.weeklyMiles, "")}`,
            c2: `${formatSigned(d2.weeklyMiles - d1.weeklyMiles, "")}`,
            bw: `${formatSigned(d2.weeklyMiles - d1.weeklyMiles, "")}`,
          },
          {
            name: "Headcount",
            v1: d1.headcount,
            v2: d2.headcount,
            c1: `${formatSigned(d1.headcount - d2.headcount, "")}`,
            c2: `${formatSigned(d2.headcount - d1.headcount, "")}`,
            bw: `${formatSigned(d2.headcount - d1.headcount, "")}`,
          },
          {
            name: "Weekly Deliveries",
            v1: d1.weeklyDeliveries,
            v2: d2.weeklyDeliveries,
            c1: `${formatSigned(d1.weeklyDeliveries - d2.weeklyDeliveries, "")}`,
            c2: `${formatSigned(d2.weeklyDeliveries - d1.weeklyDeliveries, "")}`,
            bw: `${formatSigned(d2.weeklyDeliveries - d1.weeklyDeliveries, "")}`,
            opt1: d1.weeklyDeliveries >= d2.weeklyDeliveries,
          },
          {
            name: "Drop Size Cases",
            v1: d1.dropSizeCases,
            v2: d2.dropSizeCases,
            c1: `${formatSigned(d1.dropSizeCases - d2.dropSizeCases, "")}`,
            c2: `${formatSigned(d2.dropSizeCases - d1.dropSizeCases, "")}`,
            bw: `${formatSigned(d2.dropSizeCases - d1.dropSizeCases, "")}`,
          },
          {
            name: "Net Revenue/hour",
            v1: `$${d1.netRevenuePerHour.toFixed(1)}`,
            v2: `$${d2.netRevenuePerHour.toFixed(1)}`,
            c1: `${formatSigned(d1.netRevenuePerHour - d2.netRevenuePerHour, "")}`,
            c2: `${formatSigned(d2.netRevenuePerHour - d1.netRevenuePerHour, "")}`,
            bw: `${formatSigned(d2.netRevenuePerHour - d1.netRevenuePerHour, "")}`,
            opt1: d1.netRevenuePerHour >= d2.netRevenuePerHour,
          },
          {
            name: "Assets",
            v1: d1.assets,
            v2: d2.assets,
            c1: `${formatSigned(d1.assets - d2.assets, "")}`,
            c2: `${formatSigned(d2.assets - d1.assets, "")}`,
            bw: `${formatSigned(d2.assets - d1.assets, "")}`,
          },
        ];

        compareMetricsBody.innerHTML = metrics
          .map((m) => {
            return `<tr class="border-b border-[#f0f0f0] last:border-b-0">
              <td class="py-3 pl-6 pr-4 text-[14px] text-[#2d2d2d]">${m.name}</td>
              <td class="py-3 px-4 text-[14px] text-[#2d2d2d]">
                <div class="flex items-center gap-2">
                  ${m.opt1 ? optimalDot : ""}${m.v1} ${formatChangeTag(m.c1)}
                </div>
              </td>
              <td class="py-3 px-4 text-[14px] text-[#2d2d2d]">
                <div class="flex items-center gap-2">
                  ${m.opt2 ? optimalDot : ""}${m.v2} ${formatChangeTag(m.c2)}
                </div>
              </td>
              <td class="py-3 px-4 text-[14px] text-[#2d2d2d]">${formatChangeTag(m.bw)}</td>
            </tr>`;
          })
          .join("");
      }

      function renderCompareDiffCard(barColor, badgeBg, title, changeCount, description) {
        return `
          <div class="flex overflow-hidden rounded-lg border border-[#e8e8e8] flex-1 min-h-[134px]">
            <div class="w-2 shrink-0" style="background:${barColor}"></div>
            <div class="flex flex-col gap-3 p-6 flex-1">
              <div class="flex items-center justify-between">
                <span class="text-[14px] font-bold text-[#2d2d2d]">${title}</span>
                <span class="rounded-full px-2.5 py-0.5 text-[11px] font-bold text-white" style="background:${badgeBg}">${changeCount} change${changeCount !== 1 ? "s" : ""}</span>
              </div>
              <p class="text-[13px] text-[#4b4b4b] leading-[1.5]">${description}</p>
            </div>
          </div>
        `;
      }

      function renderCompareDiffs(id1, id2) {
        const diffData = [
          {
            label: "SCENARIO 1",
            cards: [
              { bar: "#004895", badge: "#004895", title: "Labor", changes: 1, desc: `Merchandiser headcount reduced from 14 to 12 in ${id2}, driven by higher stop density.` },
              { bar: "#9C27B0", badge: "#004895", title: "Service Frequency", changes: 2, desc: "Large Format Bev frequency increased to 3x/week (+1) to capture drop size efficiencies." },
              { bar: "#E91E63", badge: "#E91E63", title: "Assets", changes: 3, desc: "Consolidation of 8 Route Trucks into GeoBox configurations for high-volume lanes." },
            ],
          },
          {
            label: "SCENARIO 2",
            cards: [
              { bar: "#004895", badge: "#004895", title: "Labor", changes: 1, desc: `Merchandiser headcount reduced from 14 to 12 in ${id2}, driven by higher stop density.` },
              { bar: "#9C27B0", badge: "#004895", title: "Service Frequency", changes: 2, desc: "Large Format Bev frequency increased to 3x/week (+1) to capture drop size efficiencies." },
              { bar: "#E91E63", badge: "#E91E63", title: "Assets", changes: 1, desc: "Consolidation of 8 Route Trucks into GeoBox configurations for high-volume lanes." },
            ],
          },
        ];

        compareDiffContainer.innerHTML = diffData
          .map(
            (s) => `
          <div class="mb-6 last:mb-0">
            <p class="text-[12px] font-bold uppercase tracking-wide text-[#2d2d2d] mb-3">${s.label}</p>
            <div class="flex gap-4">
              ${s.cards.map((c) => renderCompareDiffCard(c.bar, c.badge, c.title, c.changes, c.desc)).join("")}
            </div>
          </div>
        `
          )
          .join("");
      }

      function renderCompareDetailTable(containerId, label, data) {
        const container = containerId === "left" ? compareDetailLeft : compareDetailRight;
        const headerBg = "#FFF8E1";
        const headerColor = "#E8A800";
        const hcChange1 =
          data.labor.cdlDms.hc >= 12
            ? `<span class="ml-1 inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">+0%</span>`
            : `<span class="ml-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]">-0%</span>`;
        const hcChange2 =
          data.labor.merchandisers.hc >= 12
            ? `<span class="ml-1 inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">+0%</span>`
            : `<span class="ml-1 inline-flex rounded bg-[#FEECEA] px-2 py-[2px] text-[10px] font-bold text-[#C0392B]">-0%</span>`;

        container.innerHTML = `
          <div class="table-text overflow-hidden rounded-[8px] bg-white" style="border:1px solid ${headerColor}" data-service-table>
            <div class="table-header px-4 py-2 font-bold uppercase" style="background:${headerBg};color:#2d2d2d">
              LABOR ${label.toUpperCase()}
            </div>
            <table class="w-full">
              <thead>
                <tr class="table-header border-b border-[#f0c44f] font-bold uppercase text-[#4b4b4b]">
                  <th class="px-4 py-2 text-left">Role Type</th>
                  <th class="px-4 py-2 text-center">HC</th>
                  <th class="px-4 py-2 text-right">Wages $/Hr</th>
                  <th class="px-4 py-2 text-right">Annual Salary</th>
                  <th class="px-4 py-2 text-right">Hrs/Wk</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b border-[#f0c44f]">
                  <td class="px-4 py-2 text-[14px] text-[#2d2d2d]">CDL(A) DMS</td>
                  <td class="px-4 py-2 text-center text-[14px] text-[#2d2d2d]">
                    <span class="inline-flex items-center gap-1 whitespace-nowrap">${data.labor.cdlDms.hc} ${hcChange1}</span>
                  </td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d]">$${data.labor.cdlDms.wages.toFixed(2)}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d]">$${data.labor.cdlDms.salary.toLocaleString()}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d]">${data.labor.cdlDms.hrsWk}</td>
                </tr>
                <tr class="border-b border-[#f0c44f]">
                  <td class="px-4 py-2 text-[14px] text-[#2d2d2d]">Merchandisers</td>
                  <td class="px-4 py-2 text-center text-[14px] text-[#2d2d2d]">
                    <span class="inline-flex items-center gap-1 whitespace-nowrap">${data.labor.merchandisers.hc} ${hcChange2}</span>
                  </td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d]">$${data.labor.merchandisers.wages.toFixed(2)}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d]">$${data.labor.merchandisers.salary.toLocaleString()}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d]">${data.labor.merchandisers.hrsWk}</td>
                </tr>
                <tr>
                  <td class="px-4 py-2 text-[14px] font-bold text-[#2d2d2d]">TOTAL</td>
                  <td class="px-4 py-2 text-center text-[14px] font-bold text-[#2d2d2d]">${data.labor.cdlDms.hc + data.labor.merchandisers.hc}</td>
                  <td class="px-4 py-2 text-right text-[14px] font-bold text-[#2d2d2d]">0</td>
                  <td class="px-4 py-2 text-right text-[14px] font-bold text-[#2d2d2d]">0</td>
                  <td class="px-4 py-2 text-right text-[14px] font-bold text-[#2d2d2d]">0</td>
                </tr>
              </tbody>
            </table>
          </div>
        `;
      }

      function renderCompareDetailService(containerId, label, data) {
        const container = containerId === "left" ? compareDetailLeft : compareDetailRight;
        const headerBg = "#FFF8E1";
        const headerColor = "#E8A800";
        const formatRow = (key, labelText, values) => `
          <div
            class="grid grid-cols-[1.2fr_1fr_1fr] items-center border-b border-[#f0c44f] px-4 py-3 text-[14px] text-[#2d2d2d]"
            data-section="${key}"
          >
            <button
              type="button"
              class="flex items-center gap-2 font-bold"
              data-toggle-section="${key}"
            >
              <span class="material-icons text-[16px] text-[#4b4b4b]" data-caret>
                expand_more
              </span>
              ${labelText}
            </button>
            <div class="text-center font-bold">${values.lf}</div>
            <div class="text-center font-bold">${values.sf}</div>
          </div>
          <div class="border-b border-[#f0c44f] bg-[#fffaf1]" data-children="${key}">
            <div class="grid grid-cols-[1.2fr_1fr_1fr] items-center px-4 py-3 text-[14px] text-[#2d2d2d]">
              <div class="flex items-center gap-2 pl-6 italic text-[#4b4b4b]">Foods</div>
              <div class="flex items-center justify-center gap-2">
                <span class="font-bold">${values.foods.lf}</span>
                <span class="inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">${values.foods.lfDelta}</span>
              </div>
              <div class="flex items-center justify-center gap-2">
                <span class="font-bold">${values.foods.sf}</span>
                <span class="inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">${values.foods.sfDelta}</span>
              </div>
            </div>
            <div class="grid grid-cols-[1.2fr_1fr_1fr] items-center px-4 py-3 text-[14px] text-[#2d2d2d]">
              <div class="flex items-center gap-2 pl-6 italic text-[#4b4b4b]">Bevs</div>
              <div class="flex items-center justify-center gap-2">
                <span class="font-bold">${values.bevs.lf}</span>
                <span class="inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">${values.bevs.lfDelta}</span>
              </div>
              <div class="flex items-center justify-center gap-2">
                <span class="font-bold">${values.bevs.sf}</span>
                <span class="inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">${values.bevs.sfDelta}</span>
              </div>
            </div>
          </div>
        `;

        const sectionPrefix = containerId;
        container.innerHTML = `
          <div class="table-text overflow-hidden rounded-[8px] bg-white" style="border:1px solid ${headerColor}">
            <div class="table-header flex items-center justify-between px-4 py-2 font-bold uppercase" style="background:${headerBg};color:#2d2d2d">
              <span>Service ${label.toUpperCase()}</span>
              <span class="font-bold text-[#9c6b00]">Expand all</span>
            </div>
            <div class="table-header grid grid-cols-[1.2fr_1fr_1fr] items-center border-b border-[#f0c44f] px-4 py-2 font-bold uppercase text-[#4b4b4b]">
              <div>Segment</div>
              <div class="text-center">Large Format</div>
              <div class="text-center">Small Format</div>
            </div>
            ${formatRow(`${sectionPrefix}-freq`, "Freq./Week", data.service.freq)}
            ${formatRow(`${sectionPrefix}-wsa`, "WSA", data.service.wsa)}
            ${formatRow(`${sectionPrefix}-drop`, "Drop Size", data.service.dropSize)}
            <div class="grid grid-cols-[1.2fr_1fr_1fr] items-center px-4 py-3 text-[14px] font-bold text-[#2d2d2d]">
              <div>Total</div>
              <div class="text-center">${data.service.dropSize.lf}</div>
              <div class="text-center">${data.service.dropSize.sf}</div>
            </div>
          </div>
        `;
      }

      function renderCompareDetailAssets(containerId, label, data) {
        const container = containerId === "left" ? compareDetailLeft : compareDetailRight;
        const headerBg = "#FFF8E1";
        const headerColor = "#E8A800";
        const totalCount = data.assets_detail.table.reduce((sum, row) => sum + row.count, 0);
        container.innerHTML = `
          <div class="table-text overflow-hidden rounded-[8px] bg-white" style="border:1px solid ${headerColor}">
            <div class="table-header flex items-center justify-between px-4 py-2 font-bold uppercase" style="background:${headerBg};color:#2d2d2d">
              <span>Assets ${label.toUpperCase()}</span>
            </div>
            <div class="table-header grid grid-cols-[1.4fr_1fr] items-center border-b border-[#f0c44f] px-4 py-2 font-bold uppercase text-[#4b4b4b]">
              <div>Asset Type</div>
              <div class="text-right"># of Assets</div>
            </div>
            ${data.assets_detail.table
              .map(
                (row) => `
              <div class="grid grid-cols-[1.4fr_1fr] items-center border-b border-[#f0c44f] px-4 py-3 text-[14px] text-[#2d2d2d]">
                <div>${row.label}</div>
                <div class="flex items-center justify-end gap-2">
                  <span class="font-bold">${row.count}</span>
                  <span class="inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">${row.delta}</span>
                </div>
              </div>
            `
              )
              .join("")}
            <div class="grid grid-cols-[1.4fr_1fr] items-center px-4 py-3 text-[14px] font-bold text-[#2d2d2d]">
              <div>Total</div>
              <div class="flex items-center justify-end gap-2">
                <span class="font-bold">${totalCount}</span>
                <span class="inline-flex rounded bg-[#E6F6ED] px-2 py-[2px] text-[10px] font-bold text-[#008A3B]">+70%</span>
              </div>
            </div>
          </div>
        `;
      }

      function renderCompareDetailPnl(containerId, label, data) {
        const container = containerId === "left" ? compareDetailLeft : compareDetailRight;
        const headerBg = "#FFF8E1";
        const headerColor = "#E8A800";
        const formatValue = (value) => value.toLocaleString();
        const formatPercent = (value) => value.toFixed(1);
        const formatPerCase = (value) => value.toFixed(1);
        container.innerHTML = `
          <div class="table-text overflow-hidden rounded-[8px] bg-white" style="border:1px solid ${headerColor}">
            <div class="table-header px-4 py-2 font-bold uppercase" style="background:${headerBg};color:#2d2d2d">
              P&L ${label}
            </div>
            <table class="w-full">
              <thead>
                <tr class="table-header border-b border-[#f0c44f] font-bold uppercase text-[#4b4b4b]">
                  <th class="px-4 py-2 text-left">Segment</th>
                  <th class="px-4 py-2 text-right">$</th>
                  <th class="px-4 py-2 text-right">%NR</th>
                  <th class="px-4 py-2 text-right">$/Case</th>
                </tr>
              </thead>
              <tbody>
                ${data.pnl.rows
                  .map(
                    (row) => `
                <tr class="border-b border-[#f0c44f]">
                  <td class="px-4 py-2 text-[14px] text-[#2d2d2d] ${row.isBold ? "font-bold" : ""} ${row.indent ? "pl-8" : ""}">${row.label}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d] ${row.isBold ? "font-bold" : ""}">${formatValue(row.value)}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d] ${row.isBold ? "font-bold" : ""}">${formatPercent(row.percent)}</td>
                  <td class="px-4 py-2 text-right text-[14px] text-[#2d2d2d] ${row.isBold ? "font-bold" : ""}">${formatPerCase(row.perCase)}</td>
                </tr>
                `
                  )
                  .join("")}
              </tbody>
            </table>
          </div>
        `;
      }

      let compareData1 = null;
      let compareData2 = null;
      let compareId1 = "";
      let compareId2 = "";
      let currentCompareTab = "Labor";

      function setCompareDetailTab(tab) {
        currentCompareTab = tab;
        document.querySelectorAll(".compare-detail-tab").forEach((t) => {
          const isActive = t.getAttribute("data-compare-tab") === tab;
          t.classList.toggle("border-[#004895]", isActive);
          t.classList.toggle("border-transparent", !isActive);
          t.classList.toggle("font-bold", isActive);
          t.classList.toggle("text-[#004895]", isActive);
          t.classList.toggle("text-[#4b4b4b]", !isActive);
        });
        const label1 = "Scenario 1";
        const label2 = "Scenario 2";
        if (tab === "Labor") {
          renderCompareDetailTable("left", label1, compareData1);
          renderCompareDetailTable("right", label2, compareData2);
        } else if (tab === "Service") {
          renderCompareDetailService("left", label1, compareData1);
          renderCompareDetailService("right", label2, compareData2);
        } else if (tab === "Assets") {
          renderCompareDetailAssets("left", label1, compareData1);
          renderCompareDetailAssets("right", label2, compareData2);
        } else if (tab === "P&L") {
          renderCompareDetailPnl("left", label1, compareData1);
          renderCompareDetailPnl("right", label2, compareData2);
        }
      }

      function openCompareView() {
        const selectedIds = getSelectedScenarioIds();
        if (selectedIds.length < 2) return;
        compareId1 = selectedIds[0];
        compareId2 = selectedIds[1];

        const seed1 = parseInt(compareId1.replace(/\D/g, ""), 10) || 1;
        const seed2 = parseInt(compareId2.replace(/\D/g, ""), 10) || 2;
        compareData1 = buildCompareData(seed1);
        compareData2 = buildCompareData(seed2);

        compareTitle.textContent = `Comparing ${compareId1} and ${compareId2}`;
        renderCompareTileRow(compareTileRow1, "Scenario 1", compareData1);
        renderCompareTileRow(compareTileRow2, "Scenario 2", compareData2);
        renderCompareMetrics(compareData1, compareData2);
        renderCompareDiffs(compareId1, compareId2);
        setCompareDetailTab("Labor");
        setView("compare");
      }

      compareButton.addEventListener("click", () => {
        const checkedRows = Array.from(document.querySelectorAll(".row-checkbox:checked"));
        const completedChecked = checkedRows.filter(
          (cb) => cb.closest(".table-row").getAttribute("data-status") === "Completed"
        );
        if (completedChecked.length === 2) {
          openCompareView();
        }
      });

      compareBack.addEventListener("click", () => setView("workspace"));
      compareBreadcrumbWorkspace.addEventListener("click", () => setView("workspace"));
      compareDownload.addEventListener("click", () => {});
      outputBreadcrumbWorkspace?.addEventListener("click", () => setView("workspace"));

      document.querySelectorAll(".compare-detail-tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          setCompareDetailTab(tab.getAttribute("data-compare-tab"));
        });
      });

      document.addEventListener("click", (event) => {
        const toggle = event.target.closest("[data-toggle-section]");
        if (!toggle) {
          return;
        }
        const section = toggle.getAttribute("data-toggle-section");
        const parent = toggle.closest("[data-service-table]");
        const children = parent?.querySelector(`[data-children="${section}"]`);
        if (!children) {
          return;
        }
        children.classList.toggle("hidden");
        const caret = toggle.querySelector("[data-caret]");
        if (caret) {
          caret.textContent = children.classList.contains("hidden")
            ? "chevron_right"
            : "expand_more";
        }
      });

      setView("workspace");
      renderTable();
      updateViewBaselineState();
    </script>
  </body>
</html>
